!function(){"use strict";function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return t};var t={},n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(w){s=function(e,t,n){return e[t]=n}}function d(e,t,n,i){var r=t&&t.prototype instanceof p?t:p,o=Object.create(r.prototype),a=new k(i||[]);return o._invoke=function(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return L()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var l=S(a,n);if(l){if(l===u)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=c(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(w){return{type:"throw",arg:w}}}t.wrap=d;var u={};function p(){}function m(){}function f(){}var v={};s(v,o,function(){return this});var h=Object.getPrototypeOf,y=h&&h(h(I([])));y&&y!==n&&i.call(y,o)&&(v=y);var g=f.prototype=p.prototype=Object.create(v);function x(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){function n(r,o,a,l){var s=c(e[r],e,o);if("throw"!==s.type){var d=s.arg,u=d.value;return u&&"object"==typeof u&&i.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,l)},function(e){n("throw",e,a,l)}):t.resolve(u).then(function(e){d.value=e,a(d)},function(e){return n("throw",e,a,l)})}l(s.arg)}var r;this._invoke=function(e,i){function o(){return new t(function(t,r){n(e,i,t,r)})}return r=r?r.then(o,o):o()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var i=c(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,u;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return m.prototype=f,s(g,"constructor",f),s(f,"constructor",m),m.displayName=s(f,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},x(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new b(d(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},x(g),s(g,l,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),s=i.call(o,"finallyLoc");if(l&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw a}}}}function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkacm_web=self.webpackChunkacm_web||[]).push([[967,519],{36949:function(e,i,r){r.d(i,{NU:function(){return be},q4:function(){return Se}});var a=r(37716),s=r(17238),d=r(38583),c=r(11818),u=r(16988),p=r(33013),m=r(3679),f=r(71386),v=r(99287),h=r(19309);function y(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(n.label)}}function g(e,t){1&e&&a.\u0275\u0275elementContainer(0)}var x=function(e){return{height:e}},b=function(e,t){return{"p-highlight":e,"p-disabled":t}},S=function(e){return{"p-highlight":e}},C=function(e){return{"pi pi-check":e}},E=function(e){return{$implicit:e}},k=["container"],I=["filterInput"],L=["in"];function w(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275text(1),a.\u0275\u0275elementContainerEnd()),2&e){var n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(n.valuesAsString||"empty")}}function F(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"span",17),a.\u0275\u0275listener("click",function(e){a.\u0275\u0275restoreView(n);var t=a.\u0275\u0275nextContext().$implicit;return a.\u0275\u0275nextContext(3).removeChip(t,e)}),a.\u0275\u0275elementEnd()}}function T(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",13,14),a.\u0275\u0275elementStart(2,"span",15),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(4,F,1,0,"span",16),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(i.findLabelByValue(n)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!i.disabled)}}function D(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275text(1),a.\u0275\u0275elementContainerEnd()),2&e){var n=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(n.placeholder||n.defaultLabel||"empty")}}function O(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,T,5,2,"div",12),a.\u0275\u0275template(2,D,2,1,"ng-container",7),a.\u0275\u0275elementContainerEnd()),2&e){var n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",n.value),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!n.value||0===n.value.length)}}function _(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,w,2,1,"ng-container",7),a.\u0275\u0275template(2,O,3,2,"ng-container",7),a.\u0275\u0275elementContainerEnd()),2&e){var n=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","comma"===n.display),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","chip"===n.display)}}function G(e,t){1&e&&a.\u0275\u0275elementContainer(0)}function R(e,t){1&e&&a.\u0275\u0275elementContainer(0)}var A=function(e){return{"p-checkbox-disabled":e}},N=function(e,t,n){return{"p-highlight":e,"p-focus":t,"p-disabled":n}};function V(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",30),a.\u0275\u0275elementStart(1,"div",2),a.\u0275\u0275elementStart(2,"input",31),a.\u0275\u0275listener("focus",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(3).onHeaderCheckboxFocus()})("blur",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(3).onHeaderCheckboxBlur()})("keydown.space",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(3).toggleAll(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"div",32),a.\u0275\u0275listener("click",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(3).toggleAll(e)}),a.\u0275\u0275element(4,"span",33),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){var i=a.\u0275\u0275nextContext(3);a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(6,A,i.disabled||i.toggleAllDisabled)),a.\u0275\u0275advance(2),a.\u0275\u0275property("checked",i.allChecked)("disabled",i.disabled||i.toggleAllDisabled),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction3(8,N,i.allChecked,i.headerCheckboxFocus,i.disabled||i.toggleAllDisabled)),a.\u0275\u0275attribute("aria-checked",i.allChecked),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(12,C,i.allChecked))}}function U(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",34),a.\u0275\u0275elementStart(1,"input",35,36),a.\u0275\u0275listener("input",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(3).onFilterInputChange(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(3,"span",37),a.\u0275\u0275elementEnd()}if(2&e){var i=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(1),a.\u0275\u0275property("value",i.filterValue||"")("disabled",i.disabled),a.\u0275\u0275attribute("placeholder",i.filterPlaceHolder)("aria-label",i.ariaFilterLabel)}}function P(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",24),a.\u0275\u0275projection(1),a.\u0275\u0275template(2,R,1,0,"ng-container",25),a.\u0275\u0275template(3,V,5,14,"div",26),a.\u0275\u0275template(4,U,4,4,"div",27),a.\u0275\u0275elementStart(5,"button",28),a.\u0275\u0275listener("click",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(2).close(e)}),a.\u0275\u0275element(6,"span",29),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){var i=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(2),a.\u0275\u0275property("ngTemplateOutlet",i.headerTemplate),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",i.showToggleAll&&!i.selectionLimit),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",i.filter)}}function M(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext().$implicit,i=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(i.getOptionGroupLabel(n)||"empty")}}function B(e,t){1&e&&a.\u0275\u0275elementContainer(0)}function j(e,t){1&e&&a.\u0275\u0275elementContainer(0)}function J(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"li",39),a.\u0275\u0275template(1,M,2,1,"span",7),a.\u0275\u0275template(2,B,1,0,"ng-container",8),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,j,1,0,"ng-container",8)),2&e){var n=t.$implicit;a.\u0275\u0275nextContext(2);var i=a.\u0275\u0275reference(7),r=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!r.groupTemplate),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngTemplateOutlet",r.groupTemplate)("ngTemplateOutletContext",a.\u0275\u0275pureFunction1(5,E,n)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngTemplateOutlet",i)("ngTemplateOutletContext",a.\u0275\u0275pureFunction1(7,E,r.getOptionGroupChildren(n)))}}function z(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,J,4,9,"ng-template",38),a.\u0275\u0275elementContainerEnd()),2&e){var n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",n.optionsToRender)}}function q(e,t){1&e&&a.\u0275\u0275elementContainer(0)}function H(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,q,1,0,"ng-container",8),a.\u0275\u0275elementContainerEnd()),2&e){a.\u0275\u0275nextContext();var n=a.\u0275\u0275reference(7),i=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("ngTemplateOutlet",n)("ngTemplateOutletContext",a.\u0275\u0275pureFunction1(2,E,i.optionsToRender))}}function Y(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"p-multiSelectItem",43),a.\u0275\u0275listener("onClick",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(4).onOptionClick(e)})("onKeydown",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(4).onOptionKeydown(e)}),a.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit,r=a.\u0275\u0275nextContext(4);a.\u0275\u0275property("option",i)("selected",r.isSelected(i))("label",r.getOptionLabel(i))("disabled",r.isOptionDisabled(i))("template",r.itemTemplate)}}function W(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Y,1,5,"ng-template",38),a.\u0275\u0275elementContainerEnd()),2&e){var n=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",n)}}function K(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"p-multiSelectItem",48),a.\u0275\u0275listener("onClick",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(5).onOptionClick(e)})("onKeydown",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(5).onOptionKeydown(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()}if(2&e){var i=t.$implicit,r=a.\u0275\u0275nextContext(5);a.\u0275\u0275advance(1),a.\u0275\u0275property("option",i)("selected",r.isSelected(i))("label",r.getOptionLabel(i))("disabled",r.isOptionDisabled(i))("template",r.itemTemplate)("itemSize",r.itemSize)}}function $(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"cdk-virtual-scroll-viewport",45,46),a.\u0275\u0275template(2,K,2,6,"ng-container",47),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext(2).$implicit,i=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("ngStyle",a.\u0275\u0275pureFunction1(3,x,i.scrollHeight))("itemSize",i.itemSize),a.\u0275\u0275advance(2),a.\u0275\u0275property("cdkVirtualForOf",n)}}function Z(e,t){if(1&e&&a.\u0275\u0275template(0,$,3,5,"cdk-virtual-scroll-viewport",44),2&e){var n=a.\u0275\u0275nextContext(3);a.\u0275\u0275property("ngIf",n.virtualScroll&&!n.emptyOptions)}}function Q(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275text(1),a.\u0275\u0275elementContainerEnd()),2&e){var n=a.\u0275\u0275nextContext(4);a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",n.emptyFilterMessageLabel," ")}}function X(e,t){1&e&&a.\u0275\u0275elementContainer(0,null,50)}function ee(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"li",49),a.\u0275\u0275template(1,Q,2,1,"ng-container",40),a.\u0275\u0275template(2,X,2,0,"ng-container",25),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!n.emptyFilterTemplate&&!n.emptyTemplate)("ngIfElse",n.emptyFilter),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngTemplateOutlet",n.emptyFilterTemplate||n.emptyTemplate)}}function te(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275text(1),a.\u0275\u0275elementContainerEnd()),2&e){var n=a.\u0275\u0275nextContext(4);a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",n.emptyMessageLabel," ")}}function ne(e,t){1&e&&a.\u0275\u0275elementContainer(0,null,51)}function ie(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"li",49),a.\u0275\u0275template(1,te,2,1,"ng-container",40),a.\u0275\u0275template(2,ne,2,0,"ng-container",25),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngTemplateOutlet",n.emptyTemplate)}}function re(e,t){if(1&e&&(a.\u0275\u0275template(0,W,2,1,"ng-container",40),a.\u0275\u0275template(1,Z,1,1,"ng-template",null,41,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275template(3,ee,3,3,"li",42),a.\u0275\u0275template(4,ie,3,3,"li",42)),2&e){var n=a.\u0275\u0275reference(2),i=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("ngIf",!i.virtualScroll)("ngIfElse",n),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",i.hasFilter()&&i.emptyOptions),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!i.hasFilter()&&i.emptyOptions)}}function oe(e,t){1&e&&a.\u0275\u0275elementContainer(0)}function ae(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",52),a.\u0275\u0275projection(1,1),a.\u0275\u0275template(2,oe,1,0,"ng-container",25),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(2),a.\u0275\u0275property("ngTemplateOutlet",n.footerTemplate)}}var le=function(){return["p-multiselect-panel p-component"]},se=function(e,t){return{showTransitionParams:e,hideTransitionParams:t}},de=function(e){return{value:"visible",params:e}},ce=function(e){return{"p-multiselect-virtualscroll":e}};function ue(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",18),a.\u0275\u0275listener("@overlayAnimation.start",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().onOverlayAnimationStart(e)})("@overlayAnimation.done",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().onOverlayAnimationEnd(e)})("keydown",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().onKeydown(e)})("click",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().onOverlayClick(e)}),a.\u0275\u0275template(1,P,7,3,"div",19),a.\u0275\u0275elementStart(2,"div",20),a.\u0275\u0275elementStart(3,"ul",21),a.\u0275\u0275template(4,z,2,1,"ng-container",7),a.\u0275\u0275template(5,H,2,4,"ng-container",7),a.\u0275\u0275template(6,re,5,4,"ng-template",null,22,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(8,ae,3,1,"div",23),a.\u0275\u0275elementEnd()}if(2&e){var i=a.\u0275\u0275nextContext();a.\u0275\u0275classMap(i.panelStyleClass),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction0(12,le))("@overlayAnimation",a.\u0275\u0275pureFunction1(16,de,a.\u0275\u0275pureFunction2(13,se,i.showTransitionOptions,i.hideTransitionOptions)))("ngStyle",i.panelStyle),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",i.showHeader),a.\u0275\u0275advance(1),a.\u0275\u0275styleProp("max-height",i.virtualScroll?"auto":i.scrollHeight||"auto"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(18,ce,i.virtualScroll)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",i.group),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!i.group),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",i.footerFacet||i.footerTemplate)}}var pe,me=[[["p-header"]],[["p-footer"]]],fe=function(e,t,n,i){return{"p-multiselect p-component":!0,"p-multiselect-open":e,"p-multiselect-chip":t,"p-focus":n,"p-disabled":i}},ve=function(e,t){return{"p-placeholder":e,"p-multiselect-label-empty":t}},he=function(){return{"p-multiselect-trigger":!0}},ye=["p-header","p-footer"],ge={provide:m.JU,useExisting:(0,a.forwardRef)(function(){return be}),multi:!0},xe=((pe=function(){function e(){o(this,e),this.onClick=new a.EventEmitter,this.onKeydown=new a.EventEmitter}return l(e,[{key:"onOptionClick",value:function(e){this.onClick.emit({originalEvent:e,option:this.option})}},{key:"onOptionKeydown",value:function(e){this.onKeydown.emit({originalEvent:e,option:this.option})}}]),e}()).\u0275fac=function(e){return new(e||pe)},pe.\u0275cmp=a.\u0275\u0275defineComponent({type:pe,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick",onKeydown:"onKeydown"},decls:6,vars:20,consts:[["pRipple","",1,"p-multiselect-item",3,"ngStyle","ngClass","click","keydown"],[1,"p-checkbox","p-component"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(a.\u0275\u0275elementStart(0,"li",0),a.\u0275\u0275listener("click",function(e){return t.onOptionClick(e)})("keydown",function(e){return t.onOptionKeydown(e)}),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275elementStart(2,"div",2),a.\u0275\u0275element(3,"span",3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(4,y,2,1,"span",4),a.\u0275\u0275template(5,g,1,0,"ng-container",5),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275property("ngStyle",a.\u0275\u0275pureFunction1(9,x,t.itemSize+"px"))("ngClass",a.\u0275\u0275pureFunction2(11,b,t.selected,t.disabled)),a.\u0275\u0275attribute("aria-label",t.label)("tabindex",t.disabled?null:"0"),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(14,S,t.selected)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(16,C,t.selected)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!t.template),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngTemplateOutlet",t.template)("ngTemplateOutletContext",a.\u0275\u0275pureFunction1(18,E,t.option)))},directives:[h.H,d.NgStyle,d.NgClass,d.NgIf,d.NgTemplateOutlet],encapsulation:2}),pe),be=function(){var e=function(){function e(t,n,i,r,l,s){o(this,e),this.el=t,this.renderer=n,this.cd=i,this.filterService=r,this.config=l,this.overlayService=s,this.filter=!0,this.displaySelectedLabel=!0,this.maxSelectedLabels=3,this.selectedItemsLabel="ellipsis",this.showToggleAll=!0,this.emptyFilterMessage="",this.emptyMessage="",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.showHeader=!0,this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.display="comma",this.onChange=new a.EventEmitter,this.onFilter=new a.EventEmitter,this.onFocus=new a.EventEmitter,this.onBlur=new a.EventEmitter,this.onClick=new a.EventEmitter,this.onPanelShow=new a.EventEmitter,this.onPanelHide=new a.EventEmitter,this.scrollHeight="200px",this.onModelChange=function(){},this.onModelTouched=function(){}}return l(e,[{key:"defaultLabel",get:function(){return this._defaultLabel},set:function(e){this._defaultLabel=e,this.updateLabel()}},{key:"placeholder",get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.updateLabel()}},{key:"options",get:function(){return this._options},set:function(e){this._options=e,this.updateLabel()}},{key:"filterValue",get:function(){return this._filterValue},set:function(e){this._filterValue=e,this.activateFilter()}},{key:"ngOnInit",value:function(){this.updateLabel()}},{key:"ngAfterContentInit",value:function(){var e=this;this.templates.forEach(function(t){switch(t.getType()){case"item":e.itemTemplate=t.template;break;case"group":e.groupTemplate=t.template;break;case"selectedItems":e.selectedItemsTemplate=t.template;break;case"header":e.headerTemplate=t.template;break;case"emptyfilter":e.emptyFilterTemplate=t.template;break;case"empty":e.emptyTemplate=t.template;break;case"footer":e.footerTemplate=t.template;break;default:e.itemTemplate=t.template}})}},{key:"ngAfterViewInit",value:function(){this.overlayVisible&&this.show()}},{key:"ngAfterViewChecked",value:function(){this.filtered&&(this.alignOverlay(),this.filtered=!1)}},{key:"getOptionLabel",value:function(e){return this.optionLabel?u.gb.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}},{key:"getOptionValue",value:function(e){return this.optionValue?u.gb.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}},{key:"getOptionGroupLabel",value:function(e){return this.optionGroupLabel?u.gb.resolveFieldData(e,this.optionGroupLabel):null!=e.label?e.label:e}},{key:"getOptionGroupChildren",value:function(e){return this.optionGroupChildren?u.gb.resolveFieldData(e,this.optionGroupChildren):e.items}},{key:"isOptionDisabled",value:function(e){return(this.optionDisabled?u.gb.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled)||this.maxSelectionLimitReached&&!this.isSelected(e)}},{key:"writeValue",value:function(e){this.value=e,this.updateLabel(),this.updateFilledState(),this.checkSelectionLimit(),this.cd.markForCheck()}},{key:"checkSelectionLimit",value:function(){this.maxSelectionLimitReached=!(!this.selectionLimit||!this.value||this.value.length!==this.selectionLimit)}},{key:"updateFilledState",value:function(){this.filled=this.value&&this.value.length>0}},{key:"registerOnChange",value:function(e){this.onModelChange=e}},{key:"registerOnTouched",value:function(e){this.onModelTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e,this.cd.markForCheck()}},{key:"onOptionClick",value:function(e){var t=e.option;if(!this.isOptionDisabled(t)){var i=this.getOptionValue(t),r=this.findSelectionIndex(i);-1!=r?(this.value=this.value.filter(function(e,t){return t!=r}),this.selectionLimit&&(this.maxSelectionLimitReached=!1)):((!this.selectionLimit||!this.value||this.value.length<this.selectionLimit)&&(this.value=[].concat(n(this.value||[]),[i])),this.checkSelectionLimit()),this.onModelChange(this.value),this.onChange.emit({originalEvent:e.originalEvent,value:this.value,itemValue:i}),this.updateLabel(),this.updateFilledState()}}},{key:"isSelected",value:function(e){return-1!=this.findSelectionIndex(this.getOptionValue(e))}},{key:"findSelectionIndex",value:function(e){var t=-1;if(this.value)for(var n=0;n<this.value.length;n++)if(u.gb.equals(this.value[n],e,this.dataKey)){t=n;break}return t}},{key:"toggleAllDisabled",get:function(){var e=this.optionsToRender;if(!e||0===e.length)return!0;var n,i=t(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(!this.isOptionDisabled(r))return!1}}catch(o){i.e(o)}finally{i.f()}return!0}},{key:"toggleAll",value:function(e){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateFilledState(),this.updateLabel(),e.preventDefault())}},{key:"checkAll",value:function(){var e=this,t=[];this.optionsToRender.forEach(function(n){if(e.group){var i=e.getOptionGroupChildren(n);i&&i.forEach(function(n){var i=e.isOptionDisabled(n);(!i||i&&e.isSelected(n))&&t.push(e.getOptionValue(n))})}else{var r=e.isOptionDisabled(n);(!r||r&&e.isSelected(n))&&t.push(e.getOptionValue(n))}}),this.value=t}},{key:"uncheckAll",value:function(){var e=this,t=[];this.optionsToRender.forEach(function(n){e.group?n.items&&n.items.forEach(function(n){e.isOptionDisabled(n)&&e.isSelected(n)&&t.push(e.getOptionValue(n))}):e.isOptionDisabled(n)&&e.isSelected(n)&&t.push(e.getOptionValue(n))}),this.value=t}},{key:"show",value:function(){this.overlayVisible||(this.overlayVisible=!0)}},{key:"onOverlayClick",value:function(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}},{key:"onOverlayAnimationStart",value:function(e){switch(e.toState){case"visible":this.overlay=e.element,this.appendOverlay(),this.autoZIndex&&u.P9.set("overlay",this.overlay,this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.onOverlayHide()}}},{key:"onOverlayAnimationEnd",value:function(e){switch(e.toState){case"void":u.P9.clear(e.element)}}},{key:"appendOverlay",value:function(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):c.p.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=c.p.getWidth(this.containerViewChild.nativeElement)+"px"))}},{key:"restoreOverlayAppend",value:function(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}},{key:"alignOverlay",value:function(){this.overlay&&(this.appendTo?c.p.absolutePosition(this.overlay,this.containerViewChild.nativeElement):c.p.relativePosition(this.overlay,this.containerViewChild.nativeElement))}},{key:"hide",value:function(){this.overlayVisible=!1,this.unbindDocumentClickListener(),this.resetFilterOnHide&&(this.filterInputChild.nativeElement.value="",this._filterValue=null,this._filteredOptions=null),this.onPanelHide.emit(),this.cd.markForCheck()}},{key:"close",value:function(e){this.hide(),e.preventDefault(),e.stopPropagation()}},{key:"onMouseclick",value:function(e,t){this.disabled||this.readonly||e.target.isSameNode(this.accessibleViewChild.nativeElement)||(this.onClick.emit(e),!this.isOverlayClick(e)&&!c.p.hasClass(e.target,"p-multiselect-token-icon")&&(this.overlayVisible?this.hide():(t.focus(),this.show())))}},{key:"removeChip",value:function(e,t){var n=this;this.value=this.value.filter(function(t){return!u.gb.equals(t,e,n.dataKey)}),this.onModelChange(this.value),this.checkSelectionLimit(),this.onChange.emit({originalEvent:t,value:this.value,itemValue:e}),this.updateLabel(),this.updateFilledState()}},{key:"isOverlayClick",value:function(e){var t=e.target;return!!this.overlay&&(this.overlay.isSameNode(t)||this.overlay.contains(t))}},{key:"isOutsideClicked",value:function(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.isOverlayClick(e))}},{key:"onInputFocus",value:function(e){this.focus=!0,this.onFocus.emit({originalEvent:e})}},{key:"onInputBlur",value:function(e){this.focus=!1,this.onBlur.emit({originalEvent:e}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}},{key:"onOptionKeydown",value:function(e){if(!this.readonly)switch(e.originalEvent.which){case 40:var t=this.findNextItem(e.originalEvent.target.parentElement);t&&t.focus(),e.originalEvent.preventDefault();break;case 38:var n=this.findPrevItem(e.originalEvent.target.parentElement);n&&n.focus(),e.originalEvent.preventDefault();break;case 13:this.onOptionClick(e),e.originalEvent.preventDefault()}}},{key:"findNextItem",value:function(e){var t=e.nextElementSibling;return t?c.p.hasClass(t.children[0],"p-disabled")||c.p.isHidden(t.children[0])||c.p.hasClass(t,"p-multiselect-item-group")?this.findNextItem(t):t.children[0]:null}},{key:"findPrevItem",value:function(e){var t=e.previousElementSibling;return t?c.p.hasClass(t.children[0],"p-disabled")||c.p.isHidden(t.children[0])||c.p.hasClass(t,"p-multiselect-item-group")?this.findPrevItem(t):t.children[0]:null}},{key:"onKeydown",value:function(e){switch(e.which){case 40:!this.overlayVisible&&e.altKey&&(this.show(),e.preventDefault());break;case 32:this.overlayVisible||(this.show(),e.preventDefault());break;case 27:this.hide()}}},{key:"updateLabel",value:function(){if(this.value&&this.options&&this.value.length&&this.displaySelectedLabel){for(var e="",t=0;t<this.value.length;t++){var n=this.findLabelByValue(this.value[t]);n&&(e.length>0&&(e+=", "),e+=n)}if(this.value.length<=this.maxSelectedLabels||"ellipsis"===this.selectedItemsLabel)this.valuesAsString=e;else{var i=/{(.*?)}/;this.valuesAsString=i.test(this.selectedItemsLabel)?this.selectedItemsLabel.replace(this.selectedItemsLabel.match(i)[0],this.value.length+""):this.selectedItemsLabel}}else this.valuesAsString=this.placeholder||this.defaultLabel}},{key:"findLabelByValue",value:function(e){if(this.group){for(var t=null,n=0;n<this.options.length;n++){var i=this.getOptionGroupChildren(this.options[n]);if(i&&(t=this.searchLabelByValue(e,i)))break}return t}return this.searchLabelByValue(e,this.options)}},{key:"searchLabelByValue",value:function(e,t){for(var n=null,i=0;i<t.length;i++){var r=t[i],o=this.getOptionValue(r);if(null==e&&null==o||u.gb.equals(e,o,this.dataKey)){n=this.getOptionLabel(r);break}}return n}},{key:"allChecked",get:function(){var e=this.optionsToRender;if(!e||0===e.length)return!1;var n,i=0,r=0,o=0,a=this.group?0:this.optionsToRender.length,l=t(e);try{for(l.s();!(n=l.n()).done;){var s=n.value;if(this.group){var d,c=t(this.getOptionGroupChildren(s));try{for(c.s();!(d=c.n()).done;){var u=d.value,p=this.isOptionDisabled(u),m=this.isSelected(u);if(p)m?i++:r++;else{if(!m)return!1;o++}a++}}catch(h){c.e(h)}finally{c.f()}}else{var f=this.isOptionDisabled(s),v=this.isSelected(s);if(f)v?i++:r++;else{if(!v)return!1;o++}}}}catch(h){l.e(h)}finally{l.f()}return a===i||a===o||o&&a===o+r+i}},{key:"optionsToRender",get:function(){return this._filteredOptions||this.options}},{key:"emptyOptions",get:function(){var e=this.optionsToRender;return!e||0===e.length}},{key:"emptyMessageLabel",get:function(){return this.emptyMessage||this.config.getTranslation(p.ws.EMPTY_MESSAGE)}},{key:"emptyFilterMessageLabel",get:function(){return this.emptyFilterMessage||this.config.getTranslation(p.ws.EMPTY_FILTER_MESSAGE)}},{key:"hasFilter",value:function(){return this._filterValue&&this._filterValue.trim().length>0}},{key:"onFilterInputChange",value:function(e){this._filterValue=e.target.value,this.activateFilter(),this.onFilter.emit({originalEvent:e,filter:this._filterValue}),this.cd.detectChanges(),this.alignOverlay()}},{key:"activateFilter",value:function(){if(this.hasFilter()&&this._options){var e=(this.filterBy||this.optionLabel||"label").split(",");if(this.group){var n,i=(this.optionLabel||"label").split(","),r=[],o=t(this.options);try{for(o.s();!(n=o.n()).done;){var a=n.value,l=this.filterService.filter(this.getOptionGroupChildren(a),i,this.filterValue,this.filterMatchMode,this.filterLocale);l&&l.length&&r.push(Object.assign(Object.assign({},a),(s={},d=this.optionGroupChildren,c=l,d in s?Object.defineProperty(s,d,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[d]=c,s)))}}catch(u){o.e(u)}finally{o.f()}this._filteredOptions=r}else this._filteredOptions=this.filterService.filter(this.options,e,this._filterValue,this.filterMatchMode,this.filterLocale)}else this._filteredOptions=null;var s,d,c}},{key:"onHeaderCheckboxFocus",value:function(){this.headerCheckboxFocus=!0}},{key:"onHeaderCheckboxBlur",value:function(){this.headerCheckboxFocus=!1}},{key:"bindDocumentClickListener",value:function(){var e=this;this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",function(t){e.isOutsideClicked(t)&&e.hide()}))}},{key:"unbindDocumentClickListener",value:function(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}},{key:"bindDocumentResizeListener",value:function(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}},{key:"unbindDocumentResizeListener",value:function(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}},{key:"onWindowResize",value:function(){c.p.isAndroid()||this.hide()}},{key:"bindScrollListener",value:function(){var e=this;this.scrollHandler||(this.scrollHandler=new c.V(this.containerViewChild.nativeElement,function(){e.overlayVisible&&e.hide()})),this.scrollHandler.bindScrollListener()}},{key:"unbindScrollListener",value:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}},{key:"onOverlayHide",value:function(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.onModelTouched()}},{key:"ngOnDestroy",value:function(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&u.P9.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(a.Renderer2),a.\u0275\u0275directiveInject(a.ChangeDetectorRef),a.\u0275\u0275directiveInject(p.iZ),a.\u0275\u0275directiveInject(p.b4),a.\u0275\u0275directiveInject(p.F0))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["p-multiSelect"]],contentQueries:function(e,t,n){var i;(1&e&&(a.\u0275\u0275contentQuery(n,p.$_,5),a.\u0275\u0275contentQuery(n,p.h4,5),a.\u0275\u0275contentQuery(n,p.jx,4)),2&e)&&(a.\u0275\u0275queryRefresh(i=a.\u0275\u0275loadQuery())&&(t.footerFacet=i.first),a.\u0275\u0275queryRefresh(i=a.\u0275\u0275loadQuery())&&(t.headerFacet=i.first),a.\u0275\u0275queryRefresh(i=a.\u0275\u0275loadQuery())&&(t.templates=i))},viewQuery:function(e,t){var n;(1&e&&(a.\u0275\u0275viewQuery(k,5),a.\u0275\u0275viewQuery(I,5),a.\u0275\u0275viewQuery(L,5)),2&e)&&(a.\u0275\u0275queryRefresh(n=a.\u0275\u0275loadQuery())&&(t.containerViewChild=n.first),a.\u0275\u0275queryRefresh(n=a.\u0275\u0275loadQuery())&&(t.filterInputChild=n.first),a.\u0275\u0275queryRefresh(n=a.\u0275\u0275loadQuery())&&(t.accessibleViewChild=n.first))},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(e,t){2&e&&a.\u0275\u0275classProp("p-inputwrapper-filled",t.filled)("p-inputwrapper-focus",t.focus||t.overlayVisible)},inputs:{style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:"disabled",readonly:"readonly",group:"group",filter:"filter",filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:"overlayVisible",tabindex:"tabindex",appendTo:"appendTo",dataKey:"dataKey",name:"name",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:"selectionLimit",selectedItemsLabel:"selectedItemsLabel",showToggleAll:"showToggleAll",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:"showHeader",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",filterBy:"filterBy",virtualScroll:"virtualScroll",itemSize:"itemSize",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",display:"display",scrollHeight:"scrollHeight",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide"},features:[a.\u0275\u0275ProvidersFeature([ge])],ngContentSelectors:ye,decls:12,vars:32,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","readonly","aria-haspopup","listbox","role","listbox",3,"disabled","focus","blur","keydown"],["in",""],[1,"p-multiselect-label-container",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[1,"p-multiselect-label",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],[1,"p-multiselect-trigger-icon",3,"ngClass"],["onOverlayAnimationEnd","",3,"ngClass","ngStyle","class","keydown","click",4,"ngIf"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],["token",""],[1,"p-multiselect-token-label"],["class","p-multiselect-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-multiselect-token-icon","pi","pi-times-circle",3,"click"],["onOverlayAnimationEnd","",3,"ngClass","ngStyle","keydown","click"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass"],["itemslist",""],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],[4,"ngTemplateOutlet"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link",3,"click"],[1,"p-multiselect-close-icon","pi","pi-times"],[1,"p-checkbox","p-component",3,"ngClass"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[1,"p-multiselect-filter-container"],["type","text","role","textbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"value","disabled","input"],["filterInput",""],[1,"p-multiselect-filter-icon","pi","pi-search"],["ngFor","",3,"ngForOf"],[1,"p-multiselect-item-group"],[4,"ngIf","ngIfElse"],["virtualScrollList",""],["class","p-multiselect-empty-message",4,"ngIf"],[3,"option","selected","label","disabled","template","onClick","onKeydown"],[3,"ngStyle","itemSize",4,"ngIf"],[3,"ngStyle","itemSize"],["viewport",""],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"option","selected","label","disabled","template","itemSize","onClick","onKeydown"],[1,"p-multiselect-empty-message"],["emptyFilter",""],["empty",""],[1,"p-multiselect-footer"]],template:function(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275projectionDef(me),a.\u0275\u0275elementStart(0,"div",0,1),a.\u0275\u0275listener("click",function(e){a.\u0275\u0275restoreView(n);var i=a.\u0275\u0275reference(4);return t.onMouseclick(e,i)}),a.\u0275\u0275elementStart(2,"div",2),a.\u0275\u0275elementStart(3,"input",3,4),a.\u0275\u0275listener("focus",function(e){return t.onInputFocus(e)})("blur",function(e){return t.onInputBlur(e)})("keydown",function(e){return t.onKeydown(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"div",5),a.\u0275\u0275elementStart(6,"div",6),a.\u0275\u0275template(7,_,3,2,"ng-container",7),a.\u0275\u0275template(8,G,1,0,"ng-container",8),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(9,"div",9),a.\u0275\u0275element(10,"span",10),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(11,ue,9,20,"div",11),a.\u0275\u0275elementEnd()}2&e&&(a.\u0275\u0275classMap(t.styleClass),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction4(21,fe,t.overlayVisible,"chip"===t.display,t.focus,t.disabled))("ngStyle",t.style),a.\u0275\u0275advance(3),a.\u0275\u0275property("disabled",t.disabled),a.\u0275\u0275attribute("id",t.inputId)("name",t.name)("tabindex",t.tabindex)("aria-expanded",t.overlayVisible)("aria-labelledby",t.ariaLabelledBy),a.\u0275\u0275advance(2),a.\u0275\u0275property("pTooltip",t.tooltip)("tooltipPosition",t.tooltipPosition)("positionStyle",t.tooltipPositionStyle)("tooltipStyleClass",t.tooltipStyleClass),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction2(26,ve,t.valuesAsString===(t.defaultLabel||t.placeholder),!(null!=t.valuesAsString&&0!==t.valuesAsString.length||null!=t.placeholder&&0!==t.placeholder.length))),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!t.selectedItemsTemplate),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngTemplateOutlet",t.selectedItemsTemplate)("ngTemplateOutletContext",a.\u0275\u0275pureFunction1(29,E,t.value)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction0(31,he)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngClass",t.dropdownIcon),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.overlayVisible))},directives:[d.NgClass,d.NgStyle,v.u,d.NgIf,d.NgTemplateOutlet,d.NgForOf,h.H,xe,f.N7,f.xd,f.x0],styles:[".p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;-ms-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect .p-multiselect-panel{min-width:100%}.p-multiselect-panel{position:absolute;top:0;left:0}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}"],encapsulation:2,data:{animation:[(0,s.X$)("overlayAnimation",[(0,s.eR)(":enter",[(0,s.oB)({opacity:0,transform:"scaleY(0.8)"}),(0,s.jt)("{{showTransitionParams}}")]),(0,s.eR)(":leave",[(0,s.jt)("{{hideTransitionParams}}",(0,s.oB)({opacity:0}))])])]},changeDetection:0}),e}(),Se=function(){var e=l(function e(){o(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=a.\u0275\u0275defineInjector({imports:[[d.CommonModule,p.m8,f.Cl,v.z,h.T],p.m8,f.Cl]}),e}()},37300:function(e,t,n){n.d(t,{m:function(){return d}});var i,r=n(6452),a=n(37716),s=n(91841),d=((i=function(){function e(t){o(this,e),this.httpClient=t}return l(e,[{key:"downloadTemplate",value:function(e){return this.httpClient.post(r.f.GENERATE_LOAN_REPORT,e,{responseType:"blob"})}},{key:"downloadCustomReport",value:function(e){return this.httpClient.post(r.f.GENERATE_CUSTOM_REPORT,e,{responseType:"blob"})}}]),e}()).\u0275fac=function(e){return new(e||i)(a.\u0275\u0275inject(s.eN))},i.\u0275prov=a.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},49124:function(n,i,r){r.d(i,{Y:function(){return Y}});var a=r(8239),s=r(37716),d=r(30165),c=r(3679),u=r(37990),p=r(72114),m=r(55041),f=r(32132),v=r(94806),h=r(26772),y=r(43073),g=r(40572),x=r(58762),b=r(57702),S=r(22134),C=r(38583),E=r(88075),k=r(85627),I=r(65981),L=r(37300),w=r(61181),F=r(29790),T=r(28970),D=r(99266),O=r(25465),_=r(57552),G=r(70946);function R(e,t){1&e&&(s.\u0275\u0275elementStart(0,"h6",4),s.\u0275\u0275text(1),s.\u0275\u0275pipe(2,"translate"),s.\u0275\u0275elementEnd()),2&e&&(s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",s.\u0275\u0275pipeBind1(2,1,"upload_document.missing_document")," "))}function A(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"div",17),s.\u0275\u0275elementStart(1,"div",18),s.\u0275\u0275element(2,"input",19),s.\u0275\u0275elementStart(3,"label",20),s.\u0275\u0275text(4),s.\u0275\u0275pipe(5,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e){var n=s.\u0275\u0275nextContext(4);s.\u0275\u0275advance(2),s.\u0275\u0275property("checked",0!==n.repaymentFee),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(5,2,"loan.admin_fees_paid"))}}function N(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",28),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(n);var e=s.\u0275\u0275nextContext().$implicit;return s.\u0275\u0275nextContext(4).downloadTemplate(e)}),s.\u0275\u0275element(1,"i",38),s.\u0275\u0275elementEnd()}}function V(e,t){1&e&&(s.\u0275\u0275elementStart(0,"span",39),s.\u0275\u0275text(1," *"),s.\u0275\u0275elementEnd())}function U(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",40),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275reference(4).click()}),s.\u0275\u0275elementStart(1,"fa",41),s.\u0275\u0275element(2,"i",42),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"input",43,44),s.\u0275\u0275listener("change",function(e){s.\u0275\u0275restoreView(n);var t=s.\u0275\u0275nextContext().$implicit,i=s.\u0275\u0275nextContext(4);return i.onUpload(e,t,i.category)}),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){var i=s.\u0275\u0275nextContext().$implicit;s.\u0275\u0275property("disabled",!i.file)}}function P(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"tr"),s.\u0275\u0275elementStart(1,"td"),s.\u0275\u0275template(2,N,2,0,"button",21),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"td"),s.\u0275\u0275elementStart(4,"div",22),s.\u0275\u0275elementStart(5,"div",23),s.\u0275\u0275elementStart(6,"div",24),s.\u0275\u0275elementStart(7,"div",25),s.\u0275\u0275text(8),s.\u0275\u0275template(9,V,2,0,"span",26),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(10,"td"),s.\u0275\u0275elementStart(11,"div",27),s.\u0275\u0275text(12),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(13,"td"),s.\u0275\u0275elementStart(14,"div",27),s.\u0275\u0275text(15),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(16,"td"),s.\u0275\u0275elementStart(17,"div",27),s.\u0275\u0275text(18),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(19,"td",27),s.\u0275\u0275elementStart(20,"button",28),s.\u0275\u0275listener("click",function(){var e=s.\u0275\u0275restoreView(n).$implicit;s.\u0275\u0275nextContext(2);var t=s.\u0275\u0275reference(5);return s.\u0275\u0275nextContext(2).openLarge(t,e)}),s.\u0275\u0275element(21,"i",29),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(22,"td",27),s.\u0275\u0275elementStart(23,"form",30),s.\u0275\u0275elementStart(24,"button",28),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275reference(27).click()}),s.\u0275\u0275element(25,"i",31),s.\u0275\u0275elementStart(26,"input",32,33),s.\u0275\u0275listener("change",function(e){var t=s.\u0275\u0275restoreView(n).$implicit,i=s.\u0275\u0275nextContext(4);return i.onFileSelected(e,t,i.category)}),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(28,"td",34),s.\u0275\u0275elementStart(29,"button",35),s.\u0275\u0275listener("click",function(){var e=s.\u0275\u0275restoreView(n).$implicit;return s.\u0275\u0275nextContext(4).view(e.file,e.idfile)}),s.\u0275\u0275element(30,"i",36),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(31,"td",34),s.\u0275\u0275elementStart(32,"form",30),s.\u0275\u0275template(33,U,5,1,"button",37),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit,r=s.\u0275\u0275nextContext(4);s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",null!=i.reportName&&""!==i.reportName),s.\u0275\u0275advance(6),s.\u0275\u0275textInterpolate(i.title),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",i.mandatory===r.status),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate1(" ",i.name," "),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate1(" ",i.date," "),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate1(" ",i.updatedBy," "),s.\u0275\u0275advance(5),s.\u0275\u0275property("formGroup",r.documentForm),s.\u0275\u0275advance(3),s.\u0275\u0275property("name","file"+i.title),s.\u0275\u0275advance(6),s.\u0275\u0275property("formGroup",r.addDocumentForm),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",i.settingDocumentType.uniqueness&&1===i.documentIndex)}}function M(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",5),s.\u0275\u0275elementStart(1,"div",6),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext(3).toggleCollapse()}),s.\u0275\u0275elementStart(2,"div"),s.\u0275\u0275element(3,"i",7),s.\u0275\u0275text(4),s.\u0275\u0275pipe(5,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(6,"div"),s.\u0275\u0275element(7,"i",8),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(8,"div",9),s.\u0275\u0275elementStart(9,"div",10),s.\u0275\u0275template(10,A,6,4,"div",11),s.\u0275\u0275elementStart(11,"table",12),s.\u0275\u0275elementStart(12,"thead"),s.\u0275\u0275elementStart(13,"tr"),s.\u0275\u0275elementStart(14,"th",13),s.\u0275\u0275text(15),s.\u0275\u0275pipe(16,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(17,"th",13),s.\u0275\u0275text(18),s.\u0275\u0275pipe(19,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(20,"th",14),s.\u0275\u0275text(21),s.\u0275\u0275pipe(22,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(23,"th",14),s.\u0275\u0275text(24),s.\u0275\u0275pipe(25,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(26,"th",15),s.\u0275\u0275text(27),s.\u0275\u0275pipe(28,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(29,"th",15),s.\u0275\u0275text(30),s.\u0275\u0275pipe(31,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(32,"th",15),s.\u0275\u0275text(33),s.\u0275\u0275pipe(34,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(35,"th",15),s.\u0275\u0275element(36,"th",15),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(37,"tbody"),s.\u0275\u0275template(38,P,34,10,"tr",16),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){var i=s.\u0275\u0275nextContext(3);s.\u0275\u0275advance(4),s.\u0275\u0275textInterpolate2(" ",s.\u0275\u0275pipeBind1(5,13,"collections.collection-dashboard.documents"),": ",i.statutDocumentLoan," "),s.\u0275\u0275advance(3),s.\u0275\u0275property("ngClass",!0===i.expanded?"lnr-chevron-up text-secondary":"lnr-chevron-down text-secondary"),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngClass",!0===i.expanded?"collapse show":"collapse"),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",i.adminFee),s.\u0275\u0275advance(5),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(16,15,"upload_document.download_template")),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(19,17,"upload_document.Title")),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(22,19,"upload_document.Name")),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(25,21,"upload_document.Date")),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate1("",s.\u0275\u0275pipeBind1(28,23,"upload_document.modify-by")," "),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate1("",s.\u0275\u0275pipeBind1(31,25,"upload_document.version-history")," "),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate1("",s.\u0275\u0275pipeBind1(34,27,"upload_document.Upload_new_version")," "),s.\u0275\u0275advance(5),s.\u0275\u0275property("ngForOf",i.documents)}}function B(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"tr"),s.\u0275\u0275elementStart(1,"td"),s.\u0275\u0275elementStart(2,"div",27),s.\u0275\u0275text(3),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(4,"td"),s.\u0275\u0275elementStart(5,"div",27),s.\u0275\u0275text(6),s.\u0275\u0275pipe(7,"date"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(8,"td"),s.\u0275\u0275elementStart(9,"div",27),s.\u0275\u0275text(10),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(11,"td",34),s.\u0275\u0275elementStart(12,"button",35),s.\u0275\u0275listener("click",function(){var e=s.\u0275\u0275restoreView(n).$implicit;return s.\u0275\u0275nextContext(4).view(e.file,e.idDocumentGED)}),s.\u0275\u0275element(13,"i",36),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate1(" ",i.name," "),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate1(" ",s.\u0275\u0275pipeBind2(7,3,i.dateCreation,"dd/MM/yyyy hh:mm a")," "),s.\u0275\u0275advance(4),s.\u0275\u0275textInterpolate1(" ",i.insertBy," ")}}var j=function(e){return{"text-end":e}};function J(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",45),s.\u0275\u0275elementStart(1,"form"),s.\u0275\u0275elementStart(2,"div",46),s.\u0275\u0275elementStart(3,"h4",47),s.\u0275\u0275text(4),s.\u0275\u0275pipe(5,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(6,"button",48),s.\u0275\u0275listener("click",function(){return(0,s.\u0275\u0275restoreView(n).close)(s.\u0275\u0275nextContext(3).reset())}),s.\u0275\u0275elementStart(7,"span",49),s.\u0275\u0275text(8,"\xd7"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(9,"div",50),s.\u0275\u0275elementStart(10,"div",10),s.\u0275\u0275elementStart(11,"table",12),s.\u0275\u0275elementStart(12,"thead"),s.\u0275\u0275elementStart(13,"tr"),s.\u0275\u0275elementStart(14,"th",14),s.\u0275\u0275text(15),s.\u0275\u0275pipe(16,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(17,"th",14),s.\u0275\u0275text(18),s.\u0275\u0275pipe(19,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(20,"th",14),s.\u0275\u0275text(21),s.\u0275\u0275pipe(22,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(23,"th",15),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(24,"tbody"),s.\u0275\u0275template(25,B,14,6,"tr",16),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(26,"div",51),s.\u0275\u0275elementStart(27,"button",52),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext(3).reset()}),s.\u0275\u0275text(28),s.\u0275\u0275pipe(29,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){var i=s.\u0275\u0275nextContext(3);s.\u0275\u0275propertyInterpolate("dir",i.getDirection()),s.\u0275\u0275property("ngClass",s.\u0275\u0275pureFunction1(21,j,"ar"===i.translate.currentLang)),s.\u0275\u0275advance(4),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(5,11,"upload_document.document-history")),s.\u0275\u0275advance(2),s.\u0275\u0275classMapInterpolate1("close ACM-modal-header-",i.translate.currentLang,""),s.\u0275\u0275advance(9),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(16,13,"upload_document.Name")),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(19,15,"upload_document.Date")),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate1("",s.\u0275\u0275pipeBind1(22,17,"customer_decision.addedBy")," "),s.\u0275\u0275advance(4),s.\u0275\u0275property("ngForOf",i.historyDocuments),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(29,19,"button.cancel"))}}function z(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"div"),s.\u0275\u0275elementStart(1,"div"),s.\u0275\u0275template(2,R,3,3,"h6",1),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(3,M,39,29,"div",2),s.\u0275\u0275template(4,J,30,23,"ng-template",null,3,s.\u0275\u0275templateRefExtractor),s.\u0275\u0275elementEnd()),2&e){var n=s.\u0275\u0275nextContext(2);s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",0===n.documents.length),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",0!==n.documents.length)}}function q(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"div"),s.\u0275\u0275template(1,z,6,2,"div",0),s.\u0275\u0275elementEnd()),2&e){var n=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf","5"!=n.loan.statut&&"6"!=n.loan.statut&&0!==n.documents.length)}}var H,Y=((H=function(){function n(e,t,i,r,a,l,c,u,p,m,y,g){o(this,n),this.datePipe=e,this.gedService=t,this.devToolsServices=i,this.sharedService=r,this.reportService=a,this.formBuilder=l,this.loanSharedService=c,this.modalService=u,this.translate=p,this.settingsService=m,this.router=y,this.dbService=g,this.documentsUpload=[],this.documents=[],this.uploadedDocument=[],this.saveFilesAction=!0,this.documentListUpdated=!1,this.deletedDocument=new s.EventEmitter,this.checkRequiredDoc=new s.EventEmitter,this.saveDone=new s.EventEmitter,this.historyDocuments=[],this.status=!0,this.allDocuments=[],this.loanDTO=new d.t,this.feeRepayment=0,this.checkRequiredDocument=!1,this.settingMotifReviewEntity=new f.k,this.product=new v.J,this.isAdminFee=!1,this.issued=!1,this.settingMotifRejetsEntity=new f.k,this.settingMotifRejetsEntitys=[],this.userConnected=new h.H,this.renewelLoanCondition=!1,this.documentsToRemove=[],this.currentAmount=0,this.apportPersonnel=0,this.lengthDocuments=new s.EventEmitter,this.typeDocumentExist=new s.EventEmitter,this.statutDocumentLoan=""}return l(n,[{key:"ngOnInit",value:function(){var t=this;return(0,a.Z)(e().mark(function n(){var i,r,o,a,l,s;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t.loan=t.loanSharedService.getLoan(),i=t.loan.loanInstancesDtos.filter(function(e){return e.code===t.loan.etapeWorkflow}),t.statutDocumentLoan=i.length>0?i[0].libelle:"",t.loanSharedService.setCustomer(t.loan.customerDTO),"check-collateral"==t.category&&(t.loan.productId=t.loanDto.productId,t.loan.statutWorkflow=t.loanDto.statutWorkflow),(r=new Date).setHours(0,0,0,0),t.minIssueDatevalue=t.datePipe.transform(r.setDate(r.getDate()),"yyyy-MM-dd"),t.apportPersonnel=t.loan.personalContribution,t.currentAmount=t.loan.approvelAmount+t.apportPersonnel,t.pageSize=5,t.page=1,t.userConnected=t.loanSharedService.getUser(),t.loan.statutWorkflow===x.J.STATUT_WORKFLOW_REVIEW&&(t.loan.statutWorkflow=t.loan.etapeWorkflow),o=t.router.url,a=t.loan.loanInstancesDtos.filter(function(e){return"/acm"+e.ihmRoot===o||"/acm/"+e.ihmRoot===o})[0],t.sharedService.getPreviousStep()&&void 0!==a&&(t.loan.etapeWorkflow>23?(t.loan.statutWorkflow=a.code,t.statutDocumentLoan=a.libelle):(t.loan.etapeWorkflow=a.code,t.statutDocumentLoan=a.libelle)),l=[x.J.ADMIN_FEE,x.J.RENEWEL_LOAN_CONDITION,x.J.DEFERRED_PERIODE_TYPES],(0,S.L0)()?(t.dbService.getByKey("data","getRequiredDocumentByStep_"+t.loan.etapeWorkflow).subscribe(function(e){void 0===e?t.devToolsServices.openToast(3,"No required documents saved for offline use"):(e.data.map(function(e){var n=new g.G;n.settingDocumentType=e,n.title=e.libelle,n.mandatory=e.mandatory,n.name="-",n.date="-",n.file="",n.idfile="",n.idDocument=null,n.documentIndex=1,n.reportName=e.reportName,t.documents.push(n)}),t.checkRequired(),0!==t.documents.length&&t.typeDocumentExist.emit(!0),t.fillDocument())}),t.dbService.getByKey("data","envirement-values-by-keys-upload").subscribe(function(e){void 0===e&&t.devToolsServices.openToast(3,"No env values by keys upload fields saved for offline use")})):(t.gedService.getRequiredDocument(t.loan).subscribe(function(e){e.map(function(e){var n=new g.G;n.settingDocumentType=e,n.title=e.libelle,n.mandatory=e.mandatory,n.name="-",n.date="-",n.file="",n.idfile="",n.idDocument=null,n.documentIndex=1,n.reportName=e.reportName,t.documents.push(n),t.lengthDocuments.emit(1)}),t.checkRequired(),0!==t.documents.length&&t.typeDocumentExist.emit(!0),t.loan.assignCustomer&&t.loan.idIbLoan?t.sharedService.ibDocumentsReceived.subscribe(function(e){e&&t.fillDocument()}):t.fillDocument()}),t.settingsService.getEnvirementValueByKeys(l).subscribe(function(e){"1"===e[0].value&&"1"===t.loanSharedService.useExternalCBS&&t.gedService.getFeeRepayment(t.loan.idAccountExtern).subscribe(function(e){t.isAdminFee=!0,t.feeRepayment=e}),"1"===e[1].value&&(t.renewelLoanCondition=!0)})),t.loan=t.sharedService.getLoan(),t.createForm(),t.documentForm=t.formBuilder.group({}),s=0;s<t.documents.length;s++)t.documentForm.addControl("documentInput"+s,new c.NI(""));case 10:case"end":return e.stop()}},n)}))()}},{key:"ngOnChanges",value:function(e){this.save()}},{key:"createForm",value:function(){this.addDocumentForm=this.formBuilder.group({fileInput:[""]})}},{key:"onFileSelected",value:function(e,t,n){this.sharedService.geTypeMimes().includes(e.target.files[0].type)?e.target.files[0].size<=this.sharedService.getMaxSizeFileUpload()?e.target.files.length>0&&(this.document={name:e.target.files[0].name,settingDocumentType:t.settingDocumentType,title:""+t.title,date:this.datePipe.transform(Date.now(),"yyyy/MM/dd"),file:e.target.files[0],mandatory:t.mandatory,updatedBy:this.sharedService.user.fullName,documentIndex:t.documentIndex},this.uploadedDocument={document:this.document,category:n},this.addDocuments(this.uploadedDocument)):this.devToolsServices.openToastForMaxSizeImg(3,"alert.file_size",this.sharedService.getMaxSizeFileUpload()):this.devToolsServices.openToast(3,"alert.file_type")}},{key:"getMimeType",value:function(e){switch(e){case"pdf":return this.sharedService.typeMimes[0];case"docx":return this.sharedService.typeMimes[7];case"doc":return this.sharedService.typeMimes[1];case"xlsx":return this.sharedService.typeMimes[8];case"xls":return this.sharedService.typeMimes[2];case"pptx":return this.sharedService.typeMimes[5];case"ppt":return this.sharedService.typeMimes[6];case"jpeg":case"jpg":return this.sharedService.typeMimes[3];case"png":return this.sharedService.typeMimes[4];default:return""}}},{key:"view",value:function(e,t){var n=this;if(""!==t&&null!=t)this.gedService.getDocumentType(t).subscribe(function(e){var i=e.mimeType;n.gedService.getDocument(t).subscribe(function(e){var t=new Blob([e],{type:i}),n=window.URL.createObjectURL(t);window.open(n,"_blank")})});else{var i=URL.createObjectURL(e);window.open(i,"_blank")}}},{key:"remove",value:function(e,t,n){var i=this;this.devToolsServices.openConfirmDialogWithoutRedirect("confirmation_dialog.delete").afterClosed().subscribe(function(r){r&&(i.deletedDocument.emit({document:e,category:t}),i.documentForm.controls["documentInput"+n].reset())})}},{key:"downloadTemplate",value:function(e){var t=this,n=new u.f;n.settingDocumentTypeDTO=e.settingDocumentType,n.productId=this.loan.productId,this.gedService.findAllDocumentProduct(n).subscribe(function(e){if(null!=e[0].reportName){var n=new p.B;n.inputFileName=e[0].reportName;var i=[];i.push(t.loan),n.entryList=i,n.typeReport="AGREEMENT",t.reportService.downloadCustomReport(n).subscribe(function(e){var t=new Blob([e],{type:"application/pdf"}),n=window.URL.createObjectURL(t);window.open(n,"_blank")})}else t.devToolsServices.openToast(1,"alert.file_type")})}},{key:"onUpload",value:function(e,t,n){this.documentForm.addControl("documentInput"+this.documents.length,new c.NI(""));var i=Math.max.apply(Math,this.documents.map(function(e){return e.documentIndex}));this.sharedService.geTypeMimes().includes(e.target.files[0].type)?e.target.files[0].size<=this.sharedService.getMaxSizeFileUpload()?e.target.files.length>0&&(this.document={name:e.target.files[0].name,settingDocumentType:t.settingDocumentType,title:""+t.title,date:this.datePipe.transform(Date.now(),"yyyy/MM/dd"),file:e.target.files[0],mandatory:!1,documentIndex:i+1,updatedBy:this.sharedService.user.fullName},this.uploadedDocument={document:this.document,category:n},this.addDoc(this.uploadedDocument),this.addDocumentForm.controls.fileInput.reset()):this.devToolsServices.openToastForMaxSizeImg(3,"alert.file_size",this.sharedService.getMaxSizeFileUpload()):this.devToolsServices.openToast(3,"alert.file_type")}},{key:"openLarge",value:function(e,t){var n=this;this.modalService.open(e,{size:"lg"}).result.then(function(e){}),this.gedService.getHistoryListDocument(t.settingDocumentType.id,this.loan.loanId,t.documentIndex).subscribe(function(e){n.historyDocuments=e})}},{key:"reset",value:function(){this.historyDocuments=[],this.modalService.dismissAll()}},{key:"getDirection",value:function(){return m.y.direction}},{key:"onsave",value:function(){var e=this;void 0!==this.allDocuments&&0!==this.allDocuments.length||0!==this.documentsToRemove.length?this.devToolsServices.openConfirmDialogWithoutRedirect("confirmation_dialog.upload").afterClosed().subscribe(function(t){t&&e.save().then(function(){e.allDocuments=[],e.documentsToRemove=[]})}):this.devToolsServices.openToast(3,"alert.no_document_to_save")}},{key:"save",value:function(){var n=this;return(0,a.Z)(e().mark(function i(){var r,o,a,l,s,d,c,u,p,m,f,v,h,g,C,E,k,I,L,w,F,T,D,O,_,G;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===n.documentsToRemove.length){e.next=19;break}r=t(n.documentsToRemove),e.prev=2,r.s();case 4:if((o=r.n()).done){e.next=11;break}return a=o.value,e.next=8,n.gedService.disableDocument(a).toPromise();case 8:n.devToolsServices.openToast(0,"alert.success");case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:if(l=[],s=[],0===n.allDocuments.length){e.next=50;break}d=t(n.allDocuments);try{for(d.s();!(c=d.n()).done;)u=c.value,p=new y.p,new b.J,m=u.settingDocumentType,""!==u.file&&(p.titre=u.title,p.description=u.settingDocumentType.description,p.auteur=x.J.AUTEUR,p.loanId=n.loan.loanId,p.settingDocumentTypeDTO=m,p.idCustomer=+n.loan.customerDTO.id,p.customerName=n.loanSharedService.getCustomerName(n.loan.customerDTO),p.accountNumberExtern=n.loan.accountNumber,p.mandatory=u.mandatory,p.name=u.file.name,p.documentIndex=u.documentIndex,p.documentSize=u.file.size,p.workFlowStepId=n.loan.etapeWorkflow,s.push(p),l.push(u.file))}catch(i){d.e(i)}finally{d.f()}if(!(0,S.L0)()){e.next=41;break}return n.dbService.getByKey("data","getDocumentsByLoan_"+n.loan.loanId).subscribe(function(e){void 0===e&&n.devToolsServices.openToast(3,"No required documents for this loan saved for offline use")}),f=[],v=[],h="loanDocument_"+n.loan.loanId,e.next=29,n.dbService.getByKey("documents",h).toPromise();case 29:void 0!==(g=e.sent)&&(f=g.data.documentsLoanDTO.filter(function(e){return!s.some(function(t){return e.titre.toLowerCase()===t.titre.toLowerCase()})}),v=g.data.uploadedFiles.filter(function(e){return f.some(function(t){return t.name===e.name})})),C=t(f);try{for(C.s();!(E=C.n()).done;)k=E.value,s.push(k)}catch(i){C.e(i)}finally{C.f()}I=new FormData,L=t(v);try{for(L.s();!(w=L.n()).done;)F=w.value,I.append("uploadedFiles",F),l.push(F)}catch(i){L.e(i)}finally{L.f()}T=t(l);try{for(T.s();!(D=T.n()).done;)O=D.value,I.append("uploadedFiles",O)}catch(i){T.e(i)}finally{T.f()}I.append("documentsLoanDTO",JSON.stringify(s)),n.dbService.update("documents",{id:h,data:{uploadedFiles:l,documentsLoanDTO:s}}).subscribe(function(){n.devToolsServices.openToast(0,"alert.success")},function(e){return console.error("Error saving data:",e)}),n.dbService.update("data",{id:"getDocumentsByLoan_"+n.loan.loanId,data:s}).subscribe(function(){n.devToolsServices.openToast(0,"alert.success")},function(e){return console.error("Error saving data:",e)}),e.next=50;break;case 41:_=0;case 42:if(!(_<l.length)){e.next=50;break}return e.next=45,n.gedService.saveListDocuments([l[_]],[s[_]]).toPromise();case 45:G=e.sent,n.changeIdSavedDocument(G[0],G[0].idDocument),n.checkRequired(),n.devToolsServices.openToast(0,"alert.documents_saved");case 47:_++,e.next=42;break;case 50:n.saveDone.emit("done"),n.allDocuments=[];case 51:case"end":return e.stop()}},i,null,[[2,13,16,19]])}))()}},{key:"changeIdSavedDocument",value:function(e,t){this.documents.map(function(n){n.title===e.titre&&n.documentIndex==n.documentIndex&&(n.idDocument=t)})}},{key:"fillDocument",value:function(){var t=this;return(0,a.Z)(e().mark(function n(){var i,r,o,a,l;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],r=!1,(o=new y.p).loanId=t.loan.loanId,!(0,S.L0)()){e.next=10;break}return a="loanDocument_"+t.loan.loanId,e.next=6,t.dbService.getByKey("documents",a).toPromise();case 6:l=e.sent,t.dbService.getByKey("data","getDocumentsByLoan_"+t.loan.loanId).subscribe(function(e){void 0===e?t.devToolsServices.openToast(3,"No required documents for this loan saved for offline use"):(t.documents.map(function(n){r=!1,e.data.map(function(e){if(e.titre===n.settingDocumentType.libelle){var o=new g.G;if(o.name=e.name,o.settingDocumentType=e.settingDocumentTypeDTO,o.date=t.datePipe.transform(e.dateCreation,"yyyy/MM/dd"),o.idfile=e.idDocumentGED,o.file=e.idDocumentGED,void 0!==l){var a,s=null==l||null===(a=l.data)||void 0===a?void 0:a.documentsLoanDTO.filter(function(t){return t.titre===e.titre});if(s){var d=l.data.uploadedFiles.filter(function(e){return e.name===s[0].name});d&&(o.file=d[0])}}o.idDocument=e.idDocument,o.mandatory=e.mandatory,o.documentIndex=e.documentIndex,o.updatedBy=e.updatedBy,o.title=n.title,o.reportName=n.reportName,i.push(o),r=!0}}),!1===r&&i.push(n)}),0!==i.length&&(t.documents=i),t.checkRequired())}),e.next=11;break;case 10:t.gedService.getDocumentsByLoan(o).subscribe(function(e){t.documents.map(function(n){r=!1,e.map(function(e){if(e.titre===n.settingDocumentType.libelle){var o=new g.G;o.name=e.name,o.settingDocumentType=e.settingDocumentTypeDTO,o.date=t.datePipe.transform(e.dateCreation,"yyyy/MM/dd"),o.idfile=e.idDocumentGED,o.file=e.idDocumentGED,o.idDocument=e.idDocument,o.mandatory=e.mandatory,o.documentIndex=e.documentIndex,o.updatedBy=e.updatedBy,o.title=n.title,o.reportName=n.reportName,i.push(o),r=!0}}),!1===r&&i.push(n)}),0!==i.length&&(t.documents=i),t.checkRequired()});case 11:case"end":return e.stop()}},n)}))()}},{key:"checkRequired",value:function(){var e=0;this.documents.map(function(t){""===t.file&&!0===t.mandatory&&e++}),this.checkRequiredDocument=0===e,this.checkRequiredDoc.emit(e)}},{key:"addDocuments",value:function(e){var t=this;this.documents.map(function(n){n.title===e.document.title&&n.documentIndex===e.document.documentIndex&&(n.name=e.document.name,n.date=e.document.date,n.file=e.document.file,n.settingDocumentType=e.document.settingDocumentType,n.mandatory=e.document.mandatory,n.idfile="",n.idDocument=null,n.exist=!1,t.allDocuments.push(n),t.documentListUpdated=!0)}),this.checkRequired()}},{key:"addDoc",value:function(e){var t=new g.G;t.title=e.document.title,t.name=e.document.name,t.date=e.document.date,t.file=e.document.file,t.settingDocumentType=e.document.settingDocumentType,t.mandatory=e.document.mandatory,t.documentIndex=e.document.documentIndex,t.idfile="",t.idDocument=null,t.exist=!1,this.allDocuments.push(t),this.documents.push(t),this.documentListUpdated=!0}},{key:"toggleCollapse",value:function(){this.expanded=!this.expanded}}]),n}()).\u0275fac=function(e){return new(e||H)(s.\u0275\u0275directiveInject(C.DatePipe),s.\u0275\u0275directiveInject(E.G),s.\u0275\u0275directiveInject(k.R),s.\u0275\u0275directiveInject(I.F),s.\u0275\u0275directiveInject(L.m),s.\u0275\u0275directiveInject(c.qu),s.\u0275\u0275directiveInject(I.F),s.\u0275\u0275directiveInject(w.FF),s.\u0275\u0275directiveInject(F.sK),s.\u0275\u0275directiveInject(T.g),s.\u0275\u0275directiveInject(D.F0),s.\u0275\u0275directiveInject(O.ys))},H.\u0275cmp=s.\u0275\u0275defineComponent({type:H,selectors:[["app-upload-item"]],inputs:{documentsUpload:"documentsUpload",category:"category",statusWorkflow:"statusWorkflow",source:"source",saveFilesAction:"saveFilesAction",originSource:"originSource",expanded:"expanded",loanDto:"loanDto",repaymentFee:"repaymentFee",adminFee:"adminFee"},outputs:{deletedDocument:"deletedDocument",checkRequiredDoc:"checkRequiredDoc",saveDone:"saveDone",lengthDocuments:"lengthDocuments",typeDocumentExist:"typeDocumentExist"},features:[s.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[[4,"ngIf"],["style","color: red;","class","pt-3",4,"ngIf"],["class","main-card mb-1 card",4,"ngIf"],["content",""],[1,"pt-3",2,"color","red"],[1,"main-card","mb-1","card"],["id","headingOne","data-target","#collapseCustomerNote","aria-expanded","true","aria-controls","collapseCustomerNote",1,"card-header","d-flex","justify-content-between",3,"click"],[1,"lnr-book","text-secondary","px-2"],[3,"ngClass"],["id","collapseCustomerNote","aria-labelledby","headingOne",3,"ngClass"],[1,"table-responsive"],["class","pb-3 px-1 mt-4 ms-4",4,"ngIf"],[1,"align-middle","mb-0","table","table-hover"],[1,"ACM-document-table-column"],[1,"text-center","ACM-document-table-column"],[1,"text-center","ACM-document-table-column-button"],[4,"ngFor","ngForOf"],[1,"pb-3","px-1","mt-4","ms-4"],[1,"custom-checkbox","custom-control"],["type","checkbox","disabled","",1,"custom-control-input",3,"checked"],[1,"custom-control-label"],["class","mb-2 mx-2 btn-icon btn-icon-only btn-shadow btn-dashed btn btn-outline-focus","type","button",3,"click",4,"ngIf"],[1,"widget-content","p-0"],[1,"widget-content-wrapper"],[1,"widget-content-left","flex2"],[1,"widget-heading"],["class","text-danger",4,"ngIf"],[1,"text-center"],["type","button",1,"mb-2","mx-2","btn-icon","btn-icon-only","btn-shadow","btn-dashed","btn","btn-outline-focus",3,"click"],[1,"pe-7s-folder","btn-icon-wrapper"],[1,"form",3,"formGroup"],[1,"pe-7s-cloud-upload","btn-icon-wrapper"],["type","file",2,"display","none",3,"name","change"],["fileInput",""],[1,"text-center","px-0"],[1,"btn","btn-warning",3,"click"],[1,"pe-7s-look","btn-icon-wrapper","text-white"],["class","btn-shadow d-inline-flex align-items-center btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"pe-7s-cloud-download","btn-icon-wrapper"],[1,"text-danger"],[1,"btn-shadow","d-inline-flex","align-items-center","btn","btn-primary",3,"disabled","click"],["name","plus","_nghost-gyt-c2","","ng-reflect-name","plus"],["aria-hidden","true","ng-reflect-klass","fa fa-plus",1,"fa","fa-plus"],["type","file","name","file","formControlName","fileInput",2,"display","none",3,"change"],["fileuploadMultiple",""],[3,"dir","ngClass"],[1,"modal-header","py-2"],[1,"modal-title"],["type","button","aria-label","Close",3,"click"],["aria-hidden","true"],[1,"container","p-3"],[1,"modal-footer","py-1"],[1,"mb-2","mx-2","btn","btn-outline-danger",3,"click"]],template:function(e,t){1&e&&(s.\u0275\u0275template(0,q,2,1,"div",0),s.\u0275\u0275pipe(1,"async")),2&e&&s.\u0275\u0275property("ngIf",s.\u0275\u0275pipeBind1(1,1,t.loanSharedService.ibDocumentsReceived))},directives:[C.NgIf,C.NgClass,C.NgForOf,_.oH,c._Y,c.JL,c.sg,_.MU,c.Fj,c.JJ,c.u,G.Lv,c.F],pipes:[C.AsyncPipe,F.X$,C.DatePipe],styles:[""]}),H)},49994:function(i,r,a){a.d(r,{F:function(){return te}});var s=a(8239),d=a(37716),c=a(15694),u=a(98642),p=a(31900),m=a(3679),f=a(58762),v=a(79765),h=a(67757),y=a(16519),g=a(30165),x=a(30023),b=a(22134),S=a(64380),C=a(85627),E=a(99266),k=a(65981),I=a(25465),L=a(54798),w=a(39577),F=a(38583),T=a(57552),D=a(29790);function O(e,t){1&e&&d.\u0275\u0275element(0,"hr",15)}function _(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"option",23),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;d.\u0275\u0275property("ngValue",n),d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",n.description," ")}}function G(e,t){if(1&e){var n=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"button",24),d.\u0275\u0275listener("click",function(){d.\u0275\u0275restoreView(n);var e=d.\u0275\u0275nextContext(2).index;return d.\u0275\u0275nextContext(2).deleteGroupLoan(e)}),d.\u0275\u0275element(1,"i",25),d.\u0275\u0275elementEnd()}}function R(e,t){if(1&e){var n=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",16),d.\u0275\u0275elementStart(1,"label"),d.\u0275\u0275text(2),d.\u0275\u0275pipe(3,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(4,"div",17),d.\u0275\u0275elementStart(5,"div",18),d.\u0275\u0275elementStart(6,"select",19),d.\u0275\u0275listener("change",function(){d.\u0275\u0275restoreView(n);var e=d.\u0275\u0275nextContext().index;return d.\u0275\u0275nextContext(2).getUdfFiledListLoan(e,!1)}),d.\u0275\u0275template(7,_,2,2,"option",20),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(8,"div",21),d.\u0275\u0275template(9,G,2,0,"button",22),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()}if(2&e){var i=d.\u0275\u0275nextContext().index,r=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1("",d.\u0275\u0275pipeBind1(3,6,"udf.udf_group")," "),d.\u0275\u0275advance(4),d.\u0275\u0275propertyInterpolate1("formControlName","udfGroup",i,""),d.\u0275\u0275property("compareWith",r.comparegroup),d.\u0275\u0275attribute("disabled",r.udfGroupsSelected[i].mondatory?"":null),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngForOf",r.udfGroups),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",!r.udfGroupsSelected[i].mondatory)}}function A(e,t){1&e&&(d.\u0275\u0275elementStart(0,"span",31),d.\u0275\u0275text(1," *"),d.\u0275\u0275elementEnd())}function N(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div"),d.\u0275\u0275elementStart(1,"label"),d.\u0275\u0275text(2),d.\u0275\u0275template(3,A,2,0,"span",30),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&e){var n=d.\u0275\u0275nextContext().$implicit;d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1(" ",n.description," "),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",n.mandatory)}}function V(e,t){1&e&&(d.\u0275\u0275elementStart(0,"small",31),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275elementEnd()),2&e&&(d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1("",d.\u0275\u0275pipeBind1(2,1,"This_field_is_required"),"."))}function U(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div"),d.\u0275\u0275template(1,V,3,3,"small",30),d.\u0275\u0275elementEnd()),2&e){var n=d.\u0275\u0275nextContext(2).index,i=d.\u0275\u0275nextContext(2).index,r=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",null==r.udfLoanForm.get("udfField"+i+n).errors?null:r.udfLoanForm.get("udfField"+i+n).errors.required)}}function P(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div"),d.\u0275\u0275element(1,"input",32),d.\u0275\u0275template(2,U,2,1,"div",14),d.\u0275\u0275elementEnd()),2&e){var n=d.\u0275\u0275nextContext().index,i=d.\u0275\u0275nextContext(2).index,r=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(1),d.\u0275\u0275propertyInterpolate2("formControlName","udfField",i,"",n,""),d.\u0275\u0275property("placeholder",r.mascPlacHolder(r.udfFieldsLoan[i][n].fieldMasc)),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",r.udfLoanForm.get("udfField"+i+n).touched&&r.udfLoanForm.get("udfField"+i+n).invalid)}}function M(e,t){1&e&&(d.\u0275\u0275elementStart(0,"small",31),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275elementEnd()),2&e&&(d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1("",d.\u0275\u0275pipeBind1(2,1,"This_field_is_required"),"."))}function B(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div"),d.\u0275\u0275template(1,M,3,3,"small",30),d.\u0275\u0275elementEnd()),2&e){var n=d.\u0275\u0275nextContext(2).index,i=d.\u0275\u0275nextContext(2).index,r=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",null==r.udfLoanForm.get("udfField"+i+n).errors?null:r.udfLoanForm.get("udfField"+i+n).errors.required)}}function j(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div"),d.\u0275\u0275element(1,"input",33),d.\u0275\u0275template(2,B,2,1,"div",14),d.\u0275\u0275elementEnd()),2&e){var n=d.\u0275\u0275nextContext().index,i=d.\u0275\u0275nextContext(2).index,r=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(1),d.\u0275\u0275propertyInterpolate2("formControlName","udfField",i,"",n,""),d.\u0275\u0275property("placeholder",r.mascPlacHolder(r.udfFieldsLoan[i][n].fieldMasc)),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",r.udfLoanForm.get("udfField"+i+n).touched&&r.udfLoanForm.get("udfField"+i+n).invalid)}}function J(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"option",23),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;d.\u0275\u0275property("ngValue",n),d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",n.description," ")}}function z(e,t){1&e&&(d.\u0275\u0275elementStart(0,"small",31),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275elementEnd()),2&e&&(d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1("",d.\u0275\u0275pipeBind1(2,1,"This_field_is_required"),"."))}function q(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div"),d.\u0275\u0275template(1,z,3,3,"small",30),d.\u0275\u0275elementEnd()),2&e){var n=d.\u0275\u0275nextContext(2).index,i=d.\u0275\u0275nextContext(2).index,r=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",null==r.udfLoanForm.get("udfField"+i+n).errors?null:r.udfLoanForm.get("udfField"+i+n).errors.required)}}function H(e,t){if(1&e){var n=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div"),d.\u0275\u0275elementStart(1,"select",34),d.\u0275\u0275listener("change",function(){d.\u0275\u0275restoreView(n);var e=d.\u0275\u0275nextContext().index,t=d.\u0275\u0275nextContext(2).index;return d.\u0275\u0275nextContext(2).changeUDFField(t,e)}),d.\u0275\u0275elementStart(2,"option",35),d.\u0275\u0275text(3),d.\u0275\u0275pipe(4,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(5,J,2,2,"option",20),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(6,q,2,1,"div",14),d.\u0275\u0275elementEnd()}if(2&e){var i=d.\u0275\u0275nextContext(),r=i.index,o=i.$implicit,a=d.\u0275\u0275nextContext(2).index,l=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(1),d.\u0275\u0275property("formControlName","udfField"+a+r)("compareWith",l.compareFieldUDF),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(4,5,"udf.udf_group_code_default_select")," "),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngForOf",o.fieldListValuesDTOs),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",l.udfLoanForm.get("udfField"+a+r).touched&&l.udfLoanForm.get("udfField"+a+r).invalid)}}function Y(e,t){1&e&&(d.\u0275\u0275elementStart(0,"small",31),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275elementEnd()),2&e&&(d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1("",d.\u0275\u0275pipeBind1(2,1,"This_field_is_required"),"."))}function W(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div"),d.\u0275\u0275template(1,Y,3,3,"small",30),d.\u0275\u0275elementEnd()),2&e){var n=d.\u0275\u0275nextContext(2).index,i=d.\u0275\u0275nextContext(2).index,r=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",null==r.udfLoanForm.get("udfField"+i+n).errors?null:r.udfLoanForm.get("udfField"+i+n).errors.required)}}function K(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div"),d.\u0275\u0275element(1,"input",36),d.\u0275\u0275template(2,W,2,1,"div",14),d.\u0275\u0275elementEnd()),2&e){var n=d.\u0275\u0275nextContext().index,i=d.\u0275\u0275nextContext(2).index,r=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(1),d.\u0275\u0275propertyInterpolate2("formControlName","udfField",i,"",n,""),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",r.udfLoanForm.get("udfField"+i+n).touched&&r.udfLoanForm.get("udfField"+i+n).invalid)}}function $(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div",29),d.\u0275\u0275template(1,N,4,2,"div",14),d.\u0275\u0275template(2,P,3,4,"div",14),d.\u0275\u0275template(3,j,3,4,"div",14),d.\u0275\u0275template(4,H,7,7,"div",14),d.\u0275\u0275template(5,K,3,3,"div",14),d.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!n.delete),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!n.delete&&1===n.fieldType),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!n.delete&&2===n.fieldType),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!n.delete&&5===n.fieldType),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!n.delete&&4===n.fieldType)}}function Z(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div"),d.\u0275\u0275elementStart(1,"div",26),d.\u0275\u0275elementStart(2,"div",27),d.\u0275\u0275elementStart(3,"div",17),d.\u0275\u0275template(4,$,6,5,"div",28),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&e){var n=d.\u0275\u0275nextContext().index,i=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(4),d.\u0275\u0275property("ngForOf",i.udfFieldsLoan[n])}}function Q(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div"),d.\u0275\u0275template(1,O,1,0,"hr",12),d.\u0275\u0275template(2,R,10,8,"div",13),d.\u0275\u0275template(3,Z,5,1,"div",14),d.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=t.index,r=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",n.enabled),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",n.enabled),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",(null==r.udfFieldsLoan[i]?null:r.udfFieldsLoan[i].length)>0&&n.enabled&&r.udfFormData)}}function X(e,t){if(1&e){var n=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",1),d.\u0275\u0275elementStart(1,"div",2),d.\u0275\u0275listener("click",function(){return d.\u0275\u0275restoreView(n),d.\u0275\u0275nextContext().toggleCollapseCustomerAnalyses()}),d.\u0275\u0275elementStart(2,"div"),d.\u0275\u0275element(3,"i",3),d.\u0275\u0275text(4),d.\u0275\u0275pipe(5,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(6,"div"),d.\u0275\u0275element(7,"i",4),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(8,"div",5),d.\u0275\u0275elementStart(9,"div",6),d.\u0275\u0275elementStart(10,"div",7),d.\u0275\u0275elementStart(11,"button",8),d.\u0275\u0275listener("click",function(){return d.\u0275\u0275restoreView(n),d.\u0275\u0275nextContext().addUdfLoan()}),d.\u0275\u0275element(12,"fa-icon",9),d.\u0275\u0275text(13),d.\u0275\u0275pipe(14,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(15,"form",10),d.\u0275\u0275template(16,Q,4,3,"div",11),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()}if(2&e){var i=d.\u0275\u0275nextContext();d.\u0275\u0275advance(4),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(5,7,"loan_management.field_analysis")," "),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngClass",!0===i.expandedUdf?"lnr-chevron-up text-secondary":"lnr-chevron-down text-secondary"),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngClass",!0===i.expandedUdf?"collapse show":"collapse"),d.\u0275\u0275advance(4),d.\u0275\u0275property("icon",i.library.getIconDefinition("fas","plus")),d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(14,9,"button.add")," "),d.\u0275\u0275advance(2),d.\u0275\u0275property("formGroup",i.udfLoanForm),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngForOf",i.udfGroupsSelected)}}var ee,te=((ee=function(){function i(e,t,n,r,a,l,s){o(this,i),this.devToolsServices=e,this.activatedRoute=t,this.formBuilder=n,this.sharedService=r,this.dbService=a,this.udfService=l,this.library=s,this.expandedUdf=!0,this.udfGroups=[],this.udfGroupsSelected=[],this.maxIndexGroup=0,this.show=new v.xQ,this.udfGroupLoan=new c.t,this.udfLinkGroupLoan=[],this.udfLinks=[],this.udfFieldsLoan=[],this.indexFormUdfLoan=0,this.loan=new g.t,this.udfList=new d.EventEmitter,this.validationUdfEmitter=new d.EventEmitter,this.udfFormData=!1}return l(i,[{key:"ngOnChanges",value:function(e){var t,n,i,r,o,a;(null==e||null===(t=e.getUdfList)||void 0===t?void 0:t.currentValue)!==(null==e||null===(n=e.getUdfList)||void 0===n?void 0:n.previousValue)&&void 0!==(null==e||null===(i=e.getUdfList)||void 0===i?void 0:i.previousValue)&&this.udfList.next(this.onSubmitElement()),(null==e||null===(r=e.saveUdf)||void 0===r?void 0:r.currentValue)!==(null==e||null===(o=e.saveUdf)||void 0===o?void 0:o.previousValue)&&void 0!==(null==e||null===(a=e.saveUdf)||void 0===a?void 0:a.previousValue)&&this.saveUdfLinks()}},{key:"ngOnInit",value:function(){var t=this;return(0,s.Z)(e().mark(function n(){var i,r;return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.activatedRoute.queryParams.subscribe(function(e){t.mode=e.source});case 2:return t.isCollection=t.category===f.J.COLLECTION_CATEGORY,t.udfLoanForm=null,t.udfGroupsSelected=[],t.udfGroups=[],t.maxIndexGroup=0,t.indexFormUdfLoan=0,t.udfLoanForm=t.formBuilder.group({}),t.maxIndexGroup=0,t.loan=t.sharedService.getLoan(),n.next=13,t.getUdfAllGroupLoan();case 13:if(n.t0="add"!=t.source,!n.t0){n.next=17;break}return n.next=17,t.getUdfLoanInformation();case 17:i=e().mark(function n(i){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==t.udfGroups[i].mondatory){e.next=12;break}if(void 0!==t.udfGroupsSelected.find(function(e){return e.id===t.udfGroups[i].id})){e.next=10;break}return t.udfGroupsSelected.push(t.udfGroups[i]),t.udfLoanForm.addControl("udfGroup"+t.indexFormUdfLoan,new m.NI("",m.kI.required)),t.udfLoanForm.controls["udfGroup"+t.indexFormUdfLoan].setValue(t.udfGroups[i]),e.next=7,t.getUdfFiledListLoan(t.indexFormUdfLoan,!0);case 7:t.indexFormUdfLoan++,e.next=12;break;case 10:r=t.devToolsServices.findFormControlWithValue(t.udfGroups[i].code,t.udfLoanForm),t.udfGroupsSelected[r].mondatory=!0;case 12:case"end":return e.stop()}},n)}),r=0;case 19:if(!(r<t.udfGroups.length)){n.next=24;break}return n.delegateYield(i(r),"t1",21);case 21:r++,n.next=19;break;case 24:case"end":return n.stop()}},n)}))()}},{key:"getUdfLoanInformation",value:function(){var t=this;return(0,s.Z)(e().mark(function i(){var r,o,a,l,s,d,p,v,h;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.udfFieldsLoan[0]=[],(a=new u.l).category=t.category,t.category===f.J.CUSTOMER_CATEGORY_CUSTOMER&&(a.elementId=null===(r=t.sharedService.getCustomer())||void 0===r?void 0:r.id),t.category===f.J.COLLATERAL_CATEGORY&&(a.elementId=null===(o=t.sharedService.getCollateral())||void 0===o?void 0:o.idAcmCollateral),t.category===f.J.LOAN_CATEGORY?a.elementId=t.loan.loanId:t.category===f.J.COLLECTION_CATEGORY?a.elementId=t.sharedService.getCollection().id:t.category===f.J.SUPPLIER_CATEGORY?a.elementId=t.sharedService.getSupplier().id:t.category===f.J.PARTY_CATEGORY?a.elementId=t.sharedService.getThirdParty().id:t.category===f.J.ITEM_CATEGORY?a.elementId=t.sharedService.getItem().id:t.category===f.J.PROSPECT_CATEGORY&&(a.category=f.J.CUSTOMER_CATEGORY_CUSTOMER,a.elementId=t.sharedService.getCustomer().id),a.udfGroupIds=t.udfGroups.map(function(e){return e.id}),!(0,b.L0)()&&"preview"!==t.mode){e.next=8;break}return s=t.isCollection?"getUdfLinkGroupLoanByCollectionId_"+t.sharedService.getCollection().id:t.category===f.J.LOAN_CATEGORY?"getUdfLinkGroupLoanByLoanId_"+t.loan.loanId:"getUdfLinkGroupLoanByCollateralId_"+(null===(l=t.sharedService.getCollateral())||void 0===l?void 0:l.idAcmCollateral),e.next=6,t.dbService.getByKey("data",s).toPromise().then(function(e){var i,r;if(void 0===e||0==(null==e||null===(i=e.data)||void 0===i?void 0:i.length))if(null!==(r=t.sharedService.getCollateral())&&void 0!==r&&r.userDefinedFieldsLinksDTOs){var o,a,l=[];null===(o=t.sharedService.getCollateral())||void 0===o||o.userDefinedFieldsLinksDTOs.forEach(function(e){l.includes(e.userDefinedFieldsDTO.userDefinedFieldGroupDTO.id)||l.push(e.userDefinedFieldsDTO.userDefinedFieldGroupDTO.id)});var s=n(t.udfGroups);s=s.filter(function(e){return l.some(function(t){return t===e.id})?e:null});var d=(0,b.Zu)(null===(a=t.sharedService.getCollateral())||void 0===a?void 0:a.userDefinedFieldsLinksDTOs,s,null);t.udfLinkGroupLoan=d}else t.devToolsServices.openToast(3,"No Udf Link Group Loan saved for offline use");else t.udfLinkGroupLoan=e.data});case 6:e.next=10;break;case 8:return e.next=10,t.udfService.getUdfLinkGroupby(a).toPromise().then(function(e){return t.udfLinkGroupLoan=e});case 10:if(t.udfLinkGroupLoan.forEach(function(e){e.udfGroupeFieldsModels.forEach(function(e){e.indexGroup>=t.maxIndexGroup&&(t.maxIndexGroup=e.indexGroup+1)})}),!(0,b.L0)()&&"preview"!==t.mode){e.next=16;break}return p=t.isCollection?"getMaxIndexGroupByCollectionId_"+t.sharedService.getCollection().id:t.category===f.J.LOAN_CATEGORY?"getMaxIndexGroupByLoanId_"+t.loan.loanId:"getMaxIndexGroupByCollateralId_"+(null===(d=t.sharedService.getCollateral())||void 0===d?void 0:d.idAcmCollateral),e.next=14,t.dbService.getByKey("data",p).toPromise().then(function(e){e&&(t.maxIndexGroup=e.data+1)});case 14:e.next=18;break;case 16:return e.next=18,t.udfService.findMaxIndexGroup(a.elementId,a.category).toPromise().then(function(e){t.maxIndexGroup=e+1});case 18:v=0,t.udfLinkGroupLoan.forEach(function(e){if(void 0!==t.udfGroups.find(function(t){return t.id===e.userDefinedFieldGroupID})){var n=new c.t;n.id=e.userDefinedFieldGroupID,n.enabled=!0,n.indexGroup=v,n.code=e.userDefinedFieldGroupName,t.udfLoanForm.addControl("udfGroup"+t.indexFormUdfLoan,new m.NI(n)),t.udfGroupsSelected.push(n),t.indexFormUdfLoan++,v++}}),h=0;case 21:if(!(h<t.udfGroupsSelected.length)){e.next=27;break}return e.next=24,t.getUdfGroupLoan(h);case 24:h++,e.next=21;break;case 27:case"end":return e.stop()}},i)}))()}},{key:"getUdfAllGroupLoan",value:function(){var t=this;return(0,s.Z)(e().mark(function n(){var i,r,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=new x.d,"workflow"!==t.source){e.next=13;break}if(!(0,b.L0)()&&"preview"!==t.mode){e.next=8;break}return r=t.isCollection?"getUdfGroupsByIdCollectionStep_"+t.sharedService.getCollection().idAcmCollectionStep:"getUdfGroupsByLoanWorkflowStep_"+t.sharedService.currentStatus,e.next=6,t.dbService.getByKey("data",r).toPromise().then(function(e){void 0===e?t.devToolsServices.openToast(3,"No Udf Groups saved for offline use"):t.udfGroups=e.data});case 6:e.next=11;break;case 8:return t.category===f.J.LOAN_CATEGORY?i.idWorkflowStep=t.sharedService.currentStatus:t.category===f.J.COLLECTION_CATEGORY?i.idCollectionStep=t.sharedService.getCollection().idAcmCollectionStep:t.category===f.J.ITEM_CATEGORY&&(i.idWorkflowStep=t.sharedService.getItem().actualStep),e.next=11,t.udfService.findUdfGroupsByStepId(i).toPromise().then(function(e){t.udfGroups=e});case 11:e.next=23;break;case 13:if("add"!==t.source&&"edit"!==t.source){e.next=23;break}if(!(0,b.L0)()){e.next=19;break}return e.next=17,t.dbService.getByKey("data","getUdfGroup_"+t.category).toPromise().then(function(e){void 0!==e&&(t.udfGroups=e.data)});case 17:e.next=23;break;case 19:return(o=new c.t).category=t.category,e.next=23,t.udfService.getUdfGroup(o).toPromise().then(function(e){t.udfGroups=e});case 23:case"end":return e.stop()}},n)}))()}},{key:"getUdfGroupLoan",value:function(t){var n=this;return(0,s.Z)(e().mark(function i(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getUdfFiledListLoan(t,!0);case 2:case"end":return e.stop()}},i)}))()}},{key:"getUdfFiledListLoan",value:function(n,i){var r=this;return(0,s.Z)(e().mark(function o(){var a,l,s,d,u,v,y,g,S,C,E,k,I,L,w,F,T;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.udfFormData=!1,!i)for(a=0;a<r.udfFieldsLoan[n].length;a++)r.udfLoanForm.controls["udfField"+n+a].reset(),r.udfLoanForm.controls["udfField"+n+a].clearValidators();if(r.udfFieldsLoan[n]=[],l=i?r.udfGroupsSelected[n].id:r.udfLoanForm.controls["udfGroup"+n].value.id,"workflow"!==r.source){e.next=16;break}if(!(0,b.L0)()&&"preview"!==r.mode){e.next=8;break}return s=r.isCollection?"getUdfFieldsByIdCollectionStep_"+r.sharedService.getCollection().idAcmCollectionStep:"getUdfFieldsByIdLoanStep_"+r.sharedService.currentStatus,e.next=6,r.dbService.getByKey("data",s).toPromise().then(function(e){void 0===e?r.devToolsServices.openToast(3,"No Udf Fields Loan saved for offline use"):r.udfFieldsLoan[n]=e.data});case 6:e.next=14;break;case 8:return d=new x.d,r.category===f.J.LOAN_CATEGORY?d.idWorkflowStep=r.sharedService.currentStatus:r.category===f.J.COLLECTION_CATEGORY?d.idCollectionStep=r.sharedService.getCollection().idAcmCollectionStep:r.category===f.J.ITEM_CATEGORY&&(d.idWorkflowStep=r.sharedService.getItem().actualStep),e.next=12,r.udfService.findUdfFieldsByStepId(d,l).toPromise();case 12:u=e.sent,r.udfFieldsLoan[n]=u;case 14:e.next=28;break;case 16:if("add"!==r.source&&"edit"!==r.source){e.next=28;break}if(!(0,b.L0)()){e.next=22;break}return e.next=20,r.dbService.getByKey("data","udf-fields-group-id-"+l).toPromise().then(function(e){void 0!==e&&(r.udfFieldsLoan[n]=e.data)});case 20:e.next=28;break;case 22:return(v=new p.x).userDefinedFieldGroupDTO=new c.t,v.userDefinedFieldGroupDTO.id=l,e.next=26,r.udfService.getUdfField(v).toPromise();case 26:y=e.sent,r.udfFieldsLoan[n]=y;case 28:if(r.udfFieldsLoan[n].filter(function(e){return 0!==e.idUDFParentField}).map(function(e){return e.fieldListValuesDTOs=[]}),"add"!==r.source){e.next=32;break}for(g=0;g<r.udfFieldsLoan[n].length;g++)!0===r.udfFieldsLoan[n][g].mandatory?r.udfLoanForm.addControl("udfField"+n+g,new m.NI("",[m.kI.required,m.kI.pattern(r.udfFieldsLoan[n][g].fieldMasc)])):!1===r.udfFieldsLoan[n][g].mandatory&&r.udfLoanForm.addControl("udfField"+n+g,new m.NI("",m.kI.pattern(r.udfFieldsLoan[n][g].fieldMasc)));e.next=84;break;case 32:if("edit"!==r.source&&"workflow"!==r.source){e.next=84;break}r.udfGroupLoan=r.udfGroupsSelected[n],(C=new h.O).udfGroupeFieldsModels=[],i?null!=r.udfGroupLoan.indexGroup&&(C=r.udfLinkGroupLoan[r.udfGroupLoan.indexGroup]):r.udfLinkGroupLoan.forEach(function(e){e.userDefinedFieldGroupID===r.udfGroupLoan.id&&(C=e)}),E=0;case 37:if(!(E<r.udfFieldsLoan[n].length)){e.next=84;break}S=!1,k=t(C.udfGroupeFieldsModels),e.prev=40,k.s();case 42:if((I=k.n()).done){e.next=72;break}if(L=I.value,r.surveysId=L.surveysId,L.udfFieldID!==r.udfFieldsLoan[n][E].id){e.next=70;break}if(r.udfFieldsLoan[n][E].idAbacusUDFLink=L.idAbacusUDFLink,r.udfFieldsLoan[n][E].surveysId=L.surveysId,r.udfFieldsLoan[n][E].idUDFLink=L.id,r.udfFieldsLoan[n][E].delete=!1,5!==r.udfFieldsLoan[n][E].fieldType){e.next=69;break}w=t(r.udfFieldsLoan[n][E].fieldListValuesDTOs),e.prev=47,w.s();case 49:if((F=w.n()).done){e.next=59;break}if(T=F.value,e.t0=T.description.toUpperCase()===L.value.toUpperCase(),!e.t0){e.next=57;break}return r.udfLoanForm.addControl("udfField"+n+E,!0===r.udfFieldsLoan[n][E].mandatory?new m.NI(T,m.kI.required):new m.NI(T)),S=!0,e.next=57,r.changeUDFField(n,E);case 57:e.next=49;break;case 59:e.next=64;break;case 61:e.prev=61,e.t1=e.catch(47),w.e(e.t1);case 64:return e.prev=64,w.f(),e.finish(64);case 67:e.next=70;break;case 69:r.udfLoanForm.addControl("udfField"+n+E,new m.NI(L.value,!0===r.udfFieldsLoan[n][E].mandatory?[m.kI.required,m.kI.pattern(r.udfFieldsLoan[n][E].fieldMasc)]:m.kI.pattern(r.udfFieldsLoan[n][E].fieldMasc))),S=!0;case 70:e.next=42;break;case 72:e.next=77;break;case 74:e.prev=74,e.t2=e.catch(40),k.e(e.t2);case 77:return e.prev=77,k.f(),e.finish(77);case 80:S||(i&&(r.udfFieldsLoan[n][E].surveysId=r.surveysId),r.udfLoanForm.addControl("udfField"+n+E,new m.NI("",!0===r.udfFieldsLoan[n][E].mandatory?[m.kI.required,m.kI.pattern(r.udfFieldsLoan[n][E].fieldMasc)]:m.kI.pattern(r.udfFieldsLoan[n][E].fieldMasc))));case 81:E++,e.next=37;break;case 84:r.udfFormData=!0;case 85:case"end":return e.stop()}},o,null,[[40,74,77,80],[47,61,64,67]])}))()}},{key:"addUdfLoan",value:function(){var e=new c.t;e.enabled=!0,e.code=null,this.udfGroupsSelected.push(e),this.udfFieldsLoan[this.udfGroupsSelected.length-1]=[],this.udfLoanForm.addControl("udfGroup"+this.indexFormUdfLoan,new m.NI("")),this.indexFormUdfLoan++}},{key:"toggleCollapseCustomerAnalyses",value:function(){this.expandedUdf=!this.expandedUdf}},{key:"saveUdfLinks",value:function(){var t=this;return(0,s.Z)(e().mark(function n(){var i;return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.onSubmitElement(),!t.udfLoanForm.invalid){n.next=2;break}return n.abrupt("return",(t.validationUdfEmitter.emit(!0),void t.devToolsServices.InvalidControl()));case 2:if(t.validationUdfEmitter.emit(!1),!(t.udfLinks.length>0)){n.next=14;break}if(!(0,b.L0)()){n.next=13;break}if(n.t0=t.category===f.J.COLLECTION_CATEGORY,!n.t0){n.next=8;break}return n.next=8,t.dbService.update("udfLinks",{elementId:t.udfLinks[0].elementId,udfLink:t.udfLinks}).toPromise().then(function(){t.devToolsServices.openToast(0,"alert.success")});case 8:t.udfGroups.forEach(function(){var n=(0,s.Z)(e().mark(function n(i){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],t.udfLinks.filter(function(e){return e.userDefinedFieldsDTO.userDefinedFieldGroupDTO.id===i.id}).forEach(function(e){var t=new S.m;if(t.value=e.fieldValue,t.indexGroup=e.indexGroup,t.fieldName=e.userDefinedFieldsDTO.name,t.udfFieldID=e.userDefinedFieldsDTO.id,t.mandatory=e.userDefinedFieldsDTO.mandatory,t.mask=e.userDefinedFieldsDTO.fieldMasc,5===e.userDefinedFieldsDTO.fieldType){var n=e.userDefinedFieldsDTO.fieldListValuesDTOs.filter(function(t){return t.idUDFListValue.toString()===e.fieldValue.toString()});n.length>0&&(t.value=n[0].name)}r.push(t)}),t.udfLinkGroupLoan.filter(function(e){return e.userDefinedFieldGroupID===i.id})[0].udfGroupeFieldsModels=r;case 2:case"end":return e.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()),i=t.getKey(),t.dbService.update("data",{id:i,data:t.udfLinkGroupLoan}).toPromise().then(function(){t.devToolsServices.openToast(0,"alert.success")},function(e){return console.error("Error saving data:",e)}),n.next=14;break;case 13:t.udfService.updateUdfLinksByElementId(t.udfLinks,t.udfLinks[0].elementId).subscribe(function(){t.devToolsServices.backTop(),t.devToolsServices.openToast(0,"alert.success"),t.ngOnInit()});case 14:case"end":return n.stop()}},n)}))()}},{key:"onSubmitElement",value:function(){var e=this;if(this.devToolsServices.makeFormAsTouched(this.udfLoanForm),this.udfLoanForm.invalid?(this.validationUdfEmitter.emit(!0),this.devToolsServices.InvalidControl()):this.validationUdfEmitter.emit(!1),this.udfLinks=[],this.udfGroupsSelected.length>=0)for(var t=function(t){for(var n=function(n){var i,r,o=new u.l;e.category===f.J.LOAN_CATEGORY?o.elementId=e.loan.loanId:e.category===f.J.COLLECTION_CATEGORY?o.elementId=e.sharedService.getCollection().id:e.category===f.J.ITEM_CATEGORY&&(o.elementId=e.sharedService.getItem().id),o.category=e.category!==f.J.PROSPECT_CATEGORY?e.category:f.J.CUSTOMER_CATEGORY_CUSTOMER,o.idAbacusUDFLink=e.udfFieldsLoan[t][n].idAbacusUDFLink,o.surveysId=e.udfFieldsLoan[t][n].surveysId,o.id=e.udfFieldsLoan[t][n].idUDFLink,e.udfFieldsLoan[t][n].delete?void 0!==o.idAbacusUDFLink&&void 0!==o.surveysId&&(o.fieldValue=""):5===e.udfFieldsLoan[t][n].fieldType?(o.fieldValue=null===(i=e.udfLoanForm.controls["udfField"+t+n].value)||void 0===i?void 0:i.idUDFListValue,o.udfListValueId=null===(r=e.udfLoanForm.controls["udfField"+t+n].value)||void 0===r?void 0:r.idUDFListLink):o.fieldValue=e.udfLoanForm.controls["udfField"+t+n].value,8===e.udfFieldsLoan[t][n].userDefinedFieldGroupDTO.id&&e.udfFieldsLoan[t][n].fieldListValuesDTOs.forEach(function(i){i.idUDFListValue.toString(),e.udfLoanForm.controls["udfField"+t+n].value.toString()}),o.userDefinedFieldsDTO=e.udfFieldsLoan[t][n],o.indexGroup=e.maxIndexGroup,e.udfLinks.push(o)},i=0;i<e.udfFieldsLoan[t].length;i++)n(i);e.maxIndexGroup++},n=0;n<this.udfGroupsSelected.length;n++)t(n);return this.udfLinks}},{key:"getKey",value:function(){var e;switch(this.category){case f.J.COLLECTION_CATEGORY:return"getUdfLinkGroupLoanByCollectionId_"+this.sharedService.getCollection().id;case f.J.COLLATERAL_CATEGORY:return"getUdfLinkGroupLoanByCollateralId_"+(null===(e=this.sharedService.getCollateral())||void 0===e?void 0:e.idAcmCollateral)}}},{key:"mascPlacHolder",value:function(e){if(""!==e){e=new RegExp(e);var t=0;e.source.match(/\d+/g).map(Number).forEach(function(e){t=e});for(var n="",i=1;i<=t;i++)n+="x";return n}return""}},{key:"comparegroup",value:function(e,t){if(void 0!==e&&void 0!==t)return e.id===t.id}},{key:"deleteGroupLoan",value:function(e){this.udfGroupsSelected[e].enabled=!1,this.udfFieldsLoan[e].forEach(function(e){e.delete=!0})}},{key:"changeUDFField",value:function(t,n){var i=this;return(0,s.Z)(e().mark(function r(){var o,a,l;return e().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:o=i.udfFieldsLoan[t][n],a=e().mark(function r(a){var l;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.udfFieldsLoan[t][a].idUDFParentField!==o.id){e.next=10;break}if(!(0,b.L0)()){e.next=6;break}return e.next=4,i.dbService.getByKey("data","udf-fields-group-id-"+i.udfFieldsLoan[t][a].userDefinedFieldGroupDTO.id).toPromise().then(function(e){if(void 0!==e){var r,o=null===(r=e.data)||void 0===r?void 0:r.filter(function(e){return e.id===i.udfFieldsLoan[t][a].id});if(o.length>0){var l=o[0].fieldListValuesDTOs;l=l.filter(function(e){return e.parentUDFListValue===i.udfLoanForm.controls["udfField"+t+n].value.id}),i.udfFieldsLoan[t][a].fieldListValuesDTOs=l}}});case 4:e.next=10;break;case 6:return(l=new y.X).parentUDFListValue=i.udfLoanForm.controls["udfField"+t+n].value.id,e.next=10,i.udfService.getUdfListValue(l).toPromise().then(function(e){i.udfFieldsLoan[t][a].fieldListValuesDTOs=e});case 10:case"end":return e.stop()}},r)}),l=0;case 3:if(!(l<i.udfFieldsLoan[t].length)){r.next=8;break}return r.delegateYield(a(l),"t0",5);case 5:l++,r.next=3;break;case 8:case"end":return r.stop()}},r)}))()}},{key:"compareFieldUDF",value:function(e,t){return void 0!==t&&void 0!==e&&null!==t&&null!==e&&void 0!==t.idUDFListValue&&void 0!==e.idUDFListValue&&null!==t.idUDFListValue&&null!==e.idUDFListValue&&e.idUDFListValue===t.idUDFListValue}}]),i}()).\u0275fac=function(e){return new(e||ee)(d.\u0275\u0275directiveInject(C.R),d.\u0275\u0275directiveInject(E.gz),d.\u0275\u0275directiveInject(m.qu),d.\u0275\u0275directiveInject(k.F),d.\u0275\u0275directiveInject(I.ys),d.\u0275\u0275directiveInject(L.H),d.\u0275\u0275directiveInject(w.by))},ee.\u0275cmp=d.\u0275\u0275defineComponent({type:ee,selectors:[["app-udf-step-workflow"]],inputs:{expanded:"expanded",category:"category",source:"source",getUdfList:"getUdfList",saveUdf:"saveUdf"},outputs:{udfList:"udfList",validationUdfEmitter:"validationUdfEmitter"},features:[d.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["class","card-hover-shadow-2x mb-1 card",4,"ngIf"],[1,"card-hover-shadow-2x","mb-1","card"],["data-target","#collapseLoanAnalyses","aria-expanded","true","aria-controls","collapseCustomerAccount",1,"card-header","d-flex","justify-content-between",3,"click"],[1,"lnr-magnifier","text-secondary","pr-2"],[3,"ngClass"],["aria-labelledby","headingOne","data-parent","#accordionExample",3,"ngClass"],[1,"card-body"],[1,"col-xl-12","d-flex","justify-content-end","pt-3"],["type","button",1,"btn-shadow","d-inline-flex","align-items-center","btn","btn-primary",3,"click"],[1,"mx-2",3,"icon"],[3,"formGroup"],[4,"ngFor","ngForOf"],["class","solid",4,"ngIf"],["class","position-relative form-group",4,"ngIf"],[4,"ngIf"],[1,"solid"],[1,"position-relative","form-group"],[1,"row"],[1,"col-xl-6"],["name","udfGroup",1,"form-control",3,"formControlName","compareWith","change"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-xl-6","px-3"],["class","btn btn-danger",3,"click",4,"ngIf"],[3,"ngValue"],[1,"btn","btn-danger",3,"click"],[1,"pe-7s-trash","btn-icon-wrapper","text-white"],[1,"table-responsive","mt-2"],[1,"container"],["class","col-xl-4 col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-xl-4","col-md-4","mb-3"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["type","text","name","udfField",1,"form-control",3,"placeholder","formControlName"],["type","number","name","udfField",1,"form-control",3,"placeholder","formControlName"],["name","udfField",1,"form-control",3,"formControlName","compareWith","change"],["selected","","value",""],["type","date","name","udfField",1,"form-control",3,"formControlName"]],template:function(e,t){1&e&&d.\u0275\u0275template(0,X,17,11,"div",0),2&e&&d.\u0275\u0275property("ngIf",t.udfGroups.length>0)},directives:[F.NgIf,F.NgClass,w.BN,m._Y,m.JL,m.sg,T.MU,F.NgForOf,T.HK,m.EJ,T.oH,m.JJ,m.u,m.YN,m.Kr,m.Fj,m.wV],pipes:[D.X$],styles:[""]}),ee)},99738:function(e,t,n){n.d(t,{r:function(){return d}});var i,r=n(6452),a=n(37716),s=n(91841),d=((i=function(){function e(t){o(this,e),this.httpClient=t}return l(e,[{key:"getProducts",value:function(e){return this.httpClient.post(r.f.PRODUCT_DETAILS,e)}},{key:"findBranche",value:function(){return this.httpClient.get(r.f.BRANCHE_FIND)}},{key:"findAllPortfolio",value:function(e){return this.httpClient.post(r.f.FIND_PORTFOLIO,e)}},{key:"loadFilterStatusWorkflow",value:function(){return this.httpClient.get(r.f.LOAD_STATUS_WORKFLOW)}},{key:"reportingLoanApplication",value:function(e){return this.httpClient.post(r.f.REPORTING_LOAN_APPLICATION,e,{responseType:"blob"})}},{key:"reportingExcelCollectionFollowupReport",value:function(e){return this.httpClient.post(r.f.REPORTING_COLLECTION_FOLLOW_UP,e,{responseType:"blob"})}},{key:"getLoanSourceOfFunds",value:function(){return this.httpClient.get(r.f.LOAD_SOURCE_OF_FUNDS)}},{key:"loadFilterStatusABACUS",value:function(){return this.httpClient.get(r.f.LOAD_STATUS_ABACUS)}},{key:"reportingAml",value:function(e){return this.httpClient.post(r.f.REPORTING_AML,e,{responseType:"blob"})}},{key:"createFilter",value:function(e){return this.httpClient.post(r.f.CREATE_FILTRE,e)}},{key:"findListFilter",value:function(e){return this.httpClient.post(r.f.FIND_FILTRE,e)}},{key:"reportingExcelMezaCard",value:function(e){return this.httpClient.post(r.f.REPORTING_MEZA_CARD,e,{responseType:"blob"})}},{key:"saveReportingSetting",value:function(e){return this.httpClient.post(r.f.SAVE_REPORTING_SETTING,e)}},{key:"findReportingSetting",value:function(e){return this.httpClient.post(r.f.FIND_REPORTING_SETTING,e)}},{key:"generateExcelReport",value:function(e){return this.httpClient.post(r.f.GENERATE_EXCEL_REPORT,e,{responseType:"blob"})}},{key:"generatePdfReport",value:function(e){return this.httpClient.post(r.f.GENERATE_PDF_REPORT,e,{responseType:"blob"})}},{key:"findReportData",value:function(e){return this.httpClient.post(r.f.FIND_REPORT_DATA,e)}}]),e}()).\u0275fac=function(e){return new(e||i)(a.\u0275\u0275inject(s.eN))},i.\u0275prov=a.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},17420:function(e,t,n){n.d(t,{g:function(){return d}});var i,r=n(6452),a=n(37716),s=n(91841),d=((i=function(){function e(t){o(this,e),this.httpClient=t}return l(e,[{key:"saveGlAccount",value:function(e){return this.httpClient.post(r.f.SAVE_GL_ACCOUNT,e)}},{key:"findGlAccount",value:function(e){return this.httpClient.post(r.f.FIND_GL_ACCOUNT,e)}},{key:"findPaginationGlAccount",value:function(e){return this.httpClient.post(r.f.FIND_PAGINATION_GL_ACCOUNT,e)}},{key:"findPaginationJournal",value:function(e){return this.httpClient.post(r.f.FIND_PAGINATION_ACM_JOURNAL,e)}},{key:"generateJournalExcelReport",value:function(e){return this.httpClient.post(r.f.GENERATE_ACM_JOURNAL_EXCEL_REPORT,e,{responseType:"blob"})}}]),e}()).\u0275fac=function(e){return new(e||i)(a.\u0275\u0275inject(s.eN))},i.\u0275prov=a.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},24088:function(n,i,r){r.d(i,{u:function(){return A}});var a=r(8239),s=r(37716),d=r(43073),c=r(55041),u=r(30165),p=r(58762),m=r(72114),f=r(28970),v=r(38583),h=r(88075),y=r(85627),g=r(65981),x=r(37300),b=r(3679),S=r(61181),C=r(29790),E=r(23990),k=r(70946);function I(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",23),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(n);var e=s.\u0275\u0275nextContext().$implicit;return s.\u0275\u0275nextContext(2).downloadTemplate(e)}),s.\u0275\u0275element(1,"i",27),s.\u0275\u0275elementEnd()}}function L(e,t){1&e&&(s.\u0275\u0275elementStart(0,"span",28),s.\u0275\u0275text(1,"*"),s.\u0275\u0275elementEnd())}function w(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"p"),s.\u0275\u0275text(1),s.\u0275\u0275pipe(2,"date"),s.\u0275\u0275elementEnd()),2&e){var n=s.\u0275\u0275nextContext().$implicit;s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",s.\u0275\u0275pipeBind2(2,1,n.dateDebut,"dd/MM/yyyy")," ")}}function F(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"tr"),s.\u0275\u0275elementStart(1,"td"),s.\u0275\u0275template(2,I,2,0,"button",14),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"td"),s.\u0275\u0275text(4),s.\u0275\u0275template(5,L,2,0,"span",15),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(6,"td"),s.\u0275\u0275text(7),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(8,"td"),s.\u0275\u0275template(9,w,3,4,"p",6),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(10,"td",16),s.\u0275\u0275elementStart(11,"button",17),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275reference(15).click()}),s.\u0275\u0275elementStart(12,"fa",18),s.\u0275\u0275element(13,"i",19),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(14,"input",20,21),s.\u0275\u0275listener("change",function(e){var t=s.\u0275\u0275restoreView(n).index;return s.\u0275\u0275nextContext(2).onUpload(e,t)}),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(16,"td",22),s.\u0275\u0275elementStart(17,"button",23),s.\u0275\u0275listener("click",function(){var e=s.\u0275\u0275restoreView(n).$implicit,t=s.\u0275\u0275nextContext(2),i=s.\u0275\u0275reference(13);return t.openLarge(i,e)}),s.\u0275\u0275element(18,"i",24),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(19,"td",16),s.\u0275\u0275elementStart(20,"button",25),s.\u0275\u0275listener("click",function(){var e=s.\u0275\u0275restoreView(n).$implicit;return s.\u0275\u0275nextContext(2).view(e.file,e.idDocumentGED)}),s.\u0275\u0275element(21,"i",26),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",i.reportName&&""!==i.reportName),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(i.code),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",i.mandatory),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(i.name),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",i.idDocumentGED),s.\u0275\u0275advance(11),s.\u0275\u0275property("disabled",!i.idDocumentGED)}}function T(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"div"),s.\u0275\u0275elementStart(1,"div"),s.\u0275\u0275elementStart(2,"div",8),s.\u0275\u0275elementStart(3,"div",9),s.\u0275\u0275elementStart(4,"table",10),s.\u0275\u0275elementStart(5,"thead"),s.\u0275\u0275elementStart(6,"tr"),s.\u0275\u0275elementStart(7,"th",11),s.\u0275\u0275text(8),s.\u0275\u0275pipe(9,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(10,"th"),s.\u0275\u0275text(11),s.\u0275\u0275pipe(12,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(13,"th"),s.\u0275\u0275text(14),s.\u0275\u0275pipe(15,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(16,"th"),s.\u0275\u0275text(17),s.\u0275\u0275pipe(18,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(19,"th",12),s.\u0275\u0275text(20),s.\u0275\u0275pipe(21,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(22,"th",12),s.\u0275\u0275text(23),s.\u0275\u0275pipe(24,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(25,"th",12),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(26,"tbody"),s.\u0275\u0275template(27,F,22,6,"tr",13),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e){var n=s.\u0275\u0275nextContext();s.\u0275\u0275advance(8),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(9,7,"upload_document.download_template")),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(12,9,"item.document.type-name")),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(15,11,"document")),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(18,13,"date")),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(21,15,"upload_document.Upload_new_version")),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate1("",s.\u0275\u0275pipeBind1(24,17,"upload_document.version-history")," "),s.\u0275\u0275advance(4),s.\u0275\u0275property("ngForOf",n.settingDocumentTypes)}}function D(e,t){1&e&&(s.\u0275\u0275elementStart(0,"div"),s.\u0275\u0275elementStart(1,"div",29),s.\u0275\u0275elementStart(2,"h6",30),s.\u0275\u0275text(3),s.\u0275\u0275pipe(4,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e&&(s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(4,1,"collections.collection_document.missing_setting")))}function O(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"tr"),s.\u0275\u0275elementStart(1,"td"),s.\u0275\u0275elementStart(2,"div",22),s.\u0275\u0275text(3),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(4,"td"),s.\u0275\u0275elementStart(5,"div",22),s.\u0275\u0275text(6),s.\u0275\u0275pipe(7,"date"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(8,"td"),s.\u0275\u0275elementStart(9,"div",22),s.\u0275\u0275text(10),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(11,"td",16),s.\u0275\u0275elementStart(12,"button",40),s.\u0275\u0275listener("click",function(){var e=s.\u0275\u0275restoreView(n).$implicit;return s.\u0275\u0275nextContext(2).view(e.file,e.idDocumentGED)}),s.\u0275\u0275element(13,"i",26),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate1(" ",i.name," "),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate1(" ",s.\u0275\u0275pipeBind2(7,3,i.dateCreation,"dd/MM/yyyy hh:mm a")," "),s.\u0275\u0275advance(4),s.\u0275\u0275textInterpolate1(" ",i.insertBy," ")}}var _=function(e){return{"text-end":e}};function G(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",31),s.\u0275\u0275elementStart(1,"form"),s.\u0275\u0275elementStart(2,"div",32),s.\u0275\u0275elementStart(3,"h4",33),s.\u0275\u0275text(4),s.\u0275\u0275pipe(5,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(6,"button",34),s.\u0275\u0275listener("click",function(){return(0,s.\u0275\u0275restoreView(n).close)(s.\u0275\u0275nextContext().reset())}),s.\u0275\u0275elementStart(7,"span",35),s.\u0275\u0275text(8,"\xd7"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(9,"div",36),s.\u0275\u0275elementStart(10,"div",9),s.\u0275\u0275elementStart(11,"table",10),s.\u0275\u0275elementStart(12,"thead"),s.\u0275\u0275elementStart(13,"tr"),s.\u0275\u0275elementStart(14,"th",37),s.\u0275\u0275text(15),s.\u0275\u0275pipe(16,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(17,"th",37),s.\u0275\u0275text(18),s.\u0275\u0275pipe(19,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(20,"th",37),s.\u0275\u0275text(21),s.\u0275\u0275pipe(22,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(23,"th",12),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(24,"tbody"),s.\u0275\u0275template(25,O,14,6,"tr",13),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(26,"div",38),s.\u0275\u0275elementStart(27,"button",39),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().reset()}),s.\u0275\u0275text(28),s.\u0275\u0275pipe(29,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){var i=s.\u0275\u0275nextContext();s.\u0275\u0275propertyInterpolate("dir",i.getDirection()),s.\u0275\u0275property("ngClass",s.\u0275\u0275pureFunction1(21,_,"ar"===i.translate.currentLang)),s.\u0275\u0275advance(4),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(5,11,"upload_document.document-history")),s.\u0275\u0275advance(2),s.\u0275\u0275classMapInterpolate1("close ACM-modal-header-",i.translate.currentLang,""),s.\u0275\u0275advance(9),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(16,13,"upload_document.Name")),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(19,15,"upload_document.Date")),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate1("",s.\u0275\u0275pipeBind1(22,17,"customer_decision.addedBy")," "),s.\u0275\u0275advance(4),s.\u0275\u0275property("ngForOf",i.historyDocuments),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(29,19,"button.cancel"))}}var R,A=((R=function(){function n(e,t,i,r,a,l,d,c,u,p){o(this,n),this.settingsService=e,this.datePipe=t,this.gedService=i,this.devToolsServices=r,this.sharedService=a,this.reportService=l,this.formBuilder=d,this.modalService=c,this.translate=u,this.loanMangement=p,this.loading=!0,this.productEntitys=[],this.status=!0,this.loanDocumentEntitys=[],this.loanDocumentsRemoved=[],this.listDocProd=[],this.documentListUpdated=!1,this.completeAction=new s.EventEmitter,this.requiredDocument=new s.EventEmitter,this.historyDocuments=[],this.settingDocumentTypes=[],this.checkCalledSave=!1,this.documentTypechild=new s.EventEmitter}return l(n,[{key:"ngOnInit",value:function(){var e=this;if("GENERIC-WF"==this.category){this.item=this.sharedService.getItem();var n=new d.p;this.item.itemInstanceDTOs.forEach(function(t){t.id===e.item.actualStepInstance&&(e.currentStep=t,e.labelDocument=e.currentStep.libelle)}),this.currentStep&&(n.itemInstanceId=this.currentStep.id,n.workFlowStepId=this.currentStep.idWorkFlowStep,this.settingsService.getDocumentTypeByStep(this.currentStep.idWorkFlowStep,this.currentStep.id).subscribe(function(n){e.settingDocumentTypes=n;var i,r=t(e.settingDocumentTypes);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(!o.idDocumentGED&&1==o.mandatory)return void e.requiredDocument.emit(!0)}}catch(a){r.e(a)}finally{r.f()}}))}else this.category==p.J.SUPPLIER_CATEGORY?(this.labelDocument="generic-document.supplier",this.settingsService.getDocumentTypeByCategory(this.category,this.sharedService.getElementId().supplierId).subscribe(function(n){e.settingDocumentTypes=n;var i,r=t(e.settingDocumentTypes);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(!o.idDocumentGED&&1==o.mandatory)return void e.requiredDocument.emit(!0)}}catch(a){r.e(a)}finally{r.f()}})):this.category==p.J.THIRD_PARTY_CATEGORY?(this.labelDocument="generic-document.partner",this.settingsService.getDocumentTypeByCategory(this.category,this.sharedService.getElementId().thirdPartyId).subscribe(function(n){e.settingDocumentTypes=n;var i,r=t(e.settingDocumentTypes);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(!o.idDocumentGED&&1==o.mandatory)return void e.requiredDocument.emit(!0)}}catch(a){r.e(a)}finally{r.f()}})):this.category==p.J.CONVENTION_CATEGORY&&(this.labelDocument="generic-document.convention",this.settingsService.getDocumentTypeByCategory(this.category,this.sharedService.getElementId().conventionId).subscribe(function(n){e.settingDocumentTypes=n;var i,r=t(e.settingDocumentTypes);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(!o.idDocumentGED&&1==o.mandatory)return void e.requiredDocument.emit(!0)}}catch(a){r.e(a)}finally{r.f()}}))}},{key:"initConvComponent",value:function(e){this.settingDocumentTypes=e}},{key:"getDocumentType",value:function(){return this.settingDocumentTypes}},{key:"createForm",value:function(){this.addDocumentForm=this.formBuilder.group({fileInput:[""]})}},{key:"onFileSelected",value:function(e,t,n){this.sharedService.geTypeMimes().includes(e.target.files[0].type)?e.target.files[0].size<=this.sharedService.getMaxSizeFileUpload()?e.target.files.length>0&&(this.document={name:e.target.files[0].name,settingDocumentType:t.settingDocumentType,title:""+t.title,date:this.datePipe.transform(Date.now(),"yyyy/MM/dd"),file:e.target.files[0],mandatory:t.mandatory,documentIndex:t.documentIndex}):this.devToolsServices.openToastForMaxSizeImg(3,"alert.file_size",this.sharedService.getMaxSizeFileUpload()):this.devToolsServices.openToast(3,"alert.file_type")}},{key:"view",value:function(e,t){var n=this;if(""!==t&&void 0!==t)this.gedService.getDocumentType(t).subscribe(function(e){var i=e.mimeType;n.gedService.getDocument(t).subscribe(function(e){var t=new Blob([e],{type:i}),n=window.URL.createObjectURL(t);window.open(n,"_blank")})});else{var i=URL.createObjectURL(e);window.open(i,"_blank")}}},{key:"remove",value:function(e,t){var n=this;this.devToolsServices.openConfirmDialogWithoutRedirect("confirmation_dialog.delete").afterClosed().subscribe(function(e){e&&(n.loanDocumentEntitys[t].name="",n.loanDocumentEntitys[t].idDocumentGED=null,n.loanDocumentEntitys[t].dateCreation=null,n.loanDocumentEntitys[t].file="",n.loanDocumentsRemoved.push(n.loanDocumentEntitys[t]),n.documentListUpdated=!0)})}},{key:"onUpload",value:function(e,t){this.sharedService.geTypeMimes().includes(e.target.files[0].type)?e.target.files[0].size<=this.sharedService.getMaxSizeFileUpload()?e.target.files.length>0&&(this.settingDocumentTypes[t].name=e.target.files[0].name,this.settingDocumentTypes[t].file=e.target.files[0],this.settingDocumentTypes[t].dateDebut=new Date,this.documentListUpdated=!0,p.J.CONVENTION_CATEGORY&&this.documentTypechild.emit(this.settingDocumentTypes[t])):this.devToolsServices.openToastForMaxSizeImg(3,"alert.file_size",this.sharedService.getMaxSizeFileUpload()):this.devToolsServices.openToast(3,"alert.file_type")}},{key:"toggleCollapse",value:function(){this.expanded=!this.expanded}},{key:"actionSave",value:function(){var e=this;!1===this.documentListUpdated?this.devToolsServices.openToast(3,"alert.no_document_to_save"):this.devToolsServices.openConfirmDialogWithoutRedirect("confirmation_dialog.upload").afterClosed().subscribe(function(t){t&&e.save()})}},{key:"checkRequiredDocument",value:function(){var e,n=t(this.settingDocumentTypes);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.mandatory&&!i.file&&!i.idDocumentGED)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}},{key:"save",value:function(){var n=this;return(0,a.Z)(e().mark(function i(){var r,o,a,l,s;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],o=[],n.sharedService.setLoader(!0),e.next=4,n.settingDocumentTypes.map(function(e,t){var i,a=new d.p;i=e,e.file&&""!==e.file&&(a.titre=e.libelle,a.description&&(a.description=e.description),a.auteur=p.J.AUTEUR,a.settingDocumentTypeDTO=i,a.mandatory=e.mandatory,a.name=e.file.name,a.documentSize=e.file.size,n.currentStep?a.itemInstanceId=n.currentStep.id:(a.category=n.category,n.category===p.J.SUPPLIER_CATEGORY&&(a.elementId=n.sharedService.getElementId().supplierId),n.category===p.J.CONVENTION_CATEGORY&&(a.elementId=n.sharedService.getElementId().conventionId),n.category===p.J.THIRD_PARTY_CATEGORY&&(a.elementId=n.sharedService.getElementId().thirdPartyId)),r.push(e.file),o.push(a))});case 4:if(e.t0=0!==n.loanDocumentsRemoved.length,!e.t0){e.next=8;break}return e.next=8,n.gedService.updateAcmDocumentList(n.loanDocumentsRemoved).toPromise().then(function(){n.devToolsServices.openToast(0,"alert.success"),n.loanDocumentsRemoved=[],n.documentListUpdated=!1});case 8:if(!(o.length>0)){e.next=13;break}return e.next=11,n.gedService.saveListDocuments(r,o).toPromise().then(function(e){n.documentListUpdated=!1,e.forEach(function(e){n.devToolsServices.openToast(0,"alert.success")}),n.requiredDocument.emit(!1),n.ngOnInit()});case 11:e.next=30;break;case 13:a=t(n.settingDocumentTypes),e.prev=14,a.s();case 16:if((l=a.n()).done){e.next=22;break}if((s=l.value).idDocumentGED||1!=s.mandatory){e.next=20;break}return e.abrupt("return",void n.requiredDocument.emit(!0));case 20:e.next=16;break;case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(14),a.e(e.t1);case 27:return e.prev=27,a.f(),e.finish(27);case 30:case"end":return e.stop()}},i,null,[[14,24,27,30]])}))()}},{key:"saveConvention",value:function(t,n){var i=this;return(0,a.Z)(e().mark(function r(){var o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],a=[],i.sharedService.setLoader(!0),e.next=4,t.map(function(e,t){var i,r=new d.p;i=e,e.file&&""!==e.file&&(r.titre=e.libelle,r.description&&(r.description=e.description),r.auteur=p.J.AUTEUR,r.settingDocumentTypeDTO=i,r.mandatory=e.mandatory,r.name=e.file.name,r.documentSize=e.file.size,r.category=p.J.CONVENTION_CATEGORY,r.elementId=n,o.push(e.file),a.push(r))});case 4:if(e.t0=0!==i.loanDocumentsRemoved.length,!e.t0){e.next=8;break}return e.next=8,i.gedService.updateAcmDocumentList(i.loanDocumentsRemoved).toPromise().then(function(){i.devToolsServices.openToast(0,"alert.success"),i.loanDocumentsRemoved=[],i.documentListUpdated=!1});case 8:if(e.t1=a.length>0,!e.t1){e.next=12;break}return e.next=12,i.gedService.saveListDocuments(o,a).toPromise().then(function(e){i.documentListUpdated=!1,e.forEach(function(e){i.devToolsServices.openToast(0,"alert.success")}),i.ngOnInit()});case 12:case"end":return e.stop()}},r)}))()}},{key:"downloadTemplate",value:function(t){var n=this;return(0,a.Z)(e().mark(function i(){var r,o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.reportName){e.next=15;break}if((r=new m.B).inputFileName=t.reportName,(o=[]).push(n.sharedService.getCollection()),"Clearance_Loan"!=t.reportName){e.next=9;break}return e.next=7,n.loanMangement.findLoanByIdIB(n.item.elementId).toPromise().then(function(e){var t=[];t.push(e[0]),r.entryList=t});case 7:e.next=12;break;case 9:r.entryListAcmCollections=o,(a=new u.t).loanId=n.sharedService.getItem().id,r.entryList=[a];case 12:r.typeReport="GENERIC-WF"==n.category?"GENERIC WORKFLOW":"COLLECTION",n.reportService.downloadCustomReport(r).subscribe(function(e){var t=new Blob([e],{type:"application/pdf"}),n=window.URL.createObjectURL(t);window.open(n,"_blank")}),e.next=16;break;case 15:n.devToolsServices.openToast(1,"alert.file_type");case 16:case"end":return e.stop()}},i)}))()}},{key:"openLarge",value:function(e,t){var n=this;this.modalService.open(e,{size:"lg"}).result.then(function(e){}),this.category==p.J.GENERIC_WF_CATEGORY?this.gedService.findhistoryDocumentByItemStep(t.id,this.currentStep.id).subscribe(function(e){n.historyDocuments=e.filter(function(e){return null!==e.idDocumentGED})}):this.category===p.J.SUPPLIER_CATEGORY?this.gedService.findhistoryDocumentByCategoryElement(t.id,this.sharedService.getElementId().supplierId,this.category).subscribe(function(e){n.historyDocuments=e.filter(function(e){return null!==e.idDocumentGED})}):this.category===p.J.CONVENTION_CATEGORY?this.gedService.findhistoryDocumentByCategoryElement(t.id,this.sharedService.getElementId().conventionId,this.category).subscribe(function(e){n.historyDocuments=e.filter(function(e){return null!==e.idDocumentGED})}):this.category===p.J.THIRD_PARTY_CATEGORY&&this.gedService.findhistoryDocumentByCategoryElement(t.id,this.sharedService.getElementId().thirdPartyId,this.category).subscribe(function(e){n.historyDocuments=e.filter(function(e){return null!==e.idDocumentGED})})}},{key:"reset",value:function(){this.historyDocuments=[],this.modalService.dismissAll()}},{key:"getDirection",value:function(){return c.y.direction}}]),n}()).\u0275fac=function(e){return new(e||R)(s.\u0275\u0275directiveInject(f.g),s.\u0275\u0275directiveInject(v.DatePipe),s.\u0275\u0275directiveInject(h.G),s.\u0275\u0275directiveInject(y.R),s.\u0275\u0275directiveInject(g.F),s.\u0275\u0275directiveInject(x.m),s.\u0275\u0275directiveInject(b.qu),s.\u0275\u0275directiveInject(S.FF),s.\u0275\u0275directiveInject(C.sK),s.\u0275\u0275directiveInject(E.q))},R.\u0275cmp=s.\u0275\u0275defineComponent({type:R,selectors:[["app-generic-workFlow-document"]],inputs:{productEntity:"productEntity",expanded:"expanded",category:"category",elementId:"elementId",originSource:"originSource"},outputs:{completeAction:"completeAction",requiredDocument:"requiredDocument",documentTypechild:"documentTypechild"},decls:14,vars:7,consts:[["id","accordionExample",1,"accordion","mb-1"],[1,"card"],["id","headingCollapseVersionHistory","data-target","#collapseVersionHistory","aria-expanded","true","aria-controls","collapseVersionHistory",1,"card-header","d-flex","justify-content-between",3,"click"],[1,"lnr-calendar-full","text-secondary","px-2"],[3,"ngClass"],["id","collapseVersionHistory","aria-labelledby","headingOne",3,"ngClass"],[4,"ngIf"],["content",""],[1,"position-relative"],[1,"table-responsive"],[1,"align-middle","mb-0","table","table-hover"],[1,"ACM-document-table-column"],[1,"text-center","ACM-document-table-column-button"],[4,"ngFor","ngForOf"],["class","mb-2 mx-2 btn-icon btn-icon-only btn-shadow btn-dashed btn btn-outline-focus","type","button",3,"click",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-center","px-0"],[1,"mb-2","mx-2","btn-icon","btn-icon-only","btn-shadow","btn-dashed","btn","btn-outline-focus",3,"click"],["name","plus","_nghost-gyt-c2","","ng-reflect-name","plus"],["aria-hidden","true","ng-reflect-klass","pe-7s-cloud-upload btn-icon-wrapper",1,"pe-7s-cloud-upload","btn-icon-wrapper"],["type","file","name","file",2,"display","none",3,"change"],["fileuploadMultiple",""],[1,"text-center"],["type","button",1,"mb-2","mx-2","btn-icon","btn-icon-only","btn-shadow","btn-dashed","btn","btn-outline-focus",3,"click"],[1,"pe-7s-folder","btn-icon-wrapper"],[1,"btn","btn-warning",3,"disabled","click"],[1,"pe-7s-look","btn-icon-wrapper","text-white"],[1,"pe-7s-cloud-download","btn-icon-wrapper"],[1,"text-danger"],[1,"card-body"],[1,"pt-3",2,"color","red"],[3,"dir","ngClass"],[1,"modal-header","py-2"],[1,"modal-title"],["type","button","aria-label","Close",3,"click"],["aria-hidden","true"],[1,"container","p-3"],[1,"text-center","ACM-document-table-column"],[1,"modal-footer","py-1"],[1,"mb-2","mx-2","btn","btn-outline-danger",3,"click"],[1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275elementStart(1,"div",1),s.\u0275\u0275elementStart(2,"div",2),s.\u0275\u0275listener("click",function(){return t.toggleCollapse()}),s.\u0275\u0275elementStart(3,"div"),s.\u0275\u0275element(4,"i",3),s.\u0275\u0275text(5),s.\u0275\u0275pipe(6,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"div"),s.\u0275\u0275element(8,"i",4),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(9,"div",5),s.\u0275\u0275template(10,T,28,19,"div",6),s.\u0275\u0275template(11,D,5,3,"div",6),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(12,G,30,23,"ng-template",null,7,s.\u0275\u0275templateRefExtractor)),2&e&&(s.\u0275\u0275advance(5),s.\u0275\u0275textInterpolate1(" ",s.\u0275\u0275pipeBind1(6,5,t.labelDocument)," "),s.\u0275\u0275advance(3),s.\u0275\u0275property("ngClass",!0===t.expanded?"lnr-chevron-up text-secondary":"lnr-chevron-down text-secondary"),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngClass",!0===t.expanded?"collapse show":"collapse"),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",t.settingDocumentTypes.length>0),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",0===t.settingDocumentTypes.length))},directives:[v.NgClass,v.NgIf,v.NgForOf,k.Lv,b._Y,b.JL,b.F],pipes:[C.X$,v.DatePipe],styles:[""]}),R)},34214:function(e,t,n){n.d(t,{N:function(){return i}});var i=l(function e(){o(this,e)})},85922:function(e,t,n){n.d(t,{T:function(){return i}});var i=l(function e(){o(this,e)})},14459:function(e,t,n){n.d(t,{N:function(){return i}});var i=l(function e(){o(this,e)})},35338:function(e,t,n){n.d(t,{N:function(){return i}});var i=l(function e(){o(this,e)})},72084:function(e,t,n){n.d(t,{Y:function(){return i}});var i=l(function e(){o(this,e)})},82876:function(e,t,n){n.d(t,{f:function(){return i}});var i=l(function e(){o(this,e)})},95728:function(e,t,n){n.d(t,{o:function(){return i}});var i=l(function e(){o(this,e)})},98657:function(e,t,n){n.d(t,{y:function(){return i}});var i=l(function e(){o(this,e)})},74972:function(e,t,n){n.d(t,{F:function(){return i}});var i=l(function e(){o(this,e)})},59395:function(e,t,n){n.d(t,{q:function(){return i}});var i=l(function e(){o(this,e)})},40572:function(e,t,n){n.d(t,{G:function(){return i}});var i=l(function e(){o(this,e)})},97199:function(e,t,n){n.d(t,{P:function(){return i}});var i=l(function e(){o(this,e)})},72114:function(e,t,n){n.d(t,{B:function(){return i}});var i=l(function e(){o(this,e)})},39670:function(e,t,n){n.d(t,{d:function(){return i}});var i=l(function e(){o(this,e)})},21362:function(e,t,n){n.d(t,{T:function(){return i}});var i=l(function e(){o(this,e)})},37990:function(e,t,n){n.d(t,{f:function(){return i}});var i=l(function e(){o(this,e)})},59649:function(e,t,n){n.d(t,{n:function(){return i}});var i=l(function e(){o(this,e)})},16519:function(e,t,n){n.d(t,{X:function(){return i}});var i=l(function e(){o(this,e)})}}])}();