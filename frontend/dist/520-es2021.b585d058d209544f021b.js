"use strict";(self.webpackChunkacm_web=self.webpackChunkacm_web||[]).push([[520],{23520:function(e,t,n){n.r(t),n.d(t,{IncentiveModule:function(){return yt}});var i=n(38583),r=n(29790),o=n(3679),s=n(39929),a=n(61137),l=n(99266),c=n(72159),d=n(8239),m=n(58762),p=n(97199);class u{}class v{}class h{}class I{}class f{}class y{}class g{}var E=n(37716),S=n(23990),C=n(28970),x=n(6452),b=n(91841);let N=(()=>{class e{constructor(e){this.httpClient=e}findIncentiveSettingsConstantsByCategories(e){return this.httpClient.post(x.f.FIND_INCENTIVE_SETTING_CONSTANTS_BY_CATEGORIES,e)}getIncentiveSettings(e){return this.httpClient.post(x.f.FIND_INCENTIVE_SETTING,e)}createIncentiveSetting(e){return this.httpClient.post(x.f.CREATE_INCENTIVE_SETTING,e)}updateIncentiveSetting(e){return this.httpClient.put(x.f.UPDATE_INCENTIVE_SETTING,e)}deleteIncentiveSetting(e){return this.httpClient.delete(x.f.DELETE_INCENTIVE_SETTING+e)}getProductCategories(e){return this.httpClient.post(x.f.PRODUCT_CATEGORY,e)}updateStatusIncentiveSettings(e){return this.httpClient.post(x.f.UPDTATE_STATUS_INCENTIVE_SETTING,e)}getStatusIncentiveSettingsByCode(e){return this.httpClient.post(x.f.FIND_STATUS_INCENTIVE_SETTING,e)}updateProductCategory(e){return this.httpClient.put(x.f.UPDATE_PRODUCT_CATEGORY,e)}}return e.\u0275fac=function(t){return new(t||e)(E.\u0275\u0275inject(b.eN))},e.\u0275prov=E.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),T=(()=>{class e{constructor(e){this.httpClient=e}getBranchProdLevels(e){return this.httpClient.post(x.f.FIND_BRANCH_PRODUCTIVITY,e)}createBranchProdLevel(e){return this.httpClient.post(x.f.CREATE_BRANCH_PRODUCTIVITY,e)}updateBranchProdLevel(e){return this.httpClient.put(x.f.UPDATE_BRANCH_PRODUCTIVITY,e)}deleteBranchProdLevel(e){return this.httpClient.delete(x.f.DELETE_BRANCH_PRODUCTIVITY+e)}findPaginationRepayment(e){return this.httpClient.post(x.f.FIND_PAGINATION_INCENTIVE_REPAYMENT,e)}createIncentiveRepayment(e){return this.httpClient.post(x.f.CREATE_INCENTIVE_REPAYMENT,e)}updateIncentiveRepayment(e){return this.httpClient.put(x.f.UPDATE_INCENTIVE_REPAYMENT,e)}deleteIncentiveRepayment(e){return this.httpClient.delete(x.f.DELETE_INCENTIVE_REPAYMENT+e)}updateApplyDiscountOrBranch(e){return this.httpClient.post(x.f.UPDATE_APPLY_DISCOUNT_BRANCH,e)}}return e.\u0275fac=function(t){return new(t||e)(E.\u0275\u0275inject(b.eN))},e.\u0275prov=E.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var F=n(85627),R=n(35554),w=n(57552),k=n(61181);function _(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.description," ")}}function O(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.description," ")}}function P(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275element(1,"input",49),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index;E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","from",e,"")}}function V(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275element(1,"input",49),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index;E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","to",e,"")}}function L(e,t){if(1&e){const e=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"div",50),E.\u0275\u0275elementStart(2,"div",51),E.\u0275\u0275elementStart(3,"button",52),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).saveActiveCustomer(t)}),E.\u0275\u0275element(4,"i",53),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(5,"div",51),E.\u0275\u0275elementStart(6,"button",54),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).deleteActiveCustomer(t)}),E.\u0275\u0275element(7,"i",55),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()}}function B(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"tr"),E.\u0275\u0275template(1,P,2,1,"td",48),E.\u0275\u0275template(2,V,2,1,"td",48),E.\u0275\u0275template(3,L,8,0,"td",48),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete)}}function A(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275element(1,"input",49),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index;E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","from",e,"")}}function q(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275element(1,"input",49),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index;E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","to",e,"")}}function M(e,t){if(1&e){const e=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"div",50),E.\u0275\u0275elementStart(2,"div",51),E.\u0275\u0275elementStart(3,"button",52),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).saveProductivity(t)}),E.\u0275\u0275element(4,"i",53),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(5,"div",51),E.\u0275\u0275elementStart(6,"button",54),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).deleteProductivity(t)}),E.\u0275\u0275element(7,"i",55),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()}}function D(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"tr"),E.\u0275\u0275template(1,A,2,1,"td",48),E.\u0275\u0275template(2,q,2,1,"td",48),E.\u0275\u0275template(3,M,8,0,"td",48),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete)}}function G(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275element(1,"input",49),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index;E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","from",e,"")}}function Y(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275element(1,"input",49),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index;E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","to",e,"")}}function z(e,t){if(1&e){const e=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"div",50),E.\u0275\u0275elementStart(2,"div",51),E.\u0275\u0275elementStart(3,"button",52),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).saveRiskLevel(t)}),E.\u0275\u0275element(4,"i",53),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(5,"div",51),E.\u0275\u0275elementStart(6,"button",54),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).deleteRiskLevel(t)}),E.\u0275\u0275element(7,"i",55),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()}}function U(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"tr"),E.\u0275\u0275template(1,G,2,1,"td",48),E.\u0275\u0275template(2,Y,2,1,"td",48),E.\u0275\u0275template(3,z,8,0,"td",48),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete)}}function j(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().$implicit;E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate(e.ordre)}}function J(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275element(1,"input",49),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index;E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","from",e,"")}}function H(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275element(1,"input",49),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index;E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","to",e,"")}}function $(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275element(1,"input",49),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index;E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","discount",e,"")}}function W(e,t){if(1&e){const e=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"div",50),E.\u0275\u0275elementStart(2,"div",51),E.\u0275\u0275elementStart(3,"button",52),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).saveDiscount(t)}),E.\u0275\u0275element(4,"i",53),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(5,"div",51),E.\u0275\u0275elementStart(6,"button",54),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).deleteDiscount(t)}),E.\u0275\u0275element(7,"i",55),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()}}function Z(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"tr"),E.\u0275\u0275template(1,j,2,1,"td",48),E.\u0275\u0275template(2,J,2,1,"td",48),E.\u0275\u0275template(3,H,2,1,"td",48),E.\u0275\u0275template(4,$,2,1,"td",48),E.\u0275\u0275template(5,W,8,0,"td",48),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete)}}function K(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e.code),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.libelle," ")}}function X(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"select",56),E.\u0275\u0275template(2,K,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index,t=E.\u0275\u0275nextContext(2);E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","role",e,""),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.groupeEntitys)}}function Q(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275element(1,"input",49),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index;E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","minAmount",e,"")}}function ee(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275element(1,"input",49),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index;E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","minCustomers",e,"")}}function te(e,t){if(1&e){const e=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"div",50),E.\u0275\u0275elementStart(2,"div",51),E.\u0275\u0275elementStart(3,"button",52),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).saveBranchProdLevel(t)}),E.\u0275\u0275element(4,"i",53),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(5,"div",51),E.\u0275\u0275elementStart(6,"button",54),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).deleteBranchProdLevel(t)}),E.\u0275\u0275element(7,"i",55),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()}}function ne(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"tr"),E.\u0275\u0275template(1,X,3,2,"td",48),E.\u0275\u0275template(2,Q,2,1,"td",48),E.\u0275\u0275template(3,ee,2,1,"td",48),E.\u0275\u0275template(4,te,8,0,"td",48),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete)}}function ie(e,t){1&e&&(E.\u0275\u0275elementStart(0,"span",57),E.\u0275\u0275text(1),E.\u0275\u0275pipe(2,"translate"),E.\u0275\u0275elementEnd()),2&e&&(E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",E.\u0275\u0275pipeBind1(2,1,"incentive.advanced_search")," "))}function re(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e.code),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.libelle," ")}}function oe(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e.id),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate2(" ",e.from," - ",e.to," ")}}function se(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e.id),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate2(" ",e.from," - ",e.to," ")}}function ae(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e.id),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate2(" ",e.from," - ",e.to," ")}}function le(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.description," ")}}function ce(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.description," ")}}function de(e,t){if(1&e){const e=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"form",42),E.\u0275\u0275elementStart(1,"div"),E.\u0275\u0275elementStart(2,"div",58),E.\u0275\u0275elementStart(3,"div",59),E.\u0275\u0275elementStart(4,"div",60),E.\u0275\u0275elementStart(5,"label"),E.\u0275\u0275text(6),E.\u0275\u0275pipe(7,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(8,"select",61),E.\u0275\u0275template(9,re,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(10,"div",59),E.\u0275\u0275elementStart(11,"div",60),E.\u0275\u0275elementStart(12,"label"),E.\u0275\u0275text(13),E.\u0275\u0275pipe(14,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(15,"select",62),E.\u0275\u0275template(16,oe,2,3,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(17,"div",59),E.\u0275\u0275elementStart(18,"div",60),E.\u0275\u0275elementStart(19,"label"),E.\u0275\u0275text(20),E.\u0275\u0275pipe(21,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(22,"select",63),E.\u0275\u0275template(23,se,2,3,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(24,"div",59),E.\u0275\u0275elementStart(25,"div",60),E.\u0275\u0275elementStart(26,"label"),E.\u0275\u0275text(27),E.\u0275\u0275pipe(28,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(29,"select",64),E.\u0275\u0275template(30,ae,2,3,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(31,"div",59),E.\u0275\u0275elementStart(32,"div",60),E.\u0275\u0275elementStart(33,"label"),E.\u0275\u0275text(34),E.\u0275\u0275pipe(35,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(36,"select",65),E.\u0275\u0275template(37,le,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(38,"div",59),E.\u0275\u0275elementStart(39,"div",60),E.\u0275\u0275elementStart(40,"label"),E.\u0275\u0275text(41),E.\u0275\u0275pipe(42,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(43,"select",66),E.\u0275\u0275template(44,ce,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(45,"div",59),E.\u0275\u0275elementStart(46,"div",67),E.\u0275\u0275elementStart(47,"div",51),E.\u0275\u0275elementStart(48,"button",68),E.\u0275\u0275listener("click",function(){return E.\u0275\u0275restoreView(e),E.\u0275\u0275nextContext(2).onSubmit()}),E.\u0275\u0275text(49),E.\u0275\u0275pipe(50,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(51,"div",51),E.\u0275\u0275elementStart(52,"button",54),E.\u0275\u0275listener("click",function(){return E.\u0275\u0275restoreView(e),E.\u0275\u0275nextContext(2).reset()}),E.\u0275\u0275text(53," reset "),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()}if(2&e){const e=E.\u0275\u0275nextContext(2);E.\u0275\u0275property("formGroup",e.repaymentFilterForm),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(7,14,"incentive.role")),E.\u0275\u0275advance(3),E.\u0275\u0275property("ngForOf",e.groupeEntitys),E.\u0275\u0275advance(4),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(14,16,"incentive.issuance_and_repayment.active_customer")),E.\u0275\u0275advance(3),E.\u0275\u0275property("ngForOf",e.listActiveCustomers),E.\u0275\u0275advance(4),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(21,18,"incentive.issuance_and_repayment.productivity")),E.\u0275\u0275advance(3),E.\u0275\u0275property("ngForOf",e.listProductivities),E.\u0275\u0275advance(4),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(28,20,"incentive.issuance_and_repayment.risk_level")),E.\u0275\u0275advance(3),E.\u0275\u0275property("ngForOf",e.listRiskLevels),E.\u0275\u0275advance(4),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(35,22,"incentive.incentive_type")),E.\u0275\u0275advance(3),E.\u0275\u0275property("ngForOf",e.incentiveTypes),E.\u0275\u0275advance(4),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(42,24,"incentive.based_on")),E.\u0275\u0275advance(3),E.\u0275\u0275property("ngForOf",e.repaymentsBasedOn),E.\u0275\u0275advance(5),E.\u0275\u0275textInterpolate1(" ",E.\u0275\u0275pipeBind1(50,26,"upload_document.search")," ")}}function me(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e.code),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.libelle," ")}}function pe(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"select",56),E.\u0275\u0275template(2,me,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index,t=E.\u0275\u0275nextContext(2);E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","role",e,""),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.groupeEntitys)}}function ue(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e.id),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate2(" ",e.from," - ",e.to," ")}}function ve(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"select",56),E.\u0275\u0275template(2,ue,2,3,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index,t=E.\u0275\u0275nextContext(2);E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","activeCustomer",e,""),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.listActiveCustomers)}}function he(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e.id),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate2(" ",e.from," - ",e.to," ")}}function Ie(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"select",56),E.\u0275\u0275template(2,he,2,3,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index,t=E.\u0275\u0275nextContext(2);E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","productivity",e,""),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.listProductivities)}}function fe(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e.id),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate2(" ",e.from," - ",e.to," ")}}function ye(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"select",56),E.\u0275\u0275template(2,fe,2,3,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index,t=E.\u0275\u0275nextContext(2);E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","riskLevel",e,""),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.listRiskLevels)}}function ge(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.description," ")}}function Ee(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"select",69),E.\u0275\u0275template(2,ge,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index,t=E.\u0275\u0275nextContext(2);E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","incentiveType",e,""),E.\u0275\u0275property("compareWith",t.compareIncentiveType),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.incentiveTypes)}}function Se(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275element(1,"input",70),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index;E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","incentiveValue",e,"")}}function Ce(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.description," ")}}function xe(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"select",69),E.\u0275\u0275template(2,Ce,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index,t=E.\u0275\u0275nextContext(2);E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","basedOn",e,""),E.\u0275\u0275property("compareWith",t.compareBasedOn),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.repaymentsBasedOn)}}function be(e,t){if(1&e){const e=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"div",7),E.\u0275\u0275elementStart(2,"div",71),E.\u0275\u0275elementStart(3,"button",52),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).saveRepaymentSettings(t)}),E.\u0275\u0275element(4,"i",53),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(5,"div",71),E.\u0275\u0275elementStart(6,"button",54),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).deleteIncentiveRepayment(t)}),E.\u0275\u0275element(7,"i",55),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()}}function Ne(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"tr"),E.\u0275\u0275template(1,pe,3,2,"td",48),E.\u0275\u0275template(2,ve,3,2,"td",48),E.\u0275\u0275template(3,Ie,3,2,"td",48),E.\u0275\u0275template(4,ye,3,2,"td",48),E.\u0275\u0275template(5,Ee,3,3,"td",48),E.\u0275\u0275template(6,Se,2,1,"td",48),E.\u0275\u0275template(7,xe,3,3,"td",48),E.\u0275\u0275template(8,be,8,0,"td",48),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete)}}function Te(e,t){if(1&e){const e=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"div",17),E.\u0275\u0275elementStart(1,"div",18),E.\u0275\u0275text(2),E.\u0275\u0275pipe(3,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(4,"form",19),E.\u0275\u0275elementStart(5,"div",7),E.\u0275\u0275elementStart(6,"div",20),E.\u0275\u0275elementStart(7,"table",21),E.\u0275\u0275elementStart(8,"tr"),E.\u0275\u0275elementStart(9,"th"),E.\u0275\u0275text(10),E.\u0275\u0275pipe(11,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(12,"th"),E.\u0275\u0275text(13),E.\u0275\u0275pipe(14,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275element(15,"th"),E.\u0275\u0275elementEnd(),E.\u0275\u0275template(16,B,4,3,"tr",22),E.\u0275\u0275element(17,"div",23,24),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(19,"div",25),E.\u0275\u0275elementStart(20,"button",26),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275reference(18);return E.\u0275\u0275nextContext().addActiveCustomer(t)}),E.\u0275\u0275elementStart(21,"fa",27),E.\u0275\u0275element(22,"i",28),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(23,"div",18),E.\u0275\u0275text(24),E.\u0275\u0275pipe(25,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(26,"form",19),E.\u0275\u0275elementStart(27,"div",7),E.\u0275\u0275elementStart(28,"div",20),E.\u0275\u0275elementStart(29,"table",21),E.\u0275\u0275elementStart(30,"tr"),E.\u0275\u0275elementStart(31,"th"),E.\u0275\u0275text(32),E.\u0275\u0275pipe(33,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(34,"th"),E.\u0275\u0275text(35),E.\u0275\u0275pipe(36,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275element(37,"th"),E.\u0275\u0275elementEnd(),E.\u0275\u0275template(38,D,4,3,"tr",22),E.\u0275\u0275elementEnd(),E.\u0275\u0275element(39,"div",23,29),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(41,"div",25),E.\u0275\u0275elementStart(42,"button",26),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275reference(40);return E.\u0275\u0275nextContext().addProductivity(t)}),E.\u0275\u0275elementStart(43,"fa",27),E.\u0275\u0275element(44,"i",28),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(45,"div",18),E.\u0275\u0275text(46),E.\u0275\u0275pipe(47,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(48,"form",19),E.\u0275\u0275elementStart(49,"div",7),E.\u0275\u0275elementStart(50,"div",20),E.\u0275\u0275elementStart(51,"table",21),E.\u0275\u0275elementStart(52,"tr"),E.\u0275\u0275elementStart(53,"th"),E.\u0275\u0275text(54),E.\u0275\u0275pipe(55,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(56,"th"),E.\u0275\u0275text(57),E.\u0275\u0275pipe(58,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275element(59,"th"),E.\u0275\u0275elementEnd(),E.\u0275\u0275template(60,U,4,3,"tr",22),E.\u0275\u0275elementEnd(),E.\u0275\u0275element(61,"div",23,30),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(63,"div",25),E.\u0275\u0275elementStart(64,"button",26),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275reference(62);return E.\u0275\u0275nextContext().addRiskLevel(t)}),E.\u0275\u0275elementStart(65,"fa",27),E.\u0275\u0275element(66,"i",28),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(67,"div",18),E.\u0275\u0275text(68),E.\u0275\u0275pipe(69,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(70,"form",19),E.\u0275\u0275elementStart(71,"div",7),E.\u0275\u0275elementStart(72,"div",20),E.\u0275\u0275elementStart(73,"table",21),E.\u0275\u0275elementStart(74,"tr"),E.\u0275\u0275elementStart(75,"th"),E.\u0275\u0275text(76),E.\u0275\u0275pipe(77,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(78,"th"),E.\u0275\u0275text(79),E.\u0275\u0275pipe(80,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(81,"th"),E.\u0275\u0275text(82),E.\u0275\u0275pipe(83,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275element(84,"th"),E.\u0275\u0275element(85,"th"),E.\u0275\u0275elementEnd(),E.\u0275\u0275template(86,Z,6,5,"tr",22),E.\u0275\u0275elementEnd(),E.\u0275\u0275element(87,"div",23,31),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(89,"div",25),E.\u0275\u0275elementStart(90,"button",26),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275reference(88);return E.\u0275\u0275nextContext().addDiscount(t)}),E.\u0275\u0275elementStart(91,"fa",27),E.\u0275\u0275element(92,"i",28),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(93,"div",18),E.\u0275\u0275text(94),E.\u0275\u0275pipe(95,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(96,"form",19),E.\u0275\u0275elementStart(97,"div",7),E.\u0275\u0275elementStart(98,"div",20),E.\u0275\u0275elementStart(99,"table",21),E.\u0275\u0275elementStart(100,"tr"),E.\u0275\u0275elementStart(101,"th"),E.\u0275\u0275text(102),E.\u0275\u0275pipe(103,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(104,"th"),E.\u0275\u0275text(105),E.\u0275\u0275pipe(106,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(107,"th"),E.\u0275\u0275text(108),E.\u0275\u0275pipe(109,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275element(110,"th"),E.\u0275\u0275elementEnd(),E.\u0275\u0275template(111,ne,5,4,"tr",22),E.\u0275\u0275elementEnd(),E.\u0275\u0275element(112,"div",23,32),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(114,"div",25),E.\u0275\u0275elementStart(115,"button",26),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275reference(113);return E.\u0275\u0275nextContext().addBranchProdLevel(t)}),E.\u0275\u0275elementStart(116,"fa",27),E.\u0275\u0275element(117,"i",28),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(118,"div",18),E.\u0275\u0275text(119),E.\u0275\u0275pipe(120,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(121,"div",33),E.\u0275\u0275elementStart(122,"div",34),E.\u0275\u0275elementStart(123,"div",10),E.\u0275\u0275elementStart(124,"label",35),E.\u0275\u0275text(125),E.\u0275\u0275pipe(126,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(127,"div",36),E.\u0275\u0275elementStart(128,"div",10),E.\u0275\u0275elementStart(129,"bSwitch",14),E.\u0275\u0275listener("ngModelChange",function(t){return E.\u0275\u0275restoreView(e),E.\u0275\u0275nextContext().applyDiscount=t})("click",function(){return E.\u0275\u0275restoreView(e),E.\u0275\u0275nextContext().applyDiscountRule()}),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(130,"div",37),E.\u0275\u0275elementStart(131,"div",34),E.\u0275\u0275elementStart(132,"div",10),E.\u0275\u0275elementStart(133,"label",35),E.\u0275\u0275text(134),E.\u0275\u0275pipe(135,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(136,"div",36),E.\u0275\u0275elementStart(137,"div",10),E.\u0275\u0275elementStart(138,"bSwitch",14),E.\u0275\u0275listener("ngModelChange",function(t){return E.\u0275\u0275restoreView(e),E.\u0275\u0275nextContext().applyBranch=t})("click",function(){return E.\u0275\u0275restoreView(e),E.\u0275\u0275nextContext().applyBranchRule()}),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275element(139,"div",38),E.\u0275\u0275elementStart(140,"ngb-accordion"),E.\u0275\u0275elementStart(141,"ngb-panel",39),E.\u0275\u0275template(142,ie,3,3,"ng-template",40),E.\u0275\u0275template(143,de,54,28,"ng-template",41),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(144,"form",42),E.\u0275\u0275elementStart(145,"div",7),E.\u0275\u0275elementStart(146,"div",3),E.\u0275\u0275elementStart(147,"table",21),E.\u0275\u0275elementStart(148,"tr"),E.\u0275\u0275elementStart(149,"th"),E.\u0275\u0275text(150),E.\u0275\u0275pipe(151,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(152,"th"),E.\u0275\u0275text(153),E.\u0275\u0275pipe(154,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(155,"th"),E.\u0275\u0275text(156),E.\u0275\u0275pipe(157,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(158,"th"),E.\u0275\u0275text(159),E.\u0275\u0275pipe(160,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(161,"th"),E.\u0275\u0275text(162),E.\u0275\u0275pipe(163,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(164,"th"),E.\u0275\u0275text(165),E.\u0275\u0275pipe(166,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(167,"th"),E.\u0275\u0275text(168),E.\u0275\u0275pipe(169,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275element(170,"th"),E.\u0275\u0275elementEnd(),E.\u0275\u0275template(171,Ne,9,8,"tr",22),E.\u0275\u0275elementEnd(),E.\u0275\u0275element(172,"div",23,43),E.\u0275\u0275elementStart(174,"div",44),E.\u0275\u0275elementStart(175,"div",45),E.\u0275\u0275elementStart(176,"ngb-pagination",46),E.\u0275\u0275listener("pageChange",function(t){return E.\u0275\u0275restoreView(e),E.\u0275\u0275nextContext().pageNumber=t})("pageChange",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext();return t.reloadRepaymentIncentive(t.pageNumber,"NUMBER")}),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(177,"div",47),E.\u0275\u0275elementStart(178,"button",26),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275reference(173);return E.\u0275\u0275nextContext().addRepayment(t)}),E.\u0275\u0275elementStart(179,"fa",27),E.\u0275\u0275element(180,"i",28),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()}if(2&e){const e=E.\u0275\u0275nextContext();E.\u0275\u0275advance(2),E.\u0275\u0275textInterpolate1(" ",E.\u0275\u0275pipeBind1(3,58,"incentive.issuance_and_repayment.active_customer_setting")," "),E.\u0275\u0275advance(2),E.\u0275\u0275property("formGroup",e.activeCustomerForm),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(11,60,"incentive.issuance_and_repayment.from")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(14,62,"incentive.issuance_and_repayment.to")),E.\u0275\u0275advance(3),E.\u0275\u0275property("ngForOf",e.activeCustomers),E.\u0275\u0275advance(4),E.\u0275\u0275property("disabled",e.saveNewActive),E.\u0275\u0275advance(4),E.\u0275\u0275textInterpolate1(" ",E.\u0275\u0275pipeBind1(25,64,"incentive.issuance_and_repayment.productivity_setting")," "),E.\u0275\u0275advance(2),E.\u0275\u0275property("formGroup",e.productivityForm),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(33,66,"incentive.issuance_and_repayment.from")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(36,68,"incentive.issuance_and_repayment.to")),E.\u0275\u0275advance(3),E.\u0275\u0275property("ngForOf",e.productivities),E.\u0275\u0275advance(4),E.\u0275\u0275property("disabled",e.saveNewProductivity),E.\u0275\u0275advance(4),E.\u0275\u0275textInterpolate1(" ",E.\u0275\u0275pipeBind1(47,70,"incentive.issuance_and_repayment.risk_level_setting")," "),E.\u0275\u0275advance(2),E.\u0275\u0275property("formGroup",e.riskLevelForm),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(55,72,"incentive.issuance_and_repayment.from")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(58,74,"incentive.issuance_and_repayment.to")),E.\u0275\u0275advance(3),E.\u0275\u0275property("ngForOf",e.riskLevels),E.\u0275\u0275advance(4),E.\u0275\u0275property("disabled",e.saveNewRisk),E.\u0275\u0275advance(4),E.\u0275\u0275textInterpolate1(" ",E.\u0275\u0275pipeBind1(69,76,"incentive.issuance_and_repayment.discount_from_total_settings")," "),E.\u0275\u0275advance(2),E.\u0275\u0275property("formGroup",e.discountForm),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(77,78,"incentive.issuance_and_repayment.from")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(80,80,"incentive.issuance_and_repayment.to")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(83,82,"incentive.issuance_and_repayment.discount")),E.\u0275\u0275advance(4),E.\u0275\u0275property("ngForOf",e.discounts),E.\u0275\u0275advance(4),E.\u0275\u0275property("disabled",e.saveNewDiscount),E.\u0275\u0275advance(4),E.\u0275\u0275textInterpolate1(" ",E.\u0275\u0275pipeBind1(95,84,"incentive.issuance_and_repayment.branch_productivity_levels_setting")," "),E.\u0275\u0275advance(2),E.\u0275\u0275property("formGroup",e.branchProdForm),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(103,86,"incentive.role")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(106,88,"incentive.issuance_and_repayment.minAmount")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(109,90,"incentive.issuance_and_repayment.minCustomers")),E.\u0275\u0275advance(3),E.\u0275\u0275property("ngForOf",e.branchProdLevels),E.\u0275\u0275advance(4),E.\u0275\u0275property("disabled",e.saveBranchProd),E.\u0275\u0275advance(4),E.\u0275\u0275textInterpolate1(" ",E.\u0275\u0275pipeBind1(120,92,"incentive.issuance_and_repayment.issuance_and_repayment_incentives_settings")," "),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate1(" ",E.\u0275\u0275pipeBind1(126,94,"incentive.issuance_and_repayment.apply_discount"),""),E.\u0275\u0275advance(4),E.\u0275\u0275property("ngModel",e.applyDiscount)("switch-size","small")("switch-animate",!0)("switch-off-color","danger"),E.\u0275\u0275advance(5),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(135,96,"incentive.issuance_and_repayment.apply_branch")),E.\u0275\u0275advance(4),E.\u0275\u0275property("ngModel",e.applyBranch)("switch-size","small")("switch-animate",!0)("switch-off-color","danger"),E.\u0275\u0275advance(6),E.\u0275\u0275property("formGroup",e.repaymentForm),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(151,98,"incentive.role")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(154,100,"incentive.issuance_and_repayment.active_customer")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(157,102,"incentive.issuance_and_repayment.productivity")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(160,104,"incentive.issuance_and_repayment.risk_level")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(163,106,"incentive.incentive_type")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(166,108,"incentive.incentive_value")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(169,110,"incentive.based_on")),E.\u0275\u0275advance(3),E.\u0275\u0275property("ngForOf",e.repayments),E.\u0275\u0275advance(5),E.\u0275\u0275property("collectionSize",e.totalElements)("page",e.pageNumber)("pageSize",e.pageSize)("maxSize",3)("boundaryLinks",!0),E.\u0275\u0275advance(2),E.\u0275\u0275property("disabled",e.saveRepayment)}}let Fe=(()=>{class e{constructor(e,t,n,i,r,o){this.loanManagementService=e,this.settingsService=t,this.incentiveService=n,this.formBuilder=i,this.issuanceRepaymentService=r,this.devToolsServices=o,this.productEntitys=[],this.groupeEntitys=[],this.groupeEntity=new p.P,this.frequencies=[],this.incentiveSettings=[],this.activeCustomers=[],this.listActiveCustomers=[],this.productivities=[],this.listProductivities=[],this.riskLevels=[],this.listRiskLevels=[],this.discounts=[],this.listDiscounts=[],this.branchProdLevels=[],this.listBranchProdLevels=[],this.incentiveRepayments=[],this.repayments=[],this.incentiveTypes=[],this.repaymentsBasedOn=[],this.activeCustomerIndex=0,this.productivityIndex=0,this.riskLevelIndex=0,this.discountIndex=0,this.branchIndex=0,this.repaymentIndex=0,this.productSelected=!1,this.frequencySelected=!1,this.saveNewActive=!1,this.saveNewProductivity=!1,this.saveNewRisk=!1,this.saveNewDiscount=!1,this.saveBranchProd=!1,this.saveRepayment=!1,this.pageSize=5,this.repaymentEntity=new v}ngOnInit(){this.getProduct().then(()=>{this.getIncentiveConstantsSettingsbyCategories().then(()=>{this.frequencies.length>0&&this.productEntitys.length>0&&(this.frequency=this.frequencies[0],this.frequencySelected=!0,this.productEntity=this.productEntitys[0],this.productSelected=!0,this.activeCustomerForm=this.formBuilder.group({}),this.productivityForm=this.formBuilder.group({}),this.riskLevelForm=this.formBuilder.group({}),this.discountForm=this.formBuilder.group({}),this.branchProdForm=this.formBuilder.group({}),this.repaymentForm=this.formBuilder.group({}),this.repaymentFilterForm=this.formBuilder.group({}),this.getActiveCustomers(),this.getProdictivity(),this.getRiskLevel(),this.getDiscounts(),this.getBranchProdLevels(),this.getIssuanceAndRepayment(),this.createFilterForm())})}),this.getRoles(),this.getSettingStatus()}getSettingStatus(){const e=new y;e.code=m.J.ACM_INCENTIVE_REPAYMENT,this.incentiveService.getStatusIncentiveSettingsByCode(e).subscribe(e=>{this.incentiveSettingRunEntity=e,this.applyDiscount=this.incentiveSettingRunEntity.applayDiscountRule,this.applyBranch=this.incentiveSettingRunEntity.appalyBranchProdLevel})}selectProduct(e){this.productEntity=e,this.productSelected=!0,this.enabled=e.incentiveRepayment,this.activeCustomerForm=this.formBuilder.group({}),this.activeCustomers=[],this.productivityForm=this.formBuilder.group({}),this.productivities=[],this.riskLevelForm=this.formBuilder.group({}),this.riskLevels=[],this.discountForm=this.formBuilder.group({}),this.discounts=[],this.branchProdLevels=[],this.branchProdForm=this.formBuilder.group({}),this.repayments=[],this.repaymentForm=this.formBuilder.group({}),this.repaymentFilterForm=this.formBuilder.group({}),this.saveNewActive=!1,this.saveNewProductivity=!1,this.saveNewRisk=!1,this.saveNewDiscount=!1,this.saveBranchProd=!1,this.saveRepayment=!1,this.getActiveCustomers(),this.getProdictivity(),this.getRiskLevel(),this.getDiscounts(),this.getBranchProdLevels(),this.getIssuanceAndRepayment(),this.createFilterForm()}selectFrequency(e){this.frequency=e,this.frequencySelected=!0,this.activeCustomerForm=this.formBuilder.group({}),this.activeCustomers=[],this.productivityForm=this.formBuilder.group({}),this.productivities=[],this.riskLevelForm=this.formBuilder.group({}),this.riskLevels=[],this.discountForm=this.formBuilder.group({}),this.discounts=[],this.branchProdLevels=[],this.branchProdForm=this.formBuilder.group({}),this.repayments=[],this.repaymentForm=this.formBuilder.group({}),this.saveNewActive=!1,this.saveNewProductivity=!1,this.saveNewRisk=!1,this.saveNewDiscount=!1,this.saveBranchProd=!1,this.saveRepayment=!1,this.repaymentFilterForm=this.formBuilder.group({}),this.saveNewActive=!1,this.saveNewProductivity=!1,this.saveNewRisk=!1,this.saveNewDiscount=!1,this.saveBranchProd=!1,this.saveRepayment=!1,this.getActiveCustomers(),this.getProdictivity(),this.getRiskLevel(),this.getDiscounts(),this.getBranchProdLevels(),this.getIssuanceAndRepayment(),this.createFilterForm()}getProduct(){var e=this;return(0,d.Z)(function*(){const t=new g;yield e.incentiveService.getProductCategories(t).toPromise().then(t=>{e.productEntitys=t,e.enabled=e.productEntitys[0].incentiveRepayment})})()}getRoles(){this.settingsService.findGroup(this.groupeEntity).subscribe(e=>{this.groupeEntitys=e})}getIncentiveConstantsSettingsbyCategories(){var e=this;return(0,d.Z)(function*(){yield e.incentiveService.findIncentiveSettingsConstantsByCategories(m.J.INCENTIVE_SETTING_CONSTANTS_ISSUANCE_REPAYMENT).toPromise().then(t=>{t.forEach(t=>{t.category===m.J.ACM_INCENTIVE_REPAYMENT?e.repaymentsBasedOn.push(t):t.category===m.J.FREQUENCY?e.frequencies.push(t):t.category===m.J.INCENTIVE_SETTING_TYPE&&e.incentiveTypes.push(t)})})})()}createFormActiveCustomer(){this.activeCustomerForm=this.formBuilder.group({from0:["",o.kI.required],to0:["",o.kI.required]})}getActiveCustomers(){var e=this;return(0,d.Z)(function*(){const t=new I;if(t.category=m.J.ACTIVE_CUSTOMER,null!=e.productEntity&&(t.productId=e.productEntity.id),null!=e.frequency){const n=new f;n.id=e.frequency.id,t.frequency=n}e.frequencySelected&&e.productSelected&&(e.activeCustomerIndex=0,yield e.incentiveService.getIncentiveSettings(t).subscribe(t=>{if(t.length>0){e.listActiveCustomers=t;for(let t=0;t<e.listActiveCustomers.length;t++)e.activeCustomerIndex=t,e.activeCustomers.push(e.listActiveCustomers[t]),e.activeCustomerForm.addControl("from"+e.activeCustomerIndex,new o.NI(e.listActiveCustomers[t].from,o.kI.required)),e.activeCustomerForm.addControl("to"+e.activeCustomerIndex,new o.NI(e.listActiveCustomers[t].to,o.kI.required))}else e.activeCustomers.push(new I),e.createFormActiveCustomer()}))})()}addActiveCustomer(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0),this.saveNewActive=!0;const t=new I;this.activeCustomers.push(t),this.activeCustomerIndex++,this.activeCustomerForm.addControl("from"+this.activeCustomerIndex,new o.NI("",o.kI.required)),this.activeCustomerForm.addControl("to"+this.activeCustomerIndex,new o.NI("",o.kI.required))}saveActiveCustomer(e){if(this.devToolsServices.makeFormAsTouched(this.activeCustomerForm),this.activeCustomerForm.valid)if(null==this.activeCustomers[e].id){let t=0;this.listActiveCustomers.length>0&&(t=Math.max.apply(Math,this.listActiveCustomers.map(e=>e.ordre)));const n=t+1,i=new I;i.frequency=this.frequency,i.productId=this.productEntity.id,i.category="ACTIVE_CUSTOMER",i.ordre=n,i.from=this.activeCustomerForm.controls["from"+e].value,i.to=this.activeCustomerForm.controls["to"+e].value;const r=this.listActiveCustomers[this.listActiveCustomers.length-1].to;if(i.from<r)return void this.activeCustomerForm.controls["from"+e].setValidators([o.kI.min(r)]);if(i.from>i.to)return void this.activeCustomerForm.controls["to"+e].setValidators([o.kI.min(i.from)]);this.incentiveService.createIncentiveSetting(i).subscribe(t=>{this.devToolsServices.openToast(0,"alert.success"),this.listActiveCustomers.push(t),this.activeCustomers[e]=t,this.saveNewActive=!1})}else{if(this.listActiveCustomers[e].from=this.activeCustomerForm.controls["from"+e].value,this.listActiveCustomers[e].to=this.activeCustomerForm.controls["to"+e].value,e>0){if(this.listActiveCustomers[e].from<this.listActiveCustomers[e-1].to)return void this.activeCustomerForm.controls["from"+e].setValidators([o.kI.min(this.listActiveCustomers[e-1].to)]);if(this.listActiveCustomers[e].from>this.listActiveCustomers[e].to)return void this.activeCustomerForm.controls["to"+e].setValidators([o.kI.min(this.listActiveCustomers[e].from)]);if(e!==this.activeCustomerIndex&&this.listActiveCustomers[e].to>this.activeCustomerForm.controls["from"+(e+1)].value)return void this.activeCustomerForm.controls["to"+e].setValidators([o.kI.max(this.activeCustomerForm.controls["from"+(e+1)].value)])}else{if(this.activeCustomerForm.controls["from"+e].value<0)return void this.activeCustomerForm.controls["from"+e].setValidators([o.kI.min(0)]);if(this.listActiveCustomers[e].from>this.listActiveCustomers[e].to)return void this.activeCustomerForm.controls["to"+e].setValidators([o.kI.min(this.listActiveCustomers[e].from)])}this.incentiveService.updateIncentiveSetting(this.listActiveCustomers[e]).subscribe(t=>{this.devToolsServices.openToast(0,"alert.success"),this.listActiveCustomers[e]=t})}}deleteActiveCustomer(e){this.listActiveCustomers.length>0?this.devToolsServices.openConfirmDialogWithoutRedirect("confirmation_dialog."+m.J.DELETE_INCENTIVE_SETTING).afterClosed().subscribe(t=>{t&&(this.activeCustomers[e].delete=!0,this.activeCustomerForm.removeControl("from"+e),this.activeCustomerForm.removeControl("to"+e),null!=this.activeCustomers[e].id&&this.incentiveService.deleteIncentiveSetting(this.activeCustomers[e].id).subscribe(()=>{this.activeCustomerForm=this.formBuilder.group({}),this.activeCustomers=[],this.getActiveCustomers(),this.devToolsServices.openToast(0,"alert.success")}),this.saveNewActive=!1)}):(this.activeCustomers[e].delete=!0,this.activeCustomerForm.removeControl("from"+e),this.activeCustomerForm.removeControl("to"+e),this.saveNewActive=!1)}createFormProdictivity(){this.productivityForm=this.formBuilder.group({from0:["",o.kI.required],to0:["",o.kI.required]})}getProdictivity(){var e=this;return(0,d.Z)(function*(){const t=new I;if(t.category=m.J.PRODUCTIVITY,null!=e.productEntity&&(t.productId=e.productEntity.id),null!=e.frequency){const n=new f;n.id=e.frequency.id,t.frequency=n}e.frequencySelected&&e.productSelected&&(e.productivityIndex=0,yield e.incentiveService.getIncentiveSettings(t).subscribe(t=>{if(t.length>0){e.listProductivities=t;for(let t=0;t<e.listProductivities.length;t++)e.productivityIndex=t,e.productivities.push(e.listProductivities[t]),e.productivityForm.addControl("from"+e.productivityIndex,new o.NI(e.listProductivities[t].from,o.kI.required)),e.productivityForm.addControl("to"+e.productivityIndex,new o.NI(e.listProductivities[t].to,o.kI.required))}else e.productivities.push(new I),e.createFormProdictivity()}))})()}addProductivity(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0),this.saveNewProductivity=!0;const t=new I;this.productivities.push(t),this.productivityIndex++,this.productivityForm.addControl("from"+this.productivityIndex,new o.NI("",o.kI.required)),this.productivityForm.addControl("to"+this.productivityIndex,new o.NI("",o.kI.required))}saveProductivity(e){if(this.devToolsServices.makeFormAsTouched(this.productivityForm),this.productivityForm.valid)if(e>=this.listProductivities.length){let t=0;this.listProductivities.length>0&&(t=Math.max.apply(Math,this.listProductivities.map(e=>e.ordre)));const n=t+1,i=new I;i.frequency=this.frequency,i.productId=this.productEntity.id,i.category="PRODUCTIVITY",i.ordre=n,i.from=this.productivityForm.controls["from"+e].value,i.to=this.productivityForm.controls["to"+e].value;const r=this.listProductivities[this.listProductivities.length-1].to;if(i.from<r)return void this.productivityForm.controls["from"+e].setValidators([o.kI.min(r)]);if(i.from>i.to)return void this.productivityForm.controls["to"+e].setValidators([o.kI.min(i.from)]);this.incentiveService.createIncentiveSetting(i).subscribe(t=>{this.devToolsServices.openToast(0,"alert.success"),this.listProductivities.push(t),this.productivities[e]=t,this.saveNewProductivity=!1})}else{if(this.listProductivities[e].from=this.productivityForm.controls["from"+e].value,this.listProductivities[e].to=this.productivityForm.controls["to"+e].value,e>0){if(this.listProductivities[e].from<this.listProductivities[e-1].to)return void this.productivityForm.controls["from"+e].setValidators([o.kI.min(this.listProductivities[e-1].to)]);if(this.listProductivities[e].from>this.listProductivities[e].to)return void this.productivityForm.controls["to"+e].setValidators([o.kI.min(this.listProductivities[e].from)]);if(e!==this.productivityIndex&&this.listProductivities[e].to>this.productivityForm.controls["from"+(e+1)].value)return void this.productivityForm.controls["to"+e].setValidators([o.kI.max(this.productivityForm.controls["from"+(e+1)].value)])}else{if(this.productivityForm.controls["from"+e].value<0)return void this.productivityForm.controls["from"+e].setValidators([o.kI.min(0)]);if(this.listProductivities[e].from>this.listProductivities[e].to)return void this.productivityForm.controls["to"+e].setValidators([o.kI.min(this.listProductivities[e].from)])}this.incentiveService.updateIncentiveSetting(this.listProductivities[e]).subscribe(t=>{this.devToolsServices.openToast(0,"alert.success"),this.listProductivities[e]=t})}}deleteProductivity(e){this.listProductivities.length>0?this.devToolsServices.openConfirmDialogWithoutRedirect("confirmation_dialog."+m.J.DELETE_INCENTIVE_SETTING).afterClosed().subscribe(t=>{t&&(this.productivities[e].delete=!0,this.productivityForm.removeControl("from"+e),this.productivityForm.removeControl("to"+e),null!=this.productivities[e].id&&this.incentiveService.deleteIncentiveSetting(this.productivities[e].id).subscribe(()=>{this.productivityForm=this.formBuilder.group({}),this.productivities=[],this.getProdictivity(),this.devToolsServices.openToast(0,"alert.success")}),this.saveNewProductivity=!1)}):(this.productivities[e].delete=!0,this.productivityForm.removeControl("from"+e),this.productivityForm.removeControl("to"+e),this.saveNewProductivity=!1)}createFormRiskLevel(){this.riskLevelForm=this.formBuilder.group({from0:["",o.kI.required],to0:["",o.kI.required]})}getRiskLevel(){var e=this;return(0,d.Z)(function*(){const t=new I;if(t.category=m.J.RISK_LEVEL,null!=e.productEntity&&(t.productId=e.productEntity.id),null!=e.frequency){const n=new f;n.id=e.frequency.id,t.frequency=n}e.frequencySelected&&e.productSelected&&(e.riskLevelIndex=0,yield e.incentiveService.getIncentiveSettings(t).subscribe(t=>{if(t.length>0){e.listRiskLevels=t;for(let t=0;t<e.listRiskLevels.length;t++)e.riskLevelIndex=t,e.riskLevels.push(e.listRiskLevels[t]),e.riskLevelForm.addControl("from"+e.riskLevelIndex,new o.NI(e.listRiskLevels[t].from,o.kI.required)),e.riskLevelForm.addControl("to"+e.riskLevelIndex,new o.NI(e.listRiskLevels[t].to,o.kI.required))}else e.riskLevels.push(new I),e.createFormRiskLevel()}))})()}addRiskLevel(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0),this.saveNewRisk=!0;const t=new I;this.riskLevels.push(t),this.riskLevelIndex++,this.riskLevelForm.addControl("from"+this.riskLevelIndex,new o.NI("",o.kI.required)),this.riskLevelForm.addControl("to"+this.riskLevelIndex,new o.NI("",o.kI.required))}saveRiskLevel(e){if(this.devToolsServices.makeFormAsTouched(this.riskLevelForm),this.riskLevelForm.valid)if(e>=this.listRiskLevels.length){let t=0;this.listRiskLevels.length>0&&(t=Math.max.apply(Math,this.listRiskLevels.map(e=>e.ordre)));const n=t+1,i=new I;i.frequency=this.frequency,i.productId=this.productEntity.id,i.category="RISK_LEVEL",i.ordre=n,i.from=this.riskLevelForm.controls["from"+e].value,i.to=this.riskLevelForm.controls["to"+e].value;const r=this.listRiskLevels[this.listRiskLevels.length-1].to;if(i.from<r)return void this.riskLevelForm.controls["from"+e].setValidators([o.kI.min(r)]);if(i.from>i.to)return void this.riskLevelForm.controls["to"+e].setValidators([o.kI.min(i.from)]);this.incentiveService.createIncentiveSetting(i).subscribe(t=>{this.devToolsServices.openToast(0,"alert.success"),this.listRiskLevels.push(t),this.riskLevels[e]=t,this.saveNewRisk=!1})}else{if(this.listRiskLevels[e].from=this.riskLevelForm.controls["from"+e].value,this.listRiskLevels[e].to=this.riskLevelForm.controls["to"+e].value,e>0){if(this.listRiskLevels[e].from<this.listRiskLevels[e-1].to)return void this.riskLevelForm.controls["from"+e].setValidators([o.kI.min(this.listRiskLevels[e-1].to)]);if(this.listRiskLevels[e].from>this.listRiskLevels[e].to)return void this.riskLevelForm.controls["to"+e].setValidators([o.kI.min(this.listRiskLevels[e].from)]);if(e!==this.riskLevelIndex&&this.listRiskLevels[e].to>this.riskLevelForm.controls["from"+(e+1)].value)return void this.riskLevelForm.controls["to"+e].setValidators([o.kI.max(this.riskLevelForm.controls["from"+(e+1)].value)])}else{if(this.riskLevelForm.controls["from"+e].value<0)return void this.riskLevelForm.controls["from"+e].setValidators([o.kI.min(0)]);if(this.listRiskLevels[e].from>this.listRiskLevels[e].to)return void this.riskLevelForm.controls["to"+e].setValidators([o.kI.min(this.listRiskLevels[e].from)])}this.incentiveService.updateIncentiveSetting(this.listRiskLevels[e]).subscribe(t=>{this.devToolsServices.openToast(0,"alert.success"),this.listRiskLevels[e]=t})}}deleteRiskLevel(e){this.devToolsServices.openConfirmDialogWithoutRedirect("confirmation_dialog."+m.J.DELETE_INCENTIVE_SETTING).afterClosed().subscribe(t=>{t&&(this.riskLevels[e].delete=!0,this.riskLevelForm.removeControl("from"+e),this.riskLevelForm.removeControl("to"+e),null!=this.riskLevels[e].id&&this.incentiveService.deleteIncentiveSetting(this.riskLevels[e].id).subscribe(()=>{this.riskLevelForm=this.formBuilder.group({}),this.riskLevels=[],this.getRiskLevel(),this.devToolsServices.openToast(0,"alert.success")}),this.saveNewRisk=!1)})}createFormDiscount(){this.discountForm=this.formBuilder.group({from0:["",o.kI.required],to0:["",o.kI.required],discount0:["",o.kI.required]})}getDiscounts(){var e=this;return(0,d.Z)(function*(){const t=new I;if(t.category=m.J.DISCOUNT_FROM_TOTAL,null!=e.productEntity&&(t.productId=e.productEntity.id),null!=e.frequency){const n=new f;n.id=e.frequency.id,t.frequency=n}e.frequencySelected&&e.productSelected&&(e.discountIndex=0,yield e.incentiveService.getIncentiveSettings(t).subscribe(t=>{if(t.length>0){e.listDiscounts=t;for(let t=0;t<e.listDiscounts.length;t++)e.discountIndex=t,e.discounts.push(e.listDiscounts[t]),e.discountForm.addControl("from"+e.discountIndex,new o.NI(e.listDiscounts[t].from,o.kI.required)),e.discountForm.addControl("to"+e.discountIndex,new o.NI(e.listDiscounts[t].to,o.kI.required)),e.discountForm.addControl("discount"+e.discountIndex,new o.NI(e.listDiscounts[t].discount,o.kI.required))}else e.discounts.push(new I),e.createFormDiscount()}))})()}addDiscount(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0),this.saveNewDiscount=!0;const t=new I;this.discounts.push(t),this.discountIndex++,this.discountForm.addControl("from"+this.discountIndex,new o.NI("",o.kI.required)),this.discountForm.addControl("to"+this.discountIndex,new o.NI("",o.kI.required)),this.discountForm.addControl("discount"+this.discountIndex,new o.NI("",o.kI.required))}saveDiscount(e){if(this.devToolsServices.makeFormAsTouched(this.discountForm),this.discountForm.valid)if(e>=this.listDiscounts.length){let t=0;this.listDiscounts.length>0&&(t=Math.max.apply(Math,this.listDiscounts.map(e=>e.ordre)));const n=t+1,i=new I;i.frequency=this.frequency,i.productId=this.productEntity.id,i.category="DISCOUNT_FROM_TOTAL",i.ordre=n,i.from=this.discountForm.controls["from"+e].value,i.to=this.discountForm.controls["to"+e].value,i.discount=this.discountForm.controls["discount"+e].value;const r=this.listDiscounts[this.listDiscounts.length-1].to;if(i.from<r)return void this.discountForm.controls["from"+e].setValidators([o.kI.min(r)]);if(i.from>i.to)return void this.discountForm.controls["to"+e].setValidators([o.kI.min(i.from)]);this.incentiveService.createIncentiveSetting(i).subscribe(t=>{this.devToolsServices.openToast(0,"alert.success"),this.listDiscounts.push(t),this.discounts[e]=t,this.saveNewDiscount=!1})}else{if(this.listDiscounts[e].from=this.discountForm.controls["from"+e].value,this.listDiscounts[e].to=this.discountForm.controls["to"+e].value,this.listDiscounts[e].discount=this.discountForm.controls["discount"+e].value,e>0){if(this.listDiscounts[e].from<this.listDiscounts[e-1].to)return void this.discountForm.controls["from"+e].setValidators([o.kI.min(this.listDiscounts[e-1].to)]);if(this.listDiscounts[e].from>this.listDiscounts[e].to)return void this.discountForm.controls["to"+e].setValidators([o.kI.min(this.listDiscounts[e].from)]);if(e!==this.discountIndex&&this.listDiscounts[e].to>this.discountForm.controls["from"+(e+1)].value)return void this.discountForm.controls["to"+e].setValidators([o.kI.max(this.discountForm.controls["from"+(e+1)].value)])}else{if(this.discountForm.controls["from"+e].value<0)return void this.discountForm.controls["from"+e].setValidators([o.kI.min(0)]);if(this.listDiscounts[e].from>this.listDiscounts[e].to)return void this.discountForm.controls["to"+e].setValidators([o.kI.min(this.listDiscounts[e].from)])}this.incentiveService.updateIncentiveSetting(this.listDiscounts[e]).subscribe(t=>{this.devToolsServices.openToast(0,"alert.success"),this.listDiscounts[e]=t})}}deleteDiscount(e){this.devToolsServices.openConfirmDialogWithoutRedirect("confirmation_dialog."+m.J.DELETE_INCENTIVE_SETTING).afterClosed().subscribe(t=>{t&&(this.discounts[e].delete=!0,this.discountForm.removeControl("from"+e),this.discountForm.removeControl("to"+e),this.discountForm.removeControl("discount"+e),null!=this.discounts[e].id&&this.incentiveService.deleteIncentiveSetting(this.discounts[e].id).subscribe(()=>{this.discountForm=this.formBuilder.group({}),this.discounts=[],this.getDiscounts(),this.devToolsServices.openToast(0,"alert.success")}),this.saveNewDiscount=!1)})}createFormBranchProd(){this.branchProdForm=this.formBuilder.group({role0:["",o.kI.required],minAmount0:["",o.kI.required],minCustomers0:["",o.kI.required]})}getBranchProdLevels(){var e=this;return(0,d.Z)(function*(){const t=new u;if(null!=e.productEntity&&(t.productId=e.productEntity.id),null!=e.frequency){const n=new f;n.id=e.frequency.id,t.frequency=n}e.frequencySelected&&e.productSelected&&(e.branchIndex=0,yield e.issuanceRepaymentService.getBranchProdLevels(t).subscribe(t=>{if(t.length>0){e.listBranchProdLevels=t;for(let t=0;t<e.listBranchProdLevels.length;t++)e.branchIndex=t,e.branchProdLevels.push(e.listBranchProdLevels[t]),e.branchProdForm.addControl("role"+e.branchIndex,new o.NI(e.listBranchProdLevels[t].role,o.kI.required)),e.branchProdForm.addControl("minAmount"+e.branchIndex,new o.NI(e.listBranchProdLevels[t].minAmount,o.kI.required)),e.branchProdForm.addControl("minCustomers"+e.branchIndex,new o.NI(e.listBranchProdLevels[t].minNumberCustomer,o.kI.required))}else e.branchProdLevels.push(new u),e.createFormBranchProd()}))})()}addBranchProdLevel(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"start"})},0),this.saveBranchProd=!0;const t=new u;this.branchProdLevels.push(t),this.branchIndex++,this.branchProdForm.addControl("role"+this.branchIndex,new o.NI("",o.kI.required)),this.branchProdForm.addControl("minAmount"+this.branchIndex,new o.NI("",o.kI.required)),this.branchProdForm.addControl("minCustomers"+this.branchIndex,new o.NI("",o.kI.required))}saveBranchProdLevel(e){if(this.devToolsServices.makeFormAsTouched(this.branchProdForm),this.branchProdForm.valid)if(e>=this.listBranchProdLevels.length){let t=0;this.listBranchProdLevels.length>0&&(t=Math.max.apply(Math,this.listBranchProdLevels.map(e=>e.ordre)));const n=t+1,i=new u;i.frequency=this.frequency,i.productId=this.productEntity.id,i.ordre=n,i.role=this.branchProdForm.controls["role"+e].value,i.minAmount=this.branchProdForm.controls["minAmount"+e].value,i.minNumberCustomer=this.branchProdForm.controls["minCustomers"+e].value,this.issuanceRepaymentService.createBranchProdLevel(i).subscribe(t=>{this.devToolsServices.openToast(0,"alert.success"),this.listBranchProdLevels.push(t),this.branchProdLevels[e]=t,this.saveBranchProd=!1})}else this.listBranchProdLevels[e].role=this.branchProdForm.controls["role"+e].value,this.listBranchProdLevels[e].minAmount=this.branchProdForm.controls["minAmount"+e].value,this.listBranchProdLevels[e].minNumberCustomer=this.branchProdForm.controls["minCustomers"+e].value,this.issuanceRepaymentService.updateBranchProdLevel(this.listBranchProdLevels[e]).subscribe(t=>{this.devToolsServices.openToast(0,"alert.success"),this.listBranchProdLevels[e]=t})}deleteBranchProdLevel(e){this.devToolsServices.openConfirmDialogWithoutRedirect("confirmation_dialog."+m.J.DELETE_INCENTIVE_SETTING).afterClosed().subscribe(t=>{t&&(this.branchProdLevels[e].delete=!0,this.branchProdForm.removeControl("role"+e),this.branchProdForm.removeControl("minAmount"+e),this.branchProdForm.removeControl("minCustomers"+e),null!=this.branchProdLevels[e].id&&this.issuanceRepaymentService.deleteBranchProdLevel(this.branchProdLevels[e].id).subscribe(()=>{this.devToolsServices.openToast(0,"alert.success")}),this.saveBranchProd=!1)})}createFormRepayment(){this.repaymentForm=this.formBuilder.group({role0:["",o.kI.required],activeCustomer0:["",o.kI.required],productivity0:["",o.kI.required],riskLevel0:["",o.kI.required],incentiveType0:["",o.kI.required],incentiveValue0:["",o.kI.required],basedOn0:["",o.kI.required]})}getIssuanceAndRepayment(){const e=new h;if(e.pageSize=this.pageSize,e.params=new v,null!=this.productEntity&&(e.params.productId=this.productEntity.id),null!=this.frequency){const t=new f;t.id=this.frequency.id,e.params.frequency=t}this.frequencySelected&&this.productSelected&&(this.repaymentIndex=0,this.issuanceRepaymentService.findPaginationRepayment(e).subscribe(e=>{if(this.pageSize=e.pageSize,this.totalElements=e.totalElements,this.pageNumber=e.pageNumber+1,this.incentiveRepayments=[],e.totalElements>0){this.incentiveRepayments=e.resultsIncentiveRepayments;for(let e=0;e<this.incentiveRepayments.length;e++)this.repaymentIndex=e,this.repayments.push(this.incentiveRepayments[e]),this.repaymentForm.addControl("role"+this.repaymentIndex,new o.NI(this.incentiveRepayments[e].role,o.kI.required)),this.repaymentForm.addControl("activeCustomer"+this.repaymentIndex,new o.NI(this.incentiveRepayments[e].activeCustomerId,o.kI.required)),this.repaymentForm.addControl("productivity"+this.repaymentIndex,new o.NI(this.incentiveRepayments[e].productivityId,o.kI.required)),this.repaymentForm.addControl("riskLevel"+this.repaymentIndex,new o.NI(this.incentiveRepayments[e].riskLevelId,o.kI.required)),this.repaymentForm.addControl("incentiveType"+this.repaymentIndex,new o.NI(this.incentiveRepayments[e].incentiveType,o.kI.required)),this.repaymentForm.addControl("incentiveValue"+this.repaymentIndex,new o.NI(this.incentiveRepayments[e].incentiveValue,o.kI.required)),this.repaymentForm.addControl("basedOn"+this.repaymentIndex,new o.NI(this.incentiveRepayments[e].basedOnId,o.kI.required))}else this.repayments.push(new v),this.createFormRepayment()}))}reloadRepaymentIncentive(e){const t=new h;t.pageNumber=e-1,t.pageSize=this.pageSize,t.params=this.repaymentEntity,this.repaymentIndex=0,this.issuanceRepaymentService.findPaginationRepayment(t).subscribe(e=>{if(this.pageSize=e.pageSize,this.totalElements=e.totalElements,this.pageNumber=e.pageNumber+1,this.incentiveRepayments=[],e.totalElements>0){this.incentiveRepayments=e.resultsIncentiveRepayments,this.repayments=[],this.repaymentForm=this.formBuilder.group({});for(let e=0;e<this.incentiveRepayments.length;e++)this.repaymentIndex=e,this.repayments.push(this.incentiveRepayments[e]),this.repaymentForm.addControl("role"+this.repaymentIndex,new o.NI(this.incentiveRepayments[e].role,o.kI.required)),this.repaymentForm.addControl("activeCustomer"+this.repaymentIndex,new o.NI(this.incentiveRepayments[e].activeCustomerId,o.kI.required)),this.repaymentForm.addControl("productivity"+this.repaymentIndex,new o.NI(this.incentiveRepayments[e].productivityId,o.kI.required)),this.repaymentForm.addControl("riskLevel"+this.repaymentIndex,new o.NI(this.incentiveRepayments[e].riskLevelId,o.kI.required)),this.repaymentForm.addControl("incentiveType"+this.repaymentIndex,new o.NI(this.incentiveRepayments[e].incentiveType,o.kI.required)),this.repaymentForm.addControl("incentiveValue"+this.repaymentIndex,new o.NI(this.incentiveRepayments[e].incentiveValue,o.kI.required)),this.repaymentForm.addControl("basedOn"+this.repaymentIndex,new o.NI(this.incentiveRepayments[e].basedOnId,o.kI.required))}})}addRepayment(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0),this.saveRepayment=!0;const t=new v;this.repayments.push(t),this.repaymentIndex++,this.repaymentForm.addControl("role"+this.repaymentIndex,new o.NI("",o.kI.required)),this.repaymentForm.addControl("activeCustomer"+this.repaymentIndex,new o.NI("",o.kI.required)),this.repaymentForm.addControl("productivity"+this.repaymentIndex,new o.NI("",o.kI.required)),this.repaymentForm.addControl("riskLevel"+this.repaymentIndex,new o.NI("",o.kI.required)),this.repaymentForm.addControl("incentiveType"+this.repaymentIndex,new o.NI("",o.kI.required)),this.repaymentForm.addControl("incentiveValue"+this.repaymentIndex,new o.NI("",o.kI.required)),this.repaymentForm.addControl("basedOn"+this.repaymentIndex,new o.NI("",o.kI.required))}saveRepaymentSettings(e){if(this.devToolsServices.makeFormAsTouched(this.repaymentForm),this.repaymentForm.valid)if(e>=this.incentiveRepayments.length){let t=0;this.incentiveRepayments.length>0&&(t=Math.max.apply(Math,this.incentiveRepayments.map(e=>e.ordre)));const n=t+1,i=new v;i.frequency=this.frequency,i.productId=this.productEntity.id,i.ordre=n,i.role=this.repaymentForm.controls["role"+e].value,i.activeCustomerId=this.repaymentForm.controls["activeCustomer"+e].value,i.productivityId=this.repaymentForm.controls["productivity"+e].value,i.riskLevelId=this.repaymentForm.controls["riskLevel"+e].value,i.incentiveType=this.repaymentForm.controls["incentiveType"+e].value,i.incentiveValue=this.repaymentForm.controls["incentiveValue"+e].value,i.basedOnId=this.repaymentForm.controls["basedOn"+e].value,this.issuanceRepaymentService.createIncentiveRepayment(i).subscribe(e=>{this.devToolsServices.openToast(0,"alert.success"),this.incentiveRepayments.push(e),this.repayments[this.repaymentIndex]=e,this.saveRepayment=!1})}else this.incentiveRepayments[e].role=this.repaymentForm.controls["role"+e].value,this.incentiveRepayments[e].activeCustomerId=this.repaymentForm.controls["activeCustomer"+e].value,this.incentiveRepayments[e].productivityId=this.repaymentForm.controls["productivity"+e].value,this.incentiveRepayments[e].riskLevelId=this.repaymentForm.controls["riskLevel"+e].value,this.incentiveRepayments[e].incentiveType=this.repaymentForm.controls["incentiveType"+e].value,this.incentiveRepayments[e].incentiveValue=this.repaymentForm.controls["incentiveValue"+e].value,this.incentiveRepayments[e].basedOnId=this.repaymentForm.controls["basedOn"+e].value,this.issuanceRepaymentService.updateIncentiveRepayment(this.incentiveRepayments[e]).subscribe(t=>{this.devToolsServices.openToast(0,"alert.success"),this.incentiveRepayments[e]=t})}deleteIncentiveRepayment(e){this.devToolsServices.openConfirmDialogWithoutRedirect("confirmation_dialog."+m.J.DELETE_INCENTIVE_SETTING).afterClosed().subscribe(t=>{t&&(this.repayments[e].delete=!0,this.repaymentForm.removeControl("role"+e),this.branchProdForm.removeControl("activeCustomer"+e),this.branchProdForm.removeControl("productivity"+e),this.repaymentForm.removeControl("riskLevel"+e),this.branchProdForm.removeControl("incentiveType"+e),this.branchProdForm.removeControl("incentiveValue"+e),this.repaymentForm.removeControl("basedOn"+e),null!=this.repayments[e].id&&this.issuanceRepaymentService.deleteIncentiveRepayment(this.repayments[e].id).subscribe(()=>{this.devToolsServices.openToast(0,"alert.success")}),this.saveRepayment=!1)})}compareIncentiveType(e,t){return e.code===t.code&&e.id===t.id}compareBasedOn(e,t){return e.code===t.code&&e.id===t.id}changeStatusRepaymentSetting(){this.productEntity.incentiveRepayment=this.enabled,this.incentiveService.updateProductCategory(this.productEntity).subscribe(e=>{this.devToolsServices.openToast(0,"alert.success"),this.enabled=e[0].enabled})}applyDiscountRule(){const e=new y;e.code=m.J.ACM_INCENTIVE_REPAYMENT,e.applayDiscountRule=this.applyDiscount,this.issuanceRepaymentService.updateApplyDiscountOrBranch(e).subscribe(e=>{this.devToolsServices.openToast(0,"alert.success")})}applyBranchRule(){const e=new y;e.code=m.J.ACM_INCENTIVE_REPAYMENT,e.appalyBranchProdLevel=this.applyBranch,this.issuanceRepaymentService.updateApplyDiscountOrBranch(e).subscribe(e=>{this.devToolsServices.openToast(0,"alert.success")})}createFilterForm(){this.repaymentFilterForm=this.formBuilder.group({role:[""],activeCustomer:[""],productivity:[""],riskLevel:[""],incentiveType:[""],basedOn:[""]})}onSubmit(){if(this.repaymentFilterForm.controls.role.value&&(this.repaymentEntity.role=this.repaymentFilterForm.controls.role.value),(this.repaymentFilterForm.controls.activeCustomer.value||0===this.repaymentFilterForm.controls.activeCustomer.value)&&(this.repaymentEntity.activeCustomerId=this.repaymentFilterForm.controls.activeCustomer.value),(this.repaymentFilterForm.controls.productivity.value||0===this.repaymentFilterForm.controls.productivity.value)&&(this.repaymentEntity.productivityId=this.repaymentFilterForm.controls.productivity.value),(this.repaymentFilterForm.controls.riskLevel.value||0===this.repaymentFilterForm.controls.riskLevel.value)&&(this.repaymentEntity.riskLevelId=this.repaymentFilterForm.controls.riskLevel.value),(this.repaymentFilterForm.controls.incentiveType.value||0===this.repaymentFilterForm.controls.incentiveType.value)&&(this.repaymentEntity.incentiveType=this.repaymentFilterForm.controls.incentiveType.value),(this.repaymentFilterForm.controls.basedOn.value||0===this.repaymentFilterForm.controls.basedOn.value)&&(this.repaymentEntity.basedOnId=this.repaymentFilterForm.controls.basedOn.value),null!=this.productEntity&&(this.repaymentEntity.productId=this.productEntity.id),null!=this.frequency){const e=new f;e.id=this.frequency.id,this.repaymentEntity.frequency=e}this.repayments=[],this.repaymentForm=this.formBuilder.group({}),this.reloadRepaymentIncentive(1)}reset(){this.pageSize=5,this.page=1,this.repaymentEntity=new v,this.repayments=[],this.repaymentForm=this.formBuilder.group({}),this.getIssuanceAndRepayment(),this.createFilterForm()}}return e.\u0275fac=function(t){return new(t||e)(E.\u0275\u0275directiveInject(S.q),E.\u0275\u0275directiveInject(C.g),E.\u0275\u0275directiveInject(N),E.\u0275\u0275directiveInject(o.qu),E.\u0275\u0275directiveInject(T),E.\u0275\u0275directiveInject(F.R))},e.\u0275cmp=E.\u0275\u0275defineComponent({type:e,selectors:[["app-issuance-repayment-incentives"]],decls:36,vars:24,consts:[[3,"heading","icon","account","status"],[1,"card","row"],[1,"card-header"],[1,"col-xl-11","col-lg-11","col-md-11","col-sm-11"],[1,"card-title","m-0"],[1,"card-body"],[1,"row","pt-3"],[1,"row"],[1,"col-md-2","col-lg-2","col-sm-2"],[1,"col-md-4","col-lg-4","col-sm-4","justify-content-start"],[1,"input-group"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-2","col-lg-2","col-sm-2","d-flex","justify-content-start"],[1,"px-2","mb-0",3,"ngModel","switch-size","switch-animate","switch-off-color","ngModelChange","click"],["class","pt-5",4,"ngIf"],[3,"ngValue"],[1,"pt-5"],[1,"card-header-incentive"],[1,"py-5",3,"formGroup"],[1,"col-xl-10","col-lg-10","col-md-10","col-sm-10"],[1,"table"],[4,"ngFor","ngForOf"],[1,"scroll-incentive"],["scrollToNewActiveCustomer",""],[1,"col-xl-2","col-lg-2","col-md-2","col-sm-2"],["type","button",1,"btn-shadow","d-inline-flex","align-items-center","btn","btn-primary",3,"disabled","click"],["name","plus",1,"mx-2"],["aria-hidden","true","ng-reflect-klass","fa fa-plus",1,"fa","fa-plus"],["scrollToNewProductivity",""],["scrollToNewRisk",""],["scrollToNewDiscount",""],["scrollToNewBranchProd",""],[1,"row","pt-3","px-1"],[1,"col-xl-3","col-sm-4","d-flex","justify-content-start"],[1,"pt-2","px-3"],[1,"col","d-flex","justify-content-start"],[1,"row","px-1"],[1,"divider","mb-0"],["id","static-1"],["ngbPanelTitle",""],["ngbPanelContent",""],[3,"formGroup"],["scrollToNewRepayment",""],[1,"col-xl-12","col-md-12","px-0","mx-0","row"],[1,"col-xl-9","col-md-9"],["size","sm",3,"collectionSize","page","pageSize","maxSize","boundaryLinks","pageChange"],[1,"col-xl-1","col-lg-1","col-md-1","col-sm-1"],[4,"ngIf"],["type","number",1,"form-control",3,"formControlName"],[1,"row","d-flex","justify-content-end","px-3"],[1,"px-2"],[1,"btn","btn-success",3,"click"],[1,"pe-7s-check","btn-icon-wrapper","text-white"],[1,"btn","btn-danger",3,"click"],[1,"pe-7s-trash","btn-icon-wrapper","text-white"],[1,"form-control",3,"formControlName"],[1,"card-header--title"],[1,"d-flex","flex-row","d-flex","justify-content-center"],[1,"col"],[1,"position-relative","form-group"],["formControlName","role","name","role",1,"form-control"],["formControlName","activeCustomer","name","activeCustomer",1,"form-control"],["formControlName","productivity","name","productivity",1,"form-control"],["formControlName","riskLevel","name","riskLevel",1,"form-control"],["formControlName","incentiveType","name","incentiveType",1,"form-control"],["formControlName","basedOn","name","basedOn",1,"form-control"],[1,"d-flex","position-relative","form-group","pt-4","mt-1"],[1,"btn","btn-primary",3,"click"],[1,"form-control",3,"formControlName","compareWith"],["type","text",1,"form-control",3,"formControlName"],[1,"col-xl-6","col-sm-12","py-1","px-0","d-flex","justify-content-center"]],template:function(e,t){1&e&&(E.\u0275\u0275element(0,"app-page-title",0),E.\u0275\u0275pipe(1,"translate"),E.\u0275\u0275elementStart(2,"div",1),E.\u0275\u0275elementStart(3,"div",2),E.\u0275\u0275elementStart(4,"div",3),E.\u0275\u0275elementStart(5,"div",4),E.\u0275\u0275text(6),E.\u0275\u0275pipe(7,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(8,"div",5),E.\u0275\u0275elementStart(9,"div",6),E.\u0275\u0275elementStart(10,"div",3),E.\u0275\u0275elementStart(11,"div",7),E.\u0275\u0275elementStart(12,"div",8),E.\u0275\u0275elementStart(13,"label"),E.\u0275\u0275text(14),E.\u0275\u0275pipe(15,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(16,"div",9),E.\u0275\u0275elementStart(17,"div",10),E.\u0275\u0275elementStart(18,"select",11),E.\u0275\u0275listener("ngModelChange",function(e){return t.productEntity=e})("ngModelChange",function(e){return t.selectProduct(e)}),E.\u0275\u0275template(19,_,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(20,"div",13),E.\u0275\u0275elementStart(21,"div"),E.\u0275\u0275elementStart(22,"div",10),E.\u0275\u0275elementStart(23,"bSwitch",14),E.\u0275\u0275listener("ngModelChange",function(e){return t.enabled=e})("click",function(){return t.changeStatusRepaymentSetting()}),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(24,"div",6),E.\u0275\u0275elementStart(25,"div",3),E.\u0275\u0275elementStart(26,"div",7),E.\u0275\u0275elementStart(27,"div",8),E.\u0275\u0275elementStart(28,"label"),E.\u0275\u0275text(29),E.\u0275\u0275pipe(30,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(31,"div",9),E.\u0275\u0275elementStart(32,"div",10),E.\u0275\u0275elementStart(33,"select",11),E.\u0275\u0275listener("ngModelChange",function(e){return t.frequency=e})("ngModelChange",function(e){return t.selectFrequency(e)}),E.\u0275\u0275template(34,O,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275template(35,Te,181,112,"div",15),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e&&(E.\u0275\u0275property("heading",E.\u0275\u0275pipeBind1(1,16,"sidebar.issuance_and_repayment_incentives"))("icon","pe-7s-gift")("account","")("status",-1),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(7,18,"incentive.issuance_and_repayment.issuance_and_repayment_incentives_settings")),E.\u0275\u0275advance(8),E.\u0275\u0275textInterpolate1("",E.\u0275\u0275pipeBind1(15,20,"incentive.select_category")," : "),E.\u0275\u0275advance(4),E.\u0275\u0275property("ngModel",t.productEntity),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.productEntitys),E.\u0275\u0275advance(4),E.\u0275\u0275property("ngModel",t.enabled)("switch-size","small")("switch-animate",!0)("switch-off-color","danger"),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate1("",E.\u0275\u0275pipeBind1(30,22,"incentive.select_frequency")," : "),E.\u0275\u0275advance(4),E.\u0275\u0275property("ngModel",t.frequency),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.frequencies),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",t.productSelected&&t.frequencySelected))},directives:[R.T,o.EJ,w.oH,o.JJ,o.On,i.NgForOf,a.U,i.NgIf,o.YN,o.Kr,o._Y,o.JL,o.sg,w.MU,k.gY,k.Gk,k.Cu,k.gW,k.N9,o.wV,o.Fj,o.u,w.HK],pipes:[r.X$],styles:[""]}),e})();class Re{}class we{}let ke=(()=>{class e{constructor(e){this.httpClient=e}getIncentiveOperations(e){return this.httpClient.post(x.f.FIND_INCENTIVE_OPERATION,e)}createOperationIncentive(e){return this.httpClient.post(x.f.CREATE_INCENTIVE_OPERATION,e)}updateOperationIncentive(e){return this.httpClient.put(x.f.UPDATE_INCENTIVE_OPERATION,e)}deleteOperationIncentive(e){return this.httpClient.delete(x.f.DELETE_INCENTIVE_OPERATION+e)}findPagination(e){return this.httpClient.post(x.f.FIND_PAGINATION_OPERATION,e)}}return e.\u0275fac=function(t){return new(t||e)(E.\u0275\u0275inject(b.eN))},e.\u0275prov=E.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function _e(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.description," ")}}function Oe(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.description," ")}}function Pe(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e.code),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.libelle," ")}}function Ve(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"select",32),E.\u0275\u0275template(2,Pe,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index,t=E.\u0275\u0275nextContext(2);E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","role",e,""),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.groupeEntitys)}}function Le(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.description," ")}}function Be(e,t){if(1&e){const e=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"select",33),E.\u0275\u0275listener("ngModelChange",function(t){E.\u0275\u0275restoreView(e);const n=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).onChangeIncentiveType(t,n)}),E.\u0275\u0275template(2,Le,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()}if(2&e){const e=E.\u0275\u0275nextContext().index,t=E.\u0275\u0275nextContext(2);E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","incentiveType",e,""),E.\u0275\u0275property("compareWith",t.compareIncentiveType),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.incentiveTypes)}}function Ae(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275element(1,"input",34),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index;E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","incentiveValue",e,"")}}function qe(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.description," ")}}function Me(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"select",35),E.\u0275\u0275template(2,qe,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index,t=E.\u0275\u0275nextContext(2);E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","basedOn",e,""),E.\u0275\u0275property("compareWith",t.compareBasedOn),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.operationsBasedOn)}}function De(e,t){if(1&e){const e=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"div",36),E.\u0275\u0275elementStart(2,"div",37),E.\u0275\u0275elementStart(3,"button",38),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).saveOperationSettings(t)}),E.\u0275\u0275element(4,"i",39),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(5,"div",37),E.\u0275\u0275elementStart(6,"button",40),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).deleteIncentiveOperation(t)}),E.\u0275\u0275element(7,"i",41),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()}}function Ge(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"tr"),E.\u0275\u0275template(1,Ve,3,2,"td",31),E.\u0275\u0275template(2,Be,3,3,"td",31),E.\u0275\u0275template(3,Ae,2,1,"td",31),E.\u0275\u0275template(4,Me,3,3,"td",31),E.\u0275\u0275template(5,De,8,0,"td",31),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete)}}function Ye(e,t){if(1&e){const e=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"div",17),E.\u0275\u0275elementStart(1,"form",18),E.\u0275\u0275elementStart(2,"div",7),E.\u0275\u0275elementStart(3,"div",19),E.\u0275\u0275elementStart(4,"table",20),E.\u0275\u0275elementStart(5,"tr"),E.\u0275\u0275elementStart(6,"th"),E.\u0275\u0275text(7),E.\u0275\u0275pipe(8,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(9,"th"),E.\u0275\u0275text(10),E.\u0275\u0275pipe(11,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(12,"th"),E.\u0275\u0275text(13),E.\u0275\u0275pipe(14,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(15,"th"),E.\u0275\u0275text(16),E.\u0275\u0275pipe(17,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275template(18,Ge,6,5,"tr",21),E.\u0275\u0275elementEnd(),E.\u0275\u0275element(19,"div",22,23),E.\u0275\u0275elementStart(21,"div",24),E.\u0275\u0275elementStart(22,"div",25),E.\u0275\u0275elementStart(23,"ngb-pagination",26),E.\u0275\u0275listener("pageChange",function(t){return E.\u0275\u0275restoreView(e),E.\u0275\u0275nextContext().pageNumber=t})("pageChange",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext();return t.reloadIncentiveOperations(t.pageNumber,"NUMBER")}),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(24,"div",27),E.\u0275\u0275elementStart(25,"button",28),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275reference(20);return E.\u0275\u0275nextContext().addOperation(t)}),E.\u0275\u0275elementStart(26,"fa",29),E.\u0275\u0275element(27,"i",30),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()}if(2&e){const e=E.\u0275\u0275nextContext();E.\u0275\u0275advance(1),E.\u0275\u0275property("formGroup",e.operationIncentiveForm),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(8,12,"incentive.role")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(11,14,"incentive.incentive_type")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(14,16,"incentive.incentive_value")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(17,18,"incentive.based_on")),E.\u0275\u0275advance(2),E.\u0275\u0275property("ngForOf",e.operations),E.\u0275\u0275advance(5),E.\u0275\u0275property("collectionSize",e.totalElements)("page",e.pageNumber)("pageSize",e.pageSize)("maxSize",3)("boundaryLinks",!0),E.\u0275\u0275advance(2),E.\u0275\u0275property("disabled",e.saveOperation)}}let ze=(()=>{class e{constructor(e,t,n,i,r,o){this.loanManagementService=e,this.formBuilder=t,this.incentiveService=n,this.settingsService=i,this.operationIncentivesService=r,this.devToolsServices=o,this.productEntitys=[],this.productSelected=!1,this.frequencySelected=!1,this.groupeEntitys=[],this.groupeEntity=new p.P,this.frequencies=[],this.incentiveTypes=[],this.operationsBasedOn=[],this.operations=[],this.incentiveOperations=[],this.operationIndex=0,this.pageSize=5,this.disableBasedOn=!0,this.saveOperation=!1}ngOnInit(){this.getProduct().then(()=>{this.getIncentiveConstantsSettingsbyCategories().then(()=>{this.frequencies.length>0&&this.productEntitys.length>0&&(this.frequency=this.frequencies[0],this.frequencySelected=!0,this.productEntity=this.productEntitys[0],this.productSelected=!0,this.getIncentiveOperations())})}),this.operationIncentiveForm=this.formBuilder.group({}),this.getRoles(),this.getSettingStatus()}reloadIncentiveOperations(e){const t=new we;t.pageNumber=e-1,t.pageSize=this.pageSize,t.params=new Re,this.operationIndex=0,this.operationIncentivesService.findPagination(t).subscribe(e=>{if(this.pageSize=e.pageSize,this.totalElements=e.totalElements,this.pageNumber=e.pageNumber+1,this.incentiveOperations=[],e.totalElements>0){this.incentiveOperations=e.resultsIncentiveOperations,this.operations=[],this.operationIncentiveForm=this.formBuilder.group({});for(let e=0;e<this.incentiveOperations.length;e++)this.operationIndex=e,this.operations.push(this.incentiveOperations[e]),this.operationIncentiveForm.addControl("role"+this.operationIndex,new o.NI(this.incentiveOperations[e].role,o.kI.required)),this.operationIncentiveForm.addControl("incentiveType"+this.operationIndex,new o.NI(this.incentiveOperations[e].incentiveType,o.kI.required)),this.operationIncentiveForm.addControl("incentiveValue"+this.operationIndex,new o.NI(this.incentiveOperations[e].incentiveValue,o.kI.required)),this.operationIncentiveForm.addControl("basedOn"+this.operationIndex,new o.NI(this.incentiveOperations[e].basedOnId,o.kI.required))}else this.operations.push(new Re),this.createForm()})}getSettingStatus(){const e=new y;e.code=m.J.ACM_INCENTIVE_OPERATION,this.incentiveService.getStatusIncentiveSettingsByCode(e).subscribe(e=>{this.incentiveSettingRunEntity=e})}selectProduct(e){this.productEntity=e,this.enabled=e.incentiveOperation,this.productSelected=!0,this.operationIncentiveForm=this.formBuilder.group({}),this.operations=[],this.saveOperation=!1,this.getIncentiveOperations()}selectFrequency(e){this.frequency=e,this.frequencySelected=!0,this.operationIncentiveForm=this.formBuilder.group({}),this.operations=[],this.saveOperation=!1,this.getIncentiveOperations()}getIncentiveOperations(){const e=new we;if(e.pageSize=this.pageSize,e.params=new Re,null!=this.productEntity&&(e.params.productId=this.productEntity.id),null!=this.frequency){const t=new f;t.id=this.frequency.id,e.params.frequency=t}this.operationIndex=0,this.operationIncentivesService.findPagination(e).subscribe(e=>{if(this.pageSize=e.pageSize,this.totalElements=e.totalElements,this.pageNumber=e.pageNumber+1,this.incentiveOperations=[],e.totalElements>0){this.incentiveOperations=e.resultsIncentiveOperations;for(let e=0;e<this.incentiveOperations.length;e++)this.operationIndex=e,this.operations.push(this.incentiveOperations[e]),this.operationIncentiveForm.addControl("role"+this.operationIndex,new o.NI(this.incentiveOperations[e].role,o.kI.required)),this.operationIncentiveForm.addControl("incentiveType"+this.operationIndex,new o.NI(this.incentiveOperations[e].incentiveType,o.kI.required)),this.operationIncentiveForm.addControl("incentiveValue"+this.operationIndex,new o.NI(this.incentiveOperations[e].incentiveValue,o.kI.required)),this.operationIncentiveForm.addControl("basedOn"+this.operationIndex,new o.NI(this.incentiveOperations[e].basedOnId,o.kI.required))}else this.operations.push(new Re),this.createForm()})}compareIncentiveType(e,t){return e.code===t.code&&e.id===t.id}compareBasedOn(e,t){return e.code===t.code&&e.id===t.id}getProduct(){var e=this;return(0,d.Z)(function*(){const t=new g;yield e.incentiveService.getProductCategories(t).toPromise().then(t=>{e.productEntitys=t,e.enabled=e.productEntitys[0].incentiveOperation})})()}getIncentiveConstantsSettingsbyCategories(){var e=this;return(0,d.Z)(function*(){yield e.incentiveService.findIncentiveSettingsConstantsByCategories(m.J.INCENTIVE_SETTING_CONSTANTS_OPERATION).toPromise().then(t=>{t.forEach(t=>{t.category===m.J.ACM_INCENTIVE_OPERATION?e.operationsBasedOn.push(t):t.category===m.J.FREQUENCY?e.frequencies.push(t):t.category===m.J.INCENTIVE_SETTING_TYPE&&e.incentiveTypes.push(t)})})})()}getRoles(){this.settingsService.findGroup(this.groupeEntity).subscribe(e=>{this.groupeEntitys=e})}createForm(){this.operationIncentiveForm=this.formBuilder.group({role0:["",o.kI.required],incentiveType0:["",o.kI.required],incentiveValue0:["",o.kI.required],basedOn0:["",o.kI.required]})}addOperation(e){setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0),this.saveOperation=!0;const t=new Re;this.operations.push(t),this.operationIndex++,this.operationIncentiveForm.addControl("role"+this.operationIndex,new o.NI("",o.kI.required)),this.operationIncentiveForm.addControl("incentiveType"+this.operationIndex,new o.NI("",o.kI.required)),this.operationIncentiveForm.addControl("incentiveValue"+this.operationIndex,new o.NI("",o.kI.required)),this.operationIncentiveForm.addControl("basedOn"+this.operationIndex,new o.NI("",o.kI.required))}saveOperationSettings(e){if(this.devToolsServices.makeFormAsTouched(this.operationIncentiveForm),this.operationIncentiveForm.valid)if(e>=this.incentiveOperations.length){let t=0;this.incentiveOperations.length>0&&(t=Math.max.apply(Math,this.incentiveOperations.map(e=>e.ordre)));const n=t+1,i=new Re;i.frequency=this.frequency,i.productId=this.productEntity.id,i.ordre=n,i.role=this.operationIncentiveForm.controls["role"+e].value,i.incentiveType=this.operationIncentiveForm.controls["incentiveType"+e].value,i.incentiveValue=this.operationIncentiveForm.controls["incentiveValue"+e].value,i.basedOnId=this.operationIncentiveForm.controls["basedOn"+e].value,this.operationIncentivesService.createOperationIncentive(i).subscribe(e=>{this.devToolsServices.openToast(0,"alert.success"),this.incentiveOperations.push(e),this.operations[this.operationIndex]=e,this.saveOperation=!1})}else this.incentiveOperations[e].role=this.operationIncentiveForm.controls["role"+e].value,this.incentiveOperations[e].incentiveType=this.operationIncentiveForm.controls["incentiveType"+e].value,this.incentiveOperations[e].incentiveValue=this.operationIncentiveForm.controls["incentiveValue"+e].value,this.incentiveOperations[e].basedOnId=this.operationIncentiveForm.controls["basedOn"+e].value,this.operationIncentivesService.updateOperationIncentive(this.incentiveOperations[e]).subscribe(t=>{this.devToolsServices.openToast(0,"alert.success"),this.incentiveOperations[e]=t})}deleteIncentiveOperation(e){this.devToolsServices.openConfirmDialogWithoutRedirect("confirmation_dialog."+m.J.DELETE_INCENTIVE_SETTING).afterClosed().subscribe(t=>{t&&(this.operations[e].delete=!0,this.operationIncentiveForm.removeControl("basedOn"+e),this.operationIncentiveForm.removeControl("role"+e),this.operationIncentiveForm.removeControl("incentiveType"+e),this.operationIncentiveForm.removeControl("incentiveValue"+e),null!=this.operations[e].id&&this.operationIncentivesService.deleteOperationIncentive(this.operations[e].id).subscribe(()=>{this.devToolsServices.openToast(0,"alert.success")})),this.saveOperation=!1})}EnableDisableOperation(){this.productEntity.incentiveOperation=this.enabled,this.incentiveService.updateProductCategory(this.productEntity).subscribe(e=>{this.devToolsServices.openToast(0,"alert.success"),this.enabled=e[0].enabled})}onChangeIncentiveType(e,t){let n=new f;"FIXED"===e.code?(this.disableBasedOn=!0,n=this.operationsBasedOn.find(e=>"NB_ISSUED_LOANS"===e.code),this.operationIncentiveForm.controls["basedOn"+t].setValue(n)):(n=this.operationsBasedOn.find(e=>"TOTAL_ISSUED"===e.code),this.operationIncentiveForm.controls["basedOn"+t].setValue(n))}}return e.\u0275fac=function(t){return new(t||e)(E.\u0275\u0275directiveInject(S.q),E.\u0275\u0275directiveInject(o.qu),E.\u0275\u0275directiveInject(N),E.\u0275\u0275directiveInject(C.g),E.\u0275\u0275directiveInject(ke),E.\u0275\u0275directiveInject(F.R))},e.\u0275cmp=E.\u0275\u0275defineComponent({type:e,selectors:[["app-operation-incentives"]],decls:36,vars:24,consts:[[3,"heading","icon","account","status"],[1,"card","row"],[1,"card-header"],[1,"col-xl-11","col-lg-11","col-md-11","col-sm-11"],[1,"card-title","m-0"],[1,"card-body"],[1,"row","pt-3"],[1,"row"],[1,"col-md-2","col-lg-2","col-sm-2"],[1,"col-md-4","col-lg-4","col-sm-4","justify-content-start"],[1,"input-group"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-2","col-lg-2","col-sm-2","d-flex","justify-content-start"],[1,"px-2","mb-0",3,"ngModel","switch-size","switch-animate","switch-off-color","ngModelChange","click"],["class","pt-5",4,"ngIf"],[3,"ngValue"],[1,"pt-5"],[3,"formGroup"],[1,"col-xl-10","col-lg-10","col-md-10","col-sm-10"],[1,"table"],[4,"ngFor","ngForOf"],[1,"scroll-incentive"],["scrollToNewOperation",""],[1,"col-xl-12","col-md-12","px-0","mx-0","row"],[1,"col-xl-9","col-md-9"],["size","sm",3,"collectionSize","page","pageSize","maxSize","boundaryLinks","pageChange"],[1,"col-xl-2","col-lg-2","col-md-2","col-sm-2"],["type","button",1,"btn-shadow","d-inline-flex","align-items-center","btn","btn-primary",3,"disabled","click"],["name","plus",1,"mx-2"],["aria-hidden","true","ng-reflect-klass","fa fa-plus",1,"fa","fa-plus"],[4,"ngIf"],[1,"form-control",3,"formControlName"],[1,"form-control",3,"formControlName","compareWith","ngModelChange"],["type","text",1,"form-control",3,"formControlName"],["disabled","",1,"form-control",3,"formControlName","compareWith"],[1,"row","d-flex","justify-content-end","px-3"],[1,"px-2"],[1,"btn","btn-success",3,"click"],[1,"pe-7s-check","btn-icon-wrapper","text-white"],[1,"btn","btn-danger",3,"click"],[1,"pe-7s-trash","btn-icon-wrapper","text-white"]],template:function(e,t){1&e&&(E.\u0275\u0275element(0,"app-page-title",0),E.\u0275\u0275pipe(1,"translate"),E.\u0275\u0275elementStart(2,"div",1),E.\u0275\u0275elementStart(3,"div",2),E.\u0275\u0275elementStart(4,"div",3),E.\u0275\u0275elementStart(5,"div",4),E.\u0275\u0275text(6),E.\u0275\u0275pipe(7,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(8,"div",5),E.\u0275\u0275elementStart(9,"div",6),E.\u0275\u0275elementStart(10,"div",3),E.\u0275\u0275elementStart(11,"div",7),E.\u0275\u0275elementStart(12,"div",8),E.\u0275\u0275elementStart(13,"label"),E.\u0275\u0275text(14),E.\u0275\u0275pipe(15,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(16,"div",9),E.\u0275\u0275elementStart(17,"div",10),E.\u0275\u0275elementStart(18,"select",11),E.\u0275\u0275listener("ngModelChange",function(e){return t.productEntity=e})("ngModelChange",function(e){return t.selectProduct(e)}),E.\u0275\u0275template(19,_e,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(20,"div",13),E.\u0275\u0275elementStart(21,"div"),E.\u0275\u0275elementStart(22,"div",10),E.\u0275\u0275elementStart(23,"bSwitch",14),E.\u0275\u0275listener("ngModelChange",function(e){return t.enabled=e})("click",function(){return t.EnableDisableOperation()}),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(24,"div",6),E.\u0275\u0275elementStart(25,"div",3),E.\u0275\u0275elementStart(26,"div",7),E.\u0275\u0275elementStart(27,"div",8),E.\u0275\u0275elementStart(28,"label"),E.\u0275\u0275text(29),E.\u0275\u0275pipe(30,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(31,"div",9),E.\u0275\u0275elementStart(32,"div",10),E.\u0275\u0275elementStart(33,"select",11),E.\u0275\u0275listener("ngModelChange",function(e){return t.frequency=e})("ngModelChange",function(e){return t.selectFrequency(e)}),E.\u0275\u0275template(34,Oe,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275template(35,Ye,28,20,"div",15),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e&&(E.\u0275\u0275property("heading",E.\u0275\u0275pipeBind1(1,16,"sidebar.operations_incentives"))("icon","pe-7s-gift")("account","")("status",-1),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(7,18,"incentive.operation_incentives_settings")),E.\u0275\u0275advance(8),E.\u0275\u0275textInterpolate1("",E.\u0275\u0275pipeBind1(15,20,"incentive.select_category")," : "),E.\u0275\u0275advance(4),E.\u0275\u0275property("ngModel",t.productEntity),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.productEntitys),E.\u0275\u0275advance(4),E.\u0275\u0275property("ngModel",t.enabled)("switch-size","small")("switch-animate",!0)("switch-off-color","danger"),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate1("",E.\u0275\u0275pipeBind1(30,22,"incentive.select_frequency")," : "),E.\u0275\u0275advance(4),E.\u0275\u0275property("ngModel",t.frequency),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.frequencies),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",t.productSelected&&t.frequencySelected))},directives:[R.T,o.EJ,w.oH,o.JJ,o.On,i.NgForOf,a.U,i.NgIf,o.YN,o.Kr,o._Y,o.JL,o.sg,w.MU,k.N9,o.u,o.Fj],pipes:[r.X$],styles:[""]}),e})();class Ue{}class je{}let Je=(()=>{class e{constructor(e){this.httpClient=e}getIncentiveRegistrations(e){return this.httpClient.post(x.f.FIND_INCENTIVE_REGISTRATION,e)}createRegistrationIncentive(e){return this.httpClient.post(x.f.CREATE_INCENTIVE_REGISTRATION,e)}updateRegistrationIncentive(e){return this.httpClient.put(x.f.UPDATE_INCENTIVE_REGISTRATION,e)}deleteRegistrationIncentive(e){return this.httpClient.delete(x.f.DELETE_INCENTIVE_REGISTRATION+e)}findPagination(e){return this.httpClient.post(x.f.FIND_PAGINATION_REGISTRATION,e)}}return e.\u0275fac=function(t){return new(t||e)(E.\u0275\u0275inject(b.eN))},e.\u0275prov=E.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function He(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.description," ")}}function $e(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.description," ")}}function We(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e.code),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.libelle," ")}}function Ze(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"select",32),E.\u0275\u0275template(2,We,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index,t=E.\u0275\u0275nextContext(2);E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","role",e,""),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.groupeEntitys)}}function Ke(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.description," ")}}function Xe(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"select",33),E.\u0275\u0275template(2,Ke,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index,t=E.\u0275\u0275nextContext(2);E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","customerType",e,""),E.\u0275\u0275property("compareWith",t.compareCustomerType),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.registrationCustomerType)}}function Qe(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.description," ")}}function et(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"select",33),E.\u0275\u0275template(2,Qe,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index,t=E.\u0275\u0275nextContext(2);E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","incentiveType",e,""),E.\u0275\u0275property("compareWith",t.compareIncentiveType),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.incentiveTypes)}}function tt(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275element(1,"input",34),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index;E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","incentiveValue",e,"")}}function nt(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",16),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.description," ")}}function it(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"select",33),E.\u0275\u0275template(2,nt,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e){const e=E.\u0275\u0275nextContext().index,t=E.\u0275\u0275nextContext(2);E.\u0275\u0275advance(1),E.\u0275\u0275propertyInterpolate1("formControlName","basedOn",e,""),E.\u0275\u0275property("compareWith",t.compareBasedOn),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.registrationsBasedOn)}}function rt(e,t){if(1&e){const e=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"td"),E.\u0275\u0275elementStart(1,"div",35),E.\u0275\u0275elementStart(2,"div",36),E.\u0275\u0275elementStart(3,"button",37),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).saveRegistrationSettings(t)}),E.\u0275\u0275element(4,"i",38),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(5,"div",36),E.\u0275\u0275elementStart(6,"button",39),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext().index;return E.\u0275\u0275nextContext(2).deleteIncentiveRegistration(t)}),E.\u0275\u0275element(7,"i",40),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()}}function ot(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"tr"),E.\u0275\u0275template(1,Ze,3,2,"td",31),E.\u0275\u0275template(2,Xe,3,3,"td",31),E.\u0275\u0275template(3,et,3,3,"td",31),E.\u0275\u0275template(4,tt,2,1,"td",31),E.\u0275\u0275template(5,it,3,3,"td",31),E.\u0275\u0275template(6,rt,8,0,"td",31),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",!e.delete)}}function st(e,t){if(1&e){const e=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"div",17),E.\u0275\u0275elementStart(1,"form",18),E.\u0275\u0275elementStart(2,"div",7),E.\u0275\u0275elementStart(3,"div",19),E.\u0275\u0275elementStart(4,"table",20),E.\u0275\u0275elementStart(5,"tr"),E.\u0275\u0275elementStart(6,"th"),E.\u0275\u0275text(7),E.\u0275\u0275pipe(8,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(9,"th"),E.\u0275\u0275text(10),E.\u0275\u0275pipe(11,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(12,"th"),E.\u0275\u0275text(13),E.\u0275\u0275pipe(14,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(15,"th"),E.\u0275\u0275text(16),E.\u0275\u0275pipe(17,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(18,"th"),E.\u0275\u0275text(19),E.\u0275\u0275pipe(20,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275template(21,ot,7,6,"tr",21),E.\u0275\u0275elementEnd(),E.\u0275\u0275element(22,"div",22,23),E.\u0275\u0275elementStart(24,"div",24),E.\u0275\u0275elementStart(25,"div",25),E.\u0275\u0275elementStart(26,"ngb-pagination",26),E.\u0275\u0275listener("pageChange",function(t){return E.\u0275\u0275restoreView(e),E.\u0275\u0275nextContext().pageNumber=t})("pageChange",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275nextContext();return t.reloadIncentiveRegistrations(t.pageNumber,"NUMBER")}),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(27,"div",27),E.\u0275\u0275elementStart(28,"button",28),E.\u0275\u0275listener("click",function(){E.\u0275\u0275restoreView(e);const t=E.\u0275\u0275reference(23);return E.\u0275\u0275nextContext().addRegistration(t)}),E.\u0275\u0275elementStart(29,"fa",29),E.\u0275\u0275element(30,"i",30),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()}if(2&e){const e=E.\u0275\u0275nextContext();E.\u0275\u0275advance(1),E.\u0275\u0275property("formGroup",e.registrationIncentiveForm),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(8,13,"incentive.role")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(11,15,"incentive.customer_type")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(14,17,"incentive.incentive_type")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(17,19,"incentive.incentive_value")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(20,21,"incentive.based_on")),E.\u0275\u0275advance(2),E.\u0275\u0275property("ngForOf",e.registrations),E.\u0275\u0275advance(5),E.\u0275\u0275property("collectionSize",e.totalElements)("page",e.pageNumber)("pageSize",e.pageSize)("maxSize",3)("boundaryLinks",!0),E.\u0275\u0275advance(2),E.\u0275\u0275property("disabled",e.saveRegistration)}}let at=(()=>{class e{constructor(e,t,n,i,r){this.incentiveService=e,this.formBuilder=t,this.settingsService=n,this.registrationIncentivesService=i,this.devToolsServices=r,this.productEntitys=[],this.groupeEntitys=[],this.groupeEntity=new p.P,this.registrations=[],this.incentiveRegistrations=[],this.frequencies=[],this.incentiveTypes=[],this.registrationCustomerType=[],this.registrationsBasedOn=[],this.registrationIndex=0,this.productSelected=!1,this.frequencySelected=!1,this.pageSize=5,this.saveRegistration=!1}ngOnInit(){this.getProduct().then(()=>{this.getIncentiveConstantsSettingsbyCategories().then(()=>{this.frequencies.length>0&&this.productEntitys.length>0&&(this.frequency=this.frequencies[0],this.frequencySelected=!0,this.productEntity=this.productEntitys[0],this.productSelected=!0,this.getIncentiveRegistrations())})}),this.registrationIncentiveForm=this.formBuilder.group({}),this.getRoles(),this.getSettingStatus()}reloadIncentiveRegistrations(e){const t=new je;t.pageNumber=e-1,t.pageSize=this.pageSize,t.params=new Ue,this.registrationIndex=0,this.registrationIncentivesService.findPagination(t).subscribe(e=>{if(this.pageSize=e.pageSize,this.totalElements=e.totalElements,this.pageNumber=e.pageNumber+1,this.incentiveRegistrations=[],e.totalElements>0){this.incentiveRegistrations=e.resultsIncentiveRegistrations,this.registrations=[],this.registrationIncentiveForm=this.formBuilder.group({});for(let e=0;e<this.incentiveRegistrations.length;e++)this.registrationIndex=e,this.registrations.push(this.incentiveRegistrations[e]),this.registrationIncentiveForm.addControl("role"+this.registrationIndex,new o.NI(this.incentiveRegistrations[e].role,o.kI.required)),this.registrationIncentiveForm.addControl("customerType"+this.registrationIndex,new o.NI(this.incentiveRegistrations[e].customerType,o.kI.required)),this.registrationIncentiveForm.addControl("incentiveType"+this.registrationIndex,new o.NI(this.incentiveRegistrations[e].incentiveType,o.kI.required)),this.registrationIncentiveForm.addControl("incentiveValue"+this.registrationIndex,new o.NI(this.incentiveRegistrations[e].incentiveValue,o.kI.required)),this.registrationIncentiveForm.addControl("basedOn"+this.registrationIndex,new o.NI(this.incentiveRegistrations[e].basedOnId,o.kI.required))}else this.registrations.push(new Ue),this.createForm()})}getIncentiveRegistrations(){const e=new je;if(e.pageSize=this.pageSize,e.params=new Ue,null!=this.productEntity&&(e.params.productId=this.productEntity.id),null!=this.frequency){const t=new f;t.id=this.frequency.id,e.params.frequency=t}this.registrationIndex=0,this.registrationIncentivesService.findPagination(e).subscribe(e=>{if(this.pageSize=e.pageSize,this.totalElements=e.totalElements,this.pageNumber=e.pageNumber+1,this.incentiveRegistrations=[],e.totalElements>0){this.incentiveRegistrations=e.resultsIncentiveRegistrations;for(let e=0;e<this.incentiveRegistrations.length;e++)this.registrationIndex=e,this.registrations.push(this.incentiveRegistrations[e]),this.registrationIncentiveForm.addControl("role"+this.registrationIndex,new o.NI(this.incentiveRegistrations[e].role,o.kI.required)),this.registrationIncentiveForm.addControl("customerType"+this.registrationIndex,new o.NI(this.incentiveRegistrations[e].customerType,o.kI.required)),this.registrationIncentiveForm.addControl("incentiveType"+this.registrationIndex,new o.NI(this.incentiveRegistrations[e].incentiveType,o.kI.required)),this.registrationIncentiveForm.addControl("incentiveValue"+this.registrationIndex,new o.NI(this.incentiveRegistrations[e].incentiveValue,o.kI.required)),this.registrationIncentiveForm.addControl("basedOn"+this.registrationIndex,new o.NI(this.incentiveRegistrations[e].basedOnId,o.kI.required))}else this.incentiveRegistrations.length>0?this.registrationIncentiveForm=this.formBuilder.group({}):(this.registrations.push(new Ue),this.createForm())})}getSettingStatus(){const e=new y;e.code=m.J.ACM_INCENTIVE_REGESTRATION,this.incentiveService.getStatusIncentiveSettingsByCode(e).subscribe(e=>{this.incentiveSettingRunEntity=e})}selectProduct(e){this.productEntity=e,this.enabled=e.incentiveRegistration,this.productSelected=!0,this.registrationIncentiveForm=this.formBuilder.group({}),this.registrations=[],this.saveRegistration=!1,this.getIncentiveRegistrations()}selectFrequency(e){this.frequency=e,this.frequencySelected=!0,this.registrationIncentiveForm=this.formBuilder.group({}),this.registrations=[],this.saveRegistration=!1,this.getIncentiveRegistrations()}getIncentiveConstantsSettingsbyCategories(){var e=this;return(0,d.Z)(function*(){yield e.incentiveService.findIncentiveSettingsConstantsByCategories(m.J.INCENTIVE_SETTING_CONSTANTS_REGISTRATION).toPromise().then(t=>{t.forEach(t=>{t.category===m.J.ACM_INCENTIVE_REGESTRATION?e.registrationsBasedOn.push(t):t.category===m.J.FREQUENCY?e.frequencies.push(t):t.category===m.J.INCENTIVE_REGESTRATION_CUSTOMER_TYPE?e.registrationCustomerType.push(t):t.category===m.J.INCENTIVE_SETTING_TYPE&&e.incentiveTypes.push(t)})})})()}compareIncentiveType(e,t){return e.code===t.code&&e.id===t.id}compareCustomerType(e,t){return e.code===t.code&&e.id===t.id}compareBasedOn(e,t){return e.code===t.code&&e.id===t.id}getProduct(){var e=this;return(0,d.Z)(function*(){const t=new g;yield e.incentiveService.getProductCategories(t).toPromise().then(t=>{e.productEntitys=t,e.enabled=e.productEntitys[0].incentiveRegistration})})()}getRoles(){this.settingsService.findGroup(this.groupeEntity).subscribe(e=>{this.groupeEntitys=e})}createForm(){this.registrationIncentiveForm=this.formBuilder.group({role0:["",o.kI.required],customerType0:["",o.kI.required],incentiveType0:["",o.kI.required],incentiveValue0:["",o.kI.required],basedOn0:["",o.kI.required]})}addRegistration(e){this.saveRegistration=!0;const t=new Ue;this.registrations.push(t),this.registrationIndex++,this.registrationIncentiveForm.addControl("role"+this.registrationIndex,new o.NI("",o.kI.required)),this.registrationIncentiveForm.addControl("customerType"+this.registrationIndex,new o.NI("",o.kI.required)),this.registrationIncentiveForm.addControl("incentiveType"+this.registrationIndex,new o.NI("",o.kI.required)),this.registrationIncentiveForm.addControl("incentiveValue"+this.registrationIndex,new o.NI("",o.kI.required)),this.registrationIncentiveForm.addControl("basedOn"+this.registrationIndex,new o.NI("",o.kI.required)),setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})},0)}saveRegistrationSettings(e){if(this.devToolsServices.makeFormAsTouched(this.registrationIncentiveForm),this.registrationIncentiveForm.valid)if(e>=this.incentiveRegistrations.length){let t=0;this.incentiveRegistrations.length>0&&(t=Math.max.apply(Math,this.incentiveRegistrations.map(e=>e.ordre)));const n=t+1,i=new Ue;i.frequency=this.frequency,i.productId=this.productEntity.id,i.ordre=n,i.role=this.registrationIncentiveForm.controls["role"+e].value,i.customerType=this.registrationIncentiveForm.controls["customerType"+e].value,i.incentiveType=this.registrationIncentiveForm.controls["incentiveType"+e].value,i.incentiveValue=this.registrationIncentiveForm.controls["incentiveValue"+e].value,i.basedOnId=this.registrationIncentiveForm.controls["basedOn"+e].value,this.registrationIncentivesService.createRegistrationIncentive(i).subscribe(e=>{this.devToolsServices.openToast(0,"alert.success"),this.incentiveRegistrations.push(e),this.registrations[this.registrationIndex]=e,this.saveRegistration=!1})}else this.incentiveRegistrations[e].role=this.registrationIncentiveForm.controls["role"+e].value,this.incentiveRegistrations[e].customerType=this.registrationIncentiveForm.controls["customerType"+e].value,this.incentiveRegistrations[e].incentiveType=this.registrationIncentiveForm.controls["incentiveType"+e].value,this.incentiveRegistrations[e].incentiveValue=this.registrationIncentiveForm.controls["incentiveValue"+e].value,this.incentiveRegistrations[e].basedOnId=this.registrationIncentiveForm.controls["basedOn"+e].value,this.registrationIncentivesService.updateRegistrationIncentive(this.incentiveRegistrations[e]).subscribe(t=>{this.devToolsServices.openToast(0,"alert.success"),this.incentiveRegistrations[e]=t})}deleteIncentiveRegistration(e){this.devToolsServices.openConfirmDialogWithoutRedirect("confirmation_dialog."+m.J.DELETE_INCENTIVE_SETTING).afterClosed().subscribe(t=>{t&&(this.registrations[e].delete=!0,this.registrationIncentiveForm.removeControl("basedOn"+e),this.registrationIncentiveForm.removeControl("role"+e),this.registrationIncentiveForm.removeControl("customerType"+e),this.registrationIncentiveForm.removeControl("incentiveType"+e),this.registrationIncentiveForm.removeControl("incentiveValue"+e),null!=this.registrations[e].id&&this.registrationIncentivesService.deleteRegistrationIncentive(this.registrations[e].id).subscribe(()=>{this.devToolsServices.openToast(0,"alert.success")})),this.saveRegistration=!1})}EnableDisableRegistration(){this.productEntity.incentiveRegistration=this.enabled,this.incentiveService.updateProductCategory(this.productEntity).subscribe(e=>{this.devToolsServices.openToast(0,"alert.success"),this.enabled=e[0].enabled})}}return e.\u0275fac=function(t){return new(t||e)(E.\u0275\u0275directiveInject(N),E.\u0275\u0275directiveInject(o.qu),E.\u0275\u0275directiveInject(C.g),E.\u0275\u0275directiveInject(Je),E.\u0275\u0275directiveInject(F.R))},e.\u0275cmp=E.\u0275\u0275defineComponent({type:e,selectors:[["app-registration-incentives"]],decls:36,vars:24,consts:[[3,"heading","icon","account","status"],[1,"card","row"],[1,"card-header"],[1,"col-xl-11","col-lg-11","col-md-11","col-sm-11"],[1,"card-title","m-0"],[1,"card-body"],[1,"row","pt-3"],[1,"row"],[1,"col-md-2","col-lg-2","col-sm-2"],[1,"col-md-4","col-lg-4","col-sm-4","justify-content-start"],[1,"input-group"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-2","col-lg-2","col-sm-2","d-flex","justify-content-start"],[1,"px-2","mb-0",3,"ngModel","switch-size","switch-animate","switch-off-color","ngModelChange","click"],["class","pt-5",4,"ngIf"],[3,"ngValue"],[1,"pt-5"],[3,"formGroup"],[1,"col-xl-10","col-lg-10","col-md-10","col-sm-10"],[1,"table"],[4,"ngFor","ngForOf"],[1,"scroll-incentive"],["scrollToNewRegistration",""],[1,"col-xl-12","col-md-12","px-0","mx-0","row"],[1,"col-xl-9","col-md-9"],["size","sm",3,"collectionSize","page","pageSize","maxSize","boundaryLinks","pageChange"],[1,"col-xl-2","col-lg-2","col-md-2","col-sm-2"],["type","button",1,"btn-shadow","d-inline-flex","align-items-center","btn","btn-primary",3,"disabled","click"],["name","plus",1,"mx-2"],["aria-hidden","true","ng-reflect-klass","fa fa-plus",1,"fa","fa-plus"],[4,"ngIf"],[1,"form-control",3,"formControlName"],[1,"form-control",3,"formControlName","compareWith"],["type","text",1,"form-control",3,"formControlName"],[1,"row","d-flex","justify-content-end","px-3"],[1,"px-2"],[1,"btn","btn-success",3,"click"],[1,"pe-7s-check","btn-icon-wrapper","text-white"],[1,"btn","btn-danger",3,"click"],[1,"pe-7s-trash","btn-icon-wrapper","text-white"]],template:function(e,t){1&e&&(E.\u0275\u0275element(0,"app-page-title",0),E.\u0275\u0275pipe(1,"translate"),E.\u0275\u0275elementStart(2,"div",1),E.\u0275\u0275elementStart(3,"div",2),E.\u0275\u0275elementStart(4,"div",3),E.\u0275\u0275elementStart(5,"div",4),E.\u0275\u0275text(6),E.\u0275\u0275pipe(7,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(8,"div",5),E.\u0275\u0275elementStart(9,"div",6),E.\u0275\u0275elementStart(10,"div",3),E.\u0275\u0275elementStart(11,"div",7),E.\u0275\u0275elementStart(12,"div",8),E.\u0275\u0275elementStart(13,"label"),E.\u0275\u0275text(14),E.\u0275\u0275pipe(15,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(16,"div",9),E.\u0275\u0275elementStart(17,"div",10),E.\u0275\u0275elementStart(18,"select",11),E.\u0275\u0275listener("ngModelChange",function(e){return t.productEntity=e})("ngModelChange",function(e){return t.selectProduct(e)}),E.\u0275\u0275template(19,He,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(20,"div",13),E.\u0275\u0275elementStart(21,"div"),E.\u0275\u0275elementStart(22,"div",10),E.\u0275\u0275elementStart(23,"bSwitch",14),E.\u0275\u0275listener("ngModelChange",function(e){return t.enabled=e})("click",function(){return t.EnableDisableRegistration()}),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(24,"div",6),E.\u0275\u0275elementStart(25,"div",3),E.\u0275\u0275elementStart(26,"div",7),E.\u0275\u0275elementStart(27,"div",8),E.\u0275\u0275elementStart(28,"label"),E.\u0275\u0275text(29),E.\u0275\u0275pipe(30,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(31,"div",9),E.\u0275\u0275elementStart(32,"div",10),E.\u0275\u0275elementStart(33,"select",11),E.\u0275\u0275listener("ngModelChange",function(e){return t.frequency=e})("ngModelChange",function(e){return t.selectFrequency(e)}),E.\u0275\u0275template(34,$e,2,2,"option",12),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275template(35,st,31,23,"div",15),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e&&(E.\u0275\u0275property("heading",E.\u0275\u0275pipeBind1(1,16,"sidebar.registration_incentives"))("icon","pe-7s-gift")("account","")("status",-1),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(7,18,"incentive.registration_incentives_settings")),E.\u0275\u0275advance(8),E.\u0275\u0275textInterpolate1("",E.\u0275\u0275pipeBind1(15,20,"incentive.select_category")," : "),E.\u0275\u0275advance(4),E.\u0275\u0275property("ngModel",t.productEntity),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.productEntitys),E.\u0275\u0275advance(4),E.\u0275\u0275property("ngModel",t.enabled)("switch-size","small")("switch-animate",!0)("switch-off-color","danger"),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate1("",E.\u0275\u0275pipeBind1(30,22,"incentive.select_frequency")," : "),E.\u0275\u0275advance(4),E.\u0275\u0275property("ngModel",t.frequency),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngForOf",t.frequencies),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngIf",t.productSelected&&t.frequencySelected))},directives:[R.T,o.EJ,w.oH,o.JJ,o.On,i.NgForOf,a.U,i.NgIf,o.YN,o.Kr,o._Y,o.JL,o.sg,w.MU,k.N9,o.u,o.Fj],pipes:[r.X$],styles:[""]}),e})();class lt{}let ct=(()=>{class e{constructor(e){this.httpClient=e}findIncentiveSettingsRun(e){return this.httpClient.post(x.f.FIND_ALL_INCENTIVE_RUN,e)}runCalculateIncentiveRepayment(){return this.httpClient.get(x.f.INCENTIVE_RUN_REPAYMENT)}reportingIncentiveRepayment(e){return this.httpClient.post(x.f.INCENTIVE_GENERATE_REPORT_REPAYMENT,e,{responseType:"blob"})}runCalculateIncentiveOperation(){return this.httpClient.get(x.f.INCENTIVE_RUN_OPERATION)}reportingIncentiveOperation(e){return this.httpClient.post(x.f.INCENTIVE_GENERATE_REPORT_OPERATION,e,{responseType:"blob"})}runCalculateIncentiveRegistration(){return this.httpClient.get(x.f.INCENTIVE_RUN_REGISTRATION)}reportingIncentiveRegistration(e){return this.httpClient.post(x.f.INCENTIVE_GENERATE_REPORT_REGISTRATION,e,{responseType:"blob"})}incentiveLoanRunYearRegistration(){return this.httpClient.get(x.f.INCENTIVE_LOAD_RUN_YEAR_REGISTRATION)}incentiveLoanRunMonthRegistration(){return this.httpClient.get(x.f.INCENTIVE_LOAD_RUN_MONTH_REGISTRATION)}incentiveLoanRunYearOperation(){return this.httpClient.get(x.f.INCENTIVE_LOAD_RUN_YEAR_OPERATION)}incentiveLoanRunMonthOperation(){return this.httpClient.get(x.f.INCENTIVE_LOAD_RUN_MONTH_OPERATION)}incentiveLoanRunYearRepayment(){return this.httpClient.get(x.f.INCENTIVE_LOAD_RUN_YEAR_REPAYMENT)}incentiveLoanRunMonthRepayment(){return this.httpClient.get(x.f.INCENTIVE_LOAD_RUN_MONTH_REPAYMENT)}}return e.\u0275fac=function(t){return new(t||e)(E.\u0275\u0275inject(b.eN))},e.\u0275prov=E.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var dt=n(65981);function mt(e,t){if(1&e){const e=E.\u0275\u0275getCurrentView();E.\u0275\u0275elementStart(0,"tr"),E.\u0275\u0275elementStart(1,"td",18),E.\u0275\u0275text(2),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(3,"td",18),E.\u0275\u0275text(4),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(5,"td",18),E.\u0275\u0275elementStart(6,"button",21),E.\u0275\u0275listener("click",function(){const t=E.\u0275\u0275restoreView(e).$implicit;return E.\u0275\u0275nextContext().calculate(t.code)}),E.\u0275\u0275element(7,"i",22),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(8,"td",18),E.\u0275\u0275elementStart(9,"button",19),E.\u0275\u0275listener("click",function(){const t=E.\u0275\u0275restoreView(e).$implicit;return E.\u0275\u0275nextContext().generateReport(t.code,"current")}),E.\u0275\u0275element(10,"i",20),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=E.\u0275\u0275nextContext();E.\u0275\u0275advance(2),E.\u0275\u0275textInterpolate(e.description),E.\u0275\u0275advance(2),E.\u0275\u0275textInterpolate(e.frequency.description),E.\u0275\u0275advance(2),E.\u0275\u0275property("ngbTooltip",e.description)("disabled",n.checkHabilitation(e)),E.\u0275\u0275advance(3),E.\u0275\u0275property("ngbTooltip","Download Report")("disabled",n.checkHabilitation(e))}}function pt(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",14),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.description," ")}}function ut(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",14),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e.value),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.value," ")}}function vt(e,t){if(1&e&&(E.\u0275\u0275elementStart(0,"option",14),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;E.\u0275\u0275property("ngValue",e.value),E.\u0275\u0275advance(1),E.\u0275\u0275textInterpolate1(" ",e.value," ")}}const ht=[{path:"",children:[{path:"run-incentive",canActivate:[c.P],component:(()=>{class e{constructor(e,t,n,i){this.runIncentiveService=e,this.devToolsServices=t,this.formBuilder=n,this.loanSharedService=i,this.incentiveSettingRuns=[],this.selectedReport=!1,this.incentiveHistoryYears=[],this.incentiveHistoryMonth=[],this.currentPath=m.J.RUN_INCENTIVE_URL}ngOnInit(){this.runIncentiveService.findIncentiveSettingsRun(new y).subscribe(e=>{this.incentiveSettingRuns=e}),this.createIncentiveHistoryForm()}generateReport(e,t){var n=this;return(0,d.Z)(function*(){const i=new lt;"history"===t&&(e=n.incentiveHistoryForm.controls.incentiveReport.value.code,i.year=n.incentiveHistoryForm.controls.year.value,i.month=n.incentiveHistoryForm.controls.month.value);const r=new Date;switch(e){case"ACM_INCENTIVE_REPAYMENT":yield n.runIncentiveService.reportingIncentiveRepayment(i).subscribe(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(t),i=document.createElement("a");i.download="incentive_repayment_"+r.getFullYear()+"-"+r.getMonth()+"-"+r.getDate()+"_"+r.getHours()+"-"+r.getMinutes(),i.href=n,i.click()});break;case"ACM_INCENTIVE_REGESTRATION":yield n.runIncentiveService.reportingIncentiveRegistration(i).subscribe(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(t),i=document.createElement("a");i.download="incentive_registration_"+r.getFullYear()+"-"+r.getMonth()+"-"+r.getDate()+"_"+r.getHours()+"-"+r.getMinutes(),i.href=n,i.click()});break;case"ACM_INCENTIVE_OPERATION":yield n.runIncentiveService.reportingIncentiveOperation(i).subscribe(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(t),i=document.createElement("a");i.download="incentive_operation_"+r.getFullYear()+"-"+r.getMonth()+"-"+r.getDate()+"_"+r.getHours()+"-"+r.getMinutes(),i.href=n,i.click()})}})()}calculate(e){var t=this;return(0,d.Z)(function*(){switch(e){case"ACM_INCENTIVE_REPAYMENT":yield t.runIncentiveService.runCalculateIncentiveRepayment().toPromise().then(e=>{t.response=e,t.devToolsServices.openToast(0,"alert.success")});break;case"ACM_INCENTIVE_REGESTRATION":yield t.runIncentiveService.runCalculateIncentiveRegistration().toPromise().then(e=>{t.response=e,t.devToolsServices.openToast(0,"alert.success")});break;case"ACM_INCENTIVE_OPERATION":yield t.runIncentiveService.runCalculateIncentiveOperation().toPromise().then(e=>{t.response=e,t.devToolsServices.openToast(0,"alert.success")})}})()}createIncentiveHistoryForm(){this.incentiveHistoryForm=this.formBuilder.group({incentiveReport:[null,o.kI.required],year:["",o.kI.required],month:["",o.kI.required]})}loadYearMonth(){if(this.incentiveHistoryMonth=[],this.incentiveHistoryYears=[],null!==this.incentiveHistoryForm.controls.incentiveReport.value){switch(this.selectedReport=!0,this.incentiveHistoryForm.controls.incentiveReport.value.code){case"ACM_INCENTIVE_REPAYMENT":this.runIncentiveService.incentiveLoanRunYearRepayment().subscribe(e=>{this.incentiveHistoryYears=e}),this.runIncentiveService.incentiveLoanRunMonthRepayment().subscribe(e=>{this.incentiveHistoryMonth=e});break;case"ACM_INCENTIVE_REGESTRATION":this.runIncentiveService.incentiveLoanRunYearRegistration().subscribe(e=>{this.incentiveHistoryYears=e}),this.runIncentiveService.incentiveLoanRunMonthRegistration().subscribe(e=>{this.incentiveHistoryMonth=e});break;case"ACM_INCENTIVE_OPERATION":this.runIncentiveService.incentiveLoanRunYearOperation().subscribe(e=>{this.incentiveHistoryYears=e}),this.runIncentiveService.incentiveLoanRunMonthOperation().subscribe(e=>{this.incentiveHistoryMonth=e})}this.incentiveHistoryForm.controls.year.setValue(null),this.incentiveHistoryForm.controls.month.setValue(null)}else this.selectedReport=!1,this.incentiveHistoryYears=[],this.incentiveHistoryMonth=[]}checkHabilitation(e){switch(e.code){case"ACM_INCENTIVE_REPAYMENT":return this.loanSharedService.habilitationButton(m.J.ISSUANCE_REPAYEMENT,this.currentPath);case"ACM_INCENTIVE_REGESTRATION":return this.loanSharedService.habilitationButton(m.J.REGISTRATION,this.currentPath);case"ACM_INCENTIVE_OPERATION":return this.loanSharedService.habilitationButton(m.J.OPERATION,this.currentPath);case"ACM_INCENTIVE_LEGAL":return this.loanSharedService.habilitationButton(m.J.LEGEL,this.currentPath);default:return!0}}}return e.\u0275fac=function(t){return new(t||e)(E.\u0275\u0275directiveInject(ct),E.\u0275\u0275directiveInject(F.R),E.\u0275\u0275directiveInject(o.qu),E.\u0275\u0275directiveInject(dt.F))},e.\u0275cmp=E.\u0275\u0275defineComponent({type:e,selectors:[["app-run-incentive"]],decls:65,vars:39,consts:[[3,"heading","icon","account","status"],[1,"card","row"],[1,"card-header"],[1,"col-xl-11","col-lg-11","col-md-11","col-sm-11"],[1,"card-title","m-0"],[1,"py-0"],[1,"table-responsive"],[1,"align-middle","mb-0","table","table-hover"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],[1,"pt-0"],[3,"formGroup"],["scope","col"],["formControlName","incentiveReport",1,"form-control",3,"change"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","month",1,"form-control"],["formControlName","year",1,"form-control"],[1,"text-center"],[1,"btn","btn-warning",3,"ngbTooltip","disabled","click"],[1,"pe-7s-note2","btn-icon-wrapper"],[1,"btn","btn-primary",3,"ngbTooltip","disabled","click"],[1,"pe-7s-play","btn-icon-wrapper","text-white"]],template:function(e,t){1&e&&(E.\u0275\u0275element(0,"app-page-title",0),E.\u0275\u0275pipe(1,"translate"),E.\u0275\u0275elementStart(2,"div",1),E.\u0275\u0275elementStart(3,"div",2),E.\u0275\u0275elementStart(4,"div",3),E.\u0275\u0275elementStart(5,"div",4),E.\u0275\u0275text(6),E.\u0275\u0275pipe(7,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(8,"div",5),E.\u0275\u0275elementStart(9,"div",6),E.\u0275\u0275elementStart(10,"table",7),E.\u0275\u0275elementStart(11,"thead"),E.\u0275\u0275elementStart(12,"tr"),E.\u0275\u0275elementStart(13,"th",8),E.\u0275\u0275text(14),E.\u0275\u0275pipe(15,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(16,"th",8),E.\u0275\u0275text(17),E.\u0275\u0275pipe(18,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275element(19,"th",8),E.\u0275\u0275element(20,"th",8),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(21,"tbody"),E.\u0275\u0275template(22,mt,11,6,"tr",9),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(23,"div",1),E.\u0275\u0275elementStart(24,"div",2),E.\u0275\u0275elementStart(25,"div",3),E.\u0275\u0275elementStart(26,"div",4),E.\u0275\u0275text(27),E.\u0275\u0275pipe(28,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(29,"div",10),E.\u0275\u0275elementStart(30,"form",11),E.\u0275\u0275elementStart(31,"div",6),E.\u0275\u0275elementStart(32,"table",7),E.\u0275\u0275elementStart(33,"thead"),E.\u0275\u0275elementStart(34,"tr"),E.\u0275\u0275elementStart(35,"th",12),E.\u0275\u0275text(36),E.\u0275\u0275pipe(37,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(38,"th",12),E.\u0275\u0275text(39),E.\u0275\u0275pipe(40,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(41,"th",12),E.\u0275\u0275text(42),E.\u0275\u0275pipe(43,"translate"),E.\u0275\u0275elementEnd(),E.\u0275\u0275element(44,"th",8),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(45,"tbody"),E.\u0275\u0275elementStart(46,"tr"),E.\u0275\u0275elementStart(47,"td"),E.\u0275\u0275elementStart(48,"select",13),E.\u0275\u0275listener("change",function(){return t.loadYearMonth()}),E.\u0275\u0275elementStart(49,"option",14),E.\u0275\u0275text(50,"-------------"),E.\u0275\u0275elementEnd(),E.\u0275\u0275template(51,pt,2,2,"option",15),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(52,"td"),E.\u0275\u0275elementStart(53,"select",16),E.\u0275\u0275elementStart(54,"option",14),E.\u0275\u0275text(55,"-------------"),E.\u0275\u0275elementEnd(),E.\u0275\u0275template(56,ut,2,2,"option",15),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(57,"td"),E.\u0275\u0275elementStart(58,"select",17),E.\u0275\u0275elementStart(59,"option",14),E.\u0275\u0275text(60,"-------------"),E.\u0275\u0275elementEnd(),E.\u0275\u0275template(61,vt,2,2,"option",15),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(62,"td",18),E.\u0275\u0275elementStart(63,"button",19),E.\u0275\u0275listener("click",function(){return t.generateReport(null,"history")}),E.\u0275\u0275element(64,"i",20),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementEnd()),2&e&&(E.\u0275\u0275property("heading",E.\u0275\u0275pipeBind1(1,23,"sidebar.run_incentive"))("icon","pe-7s-gift")("account","")("status",-1),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(7,25,"incentive.run_incentives.titre")),E.\u0275\u0275advance(8),E.\u0275\u0275textInterpolate1(" ",E.\u0275\u0275pipeBind1(15,27,"incentive.run_incentives.name"),""),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(18,29,"incentive.run_incentives.frequency")),E.\u0275\u0275advance(5),E.\u0275\u0275property("ngForOf",t.incentiveSettingRuns),E.\u0275\u0275advance(5),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(28,31,"incentive.incentive_history")),E.\u0275\u0275advance(3),E.\u0275\u0275property("formGroup",t.incentiveHistoryForm),E.\u0275\u0275advance(6),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(37,33,"incentive.incentive_type")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(40,35,"incentive.month")),E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(E.\u0275\u0275pipeBind1(43,37,"incentive.year")),E.\u0275\u0275advance(7),E.\u0275\u0275property("ngValue",null),E.\u0275\u0275advance(2),E.\u0275\u0275property("ngForOf",t.incentiveSettingRuns),E.\u0275\u0275advance(2),E.\u0275\u0275attribute("disabled",t.selectedReport?null:""),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngValue",null),E.\u0275\u0275advance(2),E.\u0275\u0275property("ngForOf",t.incentiveHistoryMonth),E.\u0275\u0275advance(2),E.\u0275\u0275attribute("disabled",t.selectedReport?null:""),E.\u0275\u0275advance(1),E.\u0275\u0275property("ngValue",null),E.\u0275\u0275advance(2),E.\u0275\u0275property("ngForOf",t.incentiveHistoryYears),E.\u0275\u0275advance(2),E.\u0275\u0275property("ngbTooltip","Download Report")("disabled",t.incentiveHistoryForm.invalid))},directives:[R.T,i.NgForOf,o._Y,o.JL,o.sg,w.MU,o.EJ,w.oH,o.JJ,o.u,o.YN,o.Kr,k._L],pipes:[r.X$],styles:[""]}),e})(),data:{extraParameter:"dashboardsMenu"}},{path:"issuance-repayment-incentives",canActivate:[c.P],component:Fe,data:{extraParameter:"dashboardsMenu"}},{path:"registration-incentive",canActivate:[c.P],component:at,data:{extraParameter:"dashboardsMenu"}},{path:"operations-incentives",canActivate:[c.P],component:ze,data:{extraParameter:"dashboardsMenu"}}]}];let It=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=E.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=E.\u0275\u0275defineInjector({imports:[[l.Bz.forChild(ht)],l.Bz]}),e})();var ft=n(39577);let yt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=E.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=E.\u0275\u0275defineInjector({imports:[[i.CommonModule,It,s.p,k.IJ,ft.uH,o.UX,w.VN,o.u5,a.E,r.aw]]}),e})()},97199:function(e,t,n){n.d(t,{P:function(){return i}});class i{constructor(){}}}}]);