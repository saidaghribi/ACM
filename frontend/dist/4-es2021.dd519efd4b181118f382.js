"use strict";(self.webpackChunkacm_web=self.webpackChunkacm_web||[]).push([[4],{63697:function(e,t,n){n.d(t,{j:function(){return l}});var i=n(6452),a=n(37716),o=n(91841);let l=(()=>{class e{constructor(e){this.httpClient=e}findExceptionRequest(e){return this.httpClient.post(i.f.FIND_EXCEPTION_REQUEST,e)}findExceptionRequestPagination(e){return this.httpClient.post(i.f.FIND_PAGINATION_EXCEPTION_REQUEST,e)}createExceptionRequest(e){return this.httpClient.post(i.f.CREATE_EXCEPTION_REQUEST,e)}updateExceptionRequest(e){return this.httpClient.put(i.f.UPDATE_EXCEPTION_REQUEST,e)}updateStatutExceptionRequest(e){return this.httpClient.post(i.f.UPDATE_STATUT_EXCEPTION_REQUEST,e)}loadCount(){return this.httpClient.get(i.f.COUNT_EXCEPTION_REQUEST)}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(o.eN))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},59006:function(e,t,n){n.d(t,{I:function(){return W}});var i=n(8239),a=n(37716),o=n(3679),l=n(44760),r=n(30165),d=n(15694),s=n(31900),m=n(98642),u=n(58762),c=n(67757),p=n(16519),h=n(22134),f=n(26215),v=n(54798),x=n(39577),S=n(65981),F=n(85627),y=n(25465),g=n(38583),E=n(57552),I=n(83446),L=n(29790);function T(e,t){1&e&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275element(1,"i",11),a.\u0275\u0275text(2),a.\u0275\u0275pipe(3,"translate"),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(3,1,"loan_management.loan_analyses")," "))}function D(e,t){1&e&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275element(1,"i",11),a.\u0275\u0275text(2),a.\u0275\u0275pipe(3,"translate"),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(3,1,"customer.customer_analysis")," "))}function b(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"option",20),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;a.\u0275\u0275property("value",e.id),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.description," ")}}function C(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",21),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext().index;return a.\u0275\u0275nextContext(2).deleteGroupe(t)}),a.\u0275\u0275element(1,"i",22),a.\u0275\u0275elementEnd()}}function A(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",29),a.\u0275\u0275text(1," *"),a.\u0275\u0275elementEnd())}function V(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275elementStart(1,"label"),a.\u0275\u0275text(2),a.\u0275\u0275template(3,A,2,0,"span",28),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.description," "),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.mandatory)}}function P(e,t){1&e&&(a.\u0275\u0275elementStart(0,"small",29),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1("",a.\u0275\u0275pipeBind1(2,1,"This_field_is_required"),"."))}function w(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275template(1,P,3,3,"small",28),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).index,t=a.\u0275\u0275nextContext(2).index,n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",null==n.udfForm.get("udfField"+t+e).errors?null:n.udfForm.get("udfField"+t+e).errors.required)}}function _(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275element(1,"input",30),a.\u0275\u0275template(2,w,2,1,"div",0),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().index,t=a.\u0275\u0275nextContext(2).index,n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate2("formControlName","udfField",t,"",e,""),a.\u0275\u0275property("placeholder",n.mascPlacHolder(n.udfFields[t][e].fieldMasc)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",n.udfForm.get("udfField"+t+e).touched&&n.udfForm.get("udfField"+t+e).invalid)}}function M(e,t){1&e&&(a.\u0275\u0275elementStart(0,"small",29),a.\u0275\u0275text(1,"This field is required."),a.\u0275\u0275elementEnd())}function U(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275template(1,M,2,0,"small",28),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).index,t=a.\u0275\u0275nextContext(2).index,n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",null==n.udfForm.get("udfField"+t+e).errors?null:n.udfForm.get("udfField"+t+e).errors.required)}}function O(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275element(1,"input",31),a.\u0275\u0275template(2,U,2,1,"div",0),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().index,t=a.\u0275\u0275nextContext(2).index,n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate2("formControlName","udfField",t,"",e,""),a.\u0275\u0275property("placeholder",n.mascPlacHolder(n.udfFields[t][e].fieldMasc)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",n.udfForm.get("udfField"+t+e).touched&&n.udfForm.get("udfField"+t+e).invalid)}}function N(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"option",35),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;a.\u0275\u0275property("ngValue",e),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.description," ")}}function R(e,t){1&e&&(a.\u0275\u0275elementStart(0,"small",29),a.\u0275\u0275text(1,"This field is required."),a.\u0275\u0275elementEnd())}function k(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275template(1,R,2,0,"small",28),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).index,t=a.\u0275\u0275nextContext(2).index,n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",null==n.udfForm.get("udfField"+t+e).errors?null:n.udfForm.get("udfField"+t+e).errors.required)}}function G(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275elementStart(1,"select",32),a.\u0275\u0275listener("change",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext().index,n=a.\u0275\u0275nextContext(2).index;return a.\u0275\u0275nextContext(2).changeUDFField(n,t)}),a.\u0275\u0275elementStart(2,"option",33),a.\u0275\u0275text(3),a.\u0275\u0275pipe(4,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(5,N,2,2,"option",34),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,k,2,1,"div",0),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(),t=e.index,n=e.$implicit,i=a.\u0275\u0275nextContext(2).index,o=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("formControlName","udfField"+i+t)("compareWith",o.compareFieldUDF),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(4,5,"udf.udf_group_code_default_select")," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",n.fieldListValuesDTOs),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",o.udfForm.get("udfField"+i+t).touched&&o.udfForm.get("udfField"+i+t).invalid)}}function q(e,t){1&e&&(a.\u0275\u0275elementStart(0,"small",29),a.\u0275\u0275text(1,"This field is required."),a.\u0275\u0275elementEnd())}function B(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275template(1,q,2,0,"small",28),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).index,t=a.\u0275\u0275nextContext(2).index,n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",null==n.udfForm.get("udfField"+t+e).errors?null:n.udfForm.get("udfField"+t+e).errors.required)}}function j(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275element(1,"input",36),a.\u0275\u0275template(2,B,2,1,"div",0),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().index,t=a.\u0275\u0275nextContext(2).index,n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate2("formControlName","udfField",t,"",e,""),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",n.udfForm.get("udfField"+t+e).touched&&n.udfForm.get("udfField"+t+e).invalid)}}function J(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",27),a.\u0275\u0275template(1,V,4,2,"div",0),a.\u0275\u0275template(2,_,3,4,"div",0),a.\u0275\u0275template(3,O,3,4,"div",0),a.\u0275\u0275template(4,G,7,7,"div",0),a.\u0275\u0275template(5,j,3,3,"div",0),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!e.delete),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",1===e.fieldType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",2===e.fieldType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",5===e.fieldType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",4===e.fieldType)}}function Y(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275elementStart(1,"div",23),a.\u0275\u0275elementStart(2,"div",24),a.\u0275\u0275elementStart(3,"div",25),a.\u0275\u0275template(4,J,6,5,"div",26),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().index,t=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(4),a.\u0275\u0275property("ngForOf",t.udfFields[e])}}function z(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275element(1,"hr",12),a.\u0275\u0275elementStart(2,"div",13),a.\u0275\u0275elementStart(3,"label"),a.\u0275\u0275text(4),a.\u0275\u0275pipe(5,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"div",14),a.\u0275\u0275elementStart(7,"div",15),a.\u0275\u0275elementStart(8,"select",16),a.\u0275\u0275listener("change",function(){const t=a.\u0275\u0275restoreView(e).index;return a.\u0275\u0275nextContext(2).getUdfFiledList(t,!1,null)}),a.\u0275\u0275element(9,"option"),a.\u0275\u0275template(10,b,2,2,"option",17),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"div",18),a.\u0275\u0275template(12,C,2,0,"button",19),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(13,Y,5,1,"div",0),a.\u0275\u0275elementEnd()}if(2&e){const e=t.index,n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate1("",a.\u0275\u0275pipeBind1(5,7,"udf.udf_group")," "),a.\u0275\u0275advance(4),a.\u0275\u0275propertyInterpolate1("formControlName","udfGroup",e,""),a.\u0275\u0275property("compareWith",n.compareGroup),a.\u0275\u0275attribute("disabled",n.listUDFGroups[e].mondatory?"":null),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",n.udfGroups),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",!n.listUDFGroups[e].mondatory),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",(null==n.udfFields[e]?null:n.udfFields[e].length)>0)}}function H(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275elementStart(2,"div",2),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().toggleCollapseLoanAnalyses()}),a.\u0275\u0275template(3,T,4,3,"div",0),a.\u0275\u0275template(4,D,4,3,"div",0),a.\u0275\u0275elementStart(5,"div"),a.\u0275\u0275element(6,"i",3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"div",4),a.\u0275\u0275elementStart(8,"div",5),a.\u0275\u0275elementStart(9,"div",6),a.\u0275\u0275elementStart(10,"button",7),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().addUdf()}),a.\u0275\u0275element(11,"fa-icon",8),a.\u0275\u0275text(12),a.\u0275\u0275pipe(13,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(14,"form",9),a.\u0275\u0275template(15,z,14,9,"div",10),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",e.typeUdfLoan),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.typeUdfCustomer),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngClass",!0===e.expanded?"lnr-chevron-up text-secondary":"lnr-chevron-down text-secondary"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngClass",!0===e.expanded?"collapse show":"collapse"),a.\u0275\u0275advance(4),a.\u0275\u0275property("icon",e.library.getIconDefinition("fas","plus")),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(13,8,"button.add")," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("formGroup",e.udfForm),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",e.listUDFGroups)}}let W=(()=>{class e{constructor(e,t,n,i,o,u){this.udfService=e,this.formBuilder=t,this.library=n,this.sharedService=i,this.devToolsServices=o,this.dbService=u,this.udfLinksNationality=new a.EventEmitter,this.udfGroup=new d.t,this.udfGroups=[],this.udfFields=[],this.udfField=new s.x,this.udfLink=new m.l,this.udfLinks=[],this.listUDFGroups=[],this.selectedLoan=new r.t,this.selectedCustomer=new l.x,this.listUDFLinkNationality=[],this.udfSettingNationality=[],this.udfLinkGroup=[],this.indexFormUdf=0,this.indexFormUdfField=0,this.udfGroupsFound=new f.X(!1)}ngOnInit(){this.indexFormUdf=0,this.listUDFGroups=[],this.udfGroups=[],this.udfFields=[],this.udfFields.length=0;const e=new d.t;this.typeUdfLoan?(this.createForm(),this.udfForm.addControl("udfGroup"+this.indexFormUdf,new o.NI("")),null!==this.sharedService.getLoan()&&void 0!==this.sharedService.getLoan()&&(e.productId=this.sharedService.getLoan().productId)):this.typeUdfCustomer&&(this.createForm(),this.udfForm.addControl("udfGroup"+this.indexFormUdf,new o.NI("")),e.customerTypeLabel=null!==this.sharedService.getCustomer()&&void 0!==this.sharedService.getCustomer()?this.sharedService.getCustomer().customerType:u.J.CUSTOMER_TYPE_INDIVIDUAL),this.getUdfGroup(this.indexFormUdf,e)}createForm(){this.udfForm=this.formBuilder.group({})}updateForm(){this.udfForm=this.formBuilder.group({})}getUdfGroup(e,t){let n=new d.t;""!==e&&(n=this.listUDFGroups[e]),void 0===n&&(n=new d.t),this.typeUdfLoan?(this.udfGroup.category=u.J.LOAN_PRODUCTS_CATEGORY,this.udfGroup.productId=this.productId?this.productId:null==n?0:n.productId):this.typeUdfCustomer&&(this.udfGroup.category=u.J.CUSTOMER_CATEGORY_CUSTOMER),(0,h.L0)()?this.dbService.getByKey("data","getUdfGroup_"+this.udfGroup.category).subscribe(e=>{void 0===e?this.devToolsServices.openToast(3,"No udf indiv saved for offline use"):this.initializeUDFGroups(e.data)}):this.udfService.getUdfGroup(this.udfGroup).subscribe(e=>{this.initializeUDFGroups(e)})}initializeUDFGroups(e){if(this.udfGroups=e,this.typeUdfCustomer){const e=this.udfGroups.filter(e=>e.code===u.J.CUSTOMER_NATIONALITY_CODE||e.code===u.J.BANK_INFORMATION_CODE);e.length>0&&(this.udfGroups.splice(this.udfGroups.indexOf(e[0]),1),this.udfGroups.splice(this.udfGroups.indexOf(e[1]),1))}else if(this.typeUdfLoan){const e=this.udfGroups.filter(e=>e.code===u.J.L1_APPROVAL||e.code===u.J.SOURCE_OF_INVESTIGATION);e.length>0&&(this.udfGroups.splice(this.udfGroups.indexOf(e[0]),1),this.udfGroups.splice(this.udfGroups.indexOf(e[1]),1))}for(let t=0;t<this.udfGroups.length;t++)!0===e[t].mondatory&&(this.listUDFGroups.push(new d.t),this.udfForm.addControl("udfGroup"+this.indexFormUdf,new o.NI("",o.kI.required)),this.udfForm.controls["udfGroup"+this.indexFormUdf].setValue(this.udfGroups[t].id),this.getUdfFiledList(this.indexFormUdf,!0,this.udfGroups[t].id),this.indexFormUdf++);this.udfGroupsFound.next(!0)}getUdfFiledList(e,t,n){var a=this;return(0,i.Z)(function*(){if(t&&a.udfGroups.forEach(t=>{t.id===+a.udfForm.controls["udfGroup"+e].value&&(a.listUDFGroups[e].id=t.id,a.listUDFGroups[e].mondatory=t.mondatory)}),!t)for(let t=0;t<a.udfFields[e].length;t++)a.udfForm.controls["udfField"+e+t].reset(),a.udfForm.controls["udfField"+e+t].clearValidators();a.udfFields[e]=[],a.udfField.userDefinedFieldGroupDTO=new d.t,a.udfField.userDefinedFieldGroupDTO.id=t?n:a.udfForm.controls["udfGroup"+e].value?a.udfForm.controls["udfGroup"+e].value:0,0!==a.udfField.userDefinedFieldGroupDTO.id&&((0,h.L0)()?yield a.dbService.getByKey("data","udf-fields-group-id-"+a.udfField.userDefinedFieldGroupDTO.id).toPromise().then(t=>{void 0!==t&&a.setUdfForm(t.data,e)}):yield a.udfService.getUdfField(a.udfField).subscribe(t=>{a.setUdfForm(t,e)}))})()}setUdfForm(e,t){this.udfFields[t]=e,this.udfFields[t].filter(e=>0!==e.idUDFParentField).map(e=>e.fieldListValuesDTOs=[]);const n=this.udfFields[t].filter(e=>e.name===u.J.UDF_FIELD_HIJRI_DOF);n.length>0&&this.udfFields[t].splice(this.udfFields[t].indexOf(n[0]),1);for(let i=0;i<this.udfFields[t].length;i++)!0===this.udfFields[t][i].mandatory?this.udfForm.addControl("udfField"+t+i,new o.NI("",[o.kI.required,o.kI.pattern(this.udfFields[t][i].fieldMasc)])):!1===this.udfFields[t][i].mandatory&&this.udfForm.addControl("udfField"+t+i,new o.NI("",o.kI.pattern(this.udfFields[t][i].fieldMasc)))}addUdf(){this.listUDFGroups.push(new d.t),this.udfFields[this.indexFormUdf]=[],this.udfForm.addControl("udfGroup"+this.indexFormUdf,new o.NI("")),this.indexFormUdf++}toggleCollapseLoanAnalyses(){this.expanded=!this.expanded}deleteGroupe(e){this.listUDFGroups.splice(e,1),this.udfFields.splice(e,1),this.indexFormUdf--}onSubmitLoan(e){if(this.listUDFGroups.length>=0){this.udfLinks=[];for(let t=0;t<this.listUDFGroups.length;t++)for(let n=0;n<this.udfFields[t].length;n++){const i=new m.l;null!==e.loanId&&(i.category=u.J.LOAN_CATEGORY,i.elementId=e.loanId),5===this.udfFields[t][n].fieldType?(i.fieldValue=this.udfForm.controls["udfField"+t+n].value.idUDFListValue,i.udfListValueId=this.udfForm.controls["udfField"+t+n].value.idUDFListLink):i.fieldValue=this.udfForm.controls["udfField"+t+n].value,i.userDefinedFieldsDTO=this.udfFields[t][n],i.indexGroup=t,this.udfLinks.push(i)}}return this.udfLinks}onSubmitCustomer(e){if(this.listUDFGroups.length>=0){this.udfLinks=[];for(let t=0;t<this.listUDFGroups.length;t++)for(let n=0;n<this.udfFields[t].length;n++){const i=new m.l;i.category=u.J.CUSTOMER_CATEGORY_CUSTOMER,i.elementId=e.id,5===this.udfFields[t][n].fieldType?(i.fieldValue=this.udfForm.controls["udfField"+t+n].value.idUDFListValue,i.udfListValueId=this.udfForm.controls["udfField"+t+n].value.idUDFListLink):i.fieldValue=this.udfForm.controls["udfField"+t+n].value,i.userDefinedFieldsDTO=this.udfFields[t][n],i.indexGroup=t,this.udfLinks.push(i)}}return this.udfLinks}clearForm(){this.udfForm.reset()}getUdfFiledListNationality(){var e=this;return(0,i.Z)(function*(){const t=new s.x;t.userDefinedFieldGroupDTO=new d.t,t.userDefinedFieldGroupDTO.code=u.J.CUSTOMER_NATIONALITY_CODE,e.udfService.getUdfField(t).subscribe(t=>{e.udfSettingNationality=t})})()}changeUDFField(e,t){var n=this;return(0,i.Z)(function*(){const i=n.udfFields[e][t];for(let a=0;a<n.udfFields[e].length;a++)if(n.udfFields[e][a].idUDFParentField===i.id)if((0,h.L0)())yield n.dbService.getByKey("data","udf-fields-group-id-"+n.udfFields[e][a].userDefinedFieldGroupDTO.id).toPromise().then(i=>{if(void 0!==i){const o=i.data?.filter(t=>t.id===n.udfFields[e][a].id);if(o.length>0){let i=o[0].fieldListValuesDTOs;i=i.filter(i=>i.parentUDFListValue===n.udfForm.controls["udfField"+e+t].value.id),n.udfFields[e][a].fieldListValuesDTOs=i}}});else{const i=new p.X;i.parentUDFListValue=n.udfForm.controls["udfField"+e+t].value.id,n.udfService.getUdfListValue(i).subscribe(t=>{n.udfFields[e][a].fieldListValuesDTOs=t})}})()}mascPlacHolder(e){if(""!==e){e=new RegExp(e);let t=0;e.source.match(/\d+/g).map(Number).forEach(e=>{t=e});let n="";for(let e=1;e<=t;e++)n+="x";return n}return""}isOfflineModeEnabled(){return(0,h.L0)()}fillUdfForm(e,t){var n=this;return(0,i.Z)(function*(){yield n.udfGroupsFound.subscribe(function(){var a=(0,i.Z)(function*(i){if(!0===i){let i=[];const a=new m.l;if(a.category=e,a.elementId=t,(0,h.L0)()&&e===u.J.CUSTOMER_CATEGORY_CUSTOMER)if(n.sharedService.getCustomer().userDefinedFieldsLinksDTOs){let e=[];n.sharedService.getCustomer().userDefinedFieldsLinksDTOs.forEach(t=>{e.includes(t.userDefinedFieldsDTO.userDefinedFieldGroupDTO.id)||e.push(t.userDefinedFieldsDTO.userDefinedFieldGroupDTO.id)});const t=n.udfGroups.filter(t=>e.some(e=>e===t.id)?t:null);i=(0,h.Zu)(n.sharedService.getCustomer().userDefinedFieldsLinksDTOs,t,null)}else yield n.dbService.getByKey("data","getUdfLinkGroupby_"+t).toPromise().then(e=>{void 0!==e&&(i=e.data)});else yield n.udfService.getUdfLinkGroupby(a).toPromise().then(e=>i=e);i.forEach(e=>{if(void 0!==n.udfGroups.find(t=>t.id===e.userDefinedFieldGroupID)&&void 0===n.listUDFGroups.find(t=>t.id===e.userDefinedFieldGroupID)){const t=new d.t;t.id=e.userDefinedFieldGroupID,t.enabled=!0,t.mondatory=e.mondatory,t.indexGroup=n.indexFormUdf,t.code=e.userDefinedFieldGroupName,n.udfForm.addControl("udfGroup"+n.indexFormUdf,new o.NI("",o.kI.required)),n.udfForm.controls["udfGroup"+n.indexFormUdf].setValue(e.userDefinedFieldGroupID),n.listUDFGroups.push(t),n.indexFormUdf++}});for(let e=0;e<n.listUDFGroups.length;e++)n.getUdfFieldLoanValues(i,e,!1,n.listUDFGroups[e].id)}});return function(e){return a.apply(this,arguments)}}())})()}getUdfFieldLoanValues(e,t,n,a){var l=this;return(0,i.Z)(function*(){if(l.udfFields[t]=[],(0,h.L0)())yield l.dbService.getByKey("data","udf-fields-group-id-"+a).toPromise().then(e=>{void 0!==e&&(l.udfFields[t]=e.data)});else{let e=new s.x;e.userDefinedFieldGroupDTO=new d.t,e.userDefinedFieldGroupDTO.id=a,yield l.udfService.getUdfField(e).toPromise().then(e=>{l.udfFields[t]=e})}l.udfGroup=l.listUDFGroups[t];let i,r=new c.O;r.udfGroupeFieldsModels=[],n?r=e[l.udfGroup.indexGroup]:e.forEach(e=>{e.userDefinedFieldGroupID===l.udfGroup.id&&(r=e)});for(let e=0;e<l.udfFields[t].length;e++)i=!1,r.udfGroupeFieldsModels.forEach(n=>{n.udfFieldID===l.udfFields[t][e].id&&(l.udfFields[t][e].idAbacusUDFLink=n.idAbacusUDFLink,l.udfFields[t][e].surveysId=n.surveysId,l.udfFields[t][e].idUDFLink=n.id,l.udfFields[t][e].delete=!1,0!==l.udfFields[t][e].idUDFParentField?(i=!0,l.udfForm.addControl("udfField"+t+e,new o.NI("",o.kI.required)),r.udfGroupeFieldsModels.forEach(i=>{if(i.udfFieldID===l.udfFields[t][e].idUDFParentField){const i=new p.X;i.parentUDFListValue=l.udfForm.controls["udfField"+t+e].value.id,l.udfService.getUdfListValue(i).subscribe(i=>{l.udfFields[t][e].fieldListValuesDTOs=i,i.forEach(i=>{i.idUDFListValue===n.fieldValueId&&l.udfForm.controls["udfField"+t+e].setValue(i)})})}})):5===l.udfFields[t][e].fieldType?l.udfFields[t][e].fieldListValuesDTOs.forEach(a=>{a.idUDFListValue===n.fieldValueId&&(l.udfForm.contains("udfField"+t+e)?l.udfForm.controls["udfField"+t+e].setValue(a):l.udfForm.addControl("udfField"+t+e,!0===l.udfFields[t][e].mandatory?new o.NI(a,o.kI.required):new o.NI(a)),i=!0)}):(l.udfForm.contains("udfField"+t+e)?l.udfForm.controls["udfField"+t+e].setValue(n.value):l.udfForm.addControl("udfField"+t+e,new o.NI(n.value,!0===l.udfFields[t][e].mandatory?[o.kI.required,o.kI.pattern(l.udfFields[t][e].fieldMasc)]:o.kI.pattern(l.udfFields[t][e].fieldMasc))),i=!0))}),i||l.udfForm.addControl("udfField"+t+e,new o.NI("",!0===l.udfFields[t][e].mandatory?[o.kI.required,o.kI.pattern(l.udfFields[t][e].fieldMasc)]:o.kI.pattern(l.udfFields[t][e].fieldMasc)))})()}compareGroup(e,t){return e===t}compareFieldUDF(e,t){return void 0!==t&&void 0!==e&&null!==t&&null!==e&&void 0!==t.idUDFListValue&&void 0!==e.idUDFListValue&&null!==t.idUDFListValue&&null!==e.idUDFListValue&&e.idUDFListValue===t.idUDFListValue}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(v.H),a.\u0275\u0275directiveInject(o.qu),a.\u0275\u0275directiveInject(x.by),a.\u0275\u0275directiveInject(S.F),a.\u0275\u0275directiveInject(F.R),a.\u0275\u0275directiveInject(y.ys))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-udf"]],inputs:{expanded:"expanded",typeUdfLoan:"typeUdfLoan",typeUdfCustomer:"typeUdfCustomer",productId:"productId",show:"show"},outputs:{udfLinksNationality:"udfLinksNationality"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"card-hover-shadow-2x","mb-1","card"],["data-target","#collapseLoanAnalyses","aria-expanded","true","aria-controls","collapseCustomerAccount",1,"card-header","d-flex","justify-content-between",3,"click"],[3,"ngClass"],["aria-labelledby","headingOne","data-parent","#accordionExample",3,"ngClass"],[1,"card-body"],[1,"col-xl-12","d-flex","justify-content-end","pt-3"],["type","button",1,"btn-shadow","d-inline-flex","align-items-center","btn","btn-primary",3,"click"],[1,"mx-2",3,"icon"],[3,"formGroup"],[4,"ngFor","ngForOf"],[1,"lnr-magnifier","text-secondary","pr-2"],[1,"solid"],[1,"position-relative","form-group"],[1,"row","no-gutters"],[1,"col-xl-6"],["name","udfGroup",1,"form-control",3,"formControlName","compareWith","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-xl-6","px-3"],["class","btn btn-danger",3,"click",4,"ngIf"],[3,"value"],[1,"btn","btn-danger",3,"click"],[1,"pe-7s-trash","btn-icon-wrapper","text-white"],[1,"table-responsive","mt-2"],[1,"container"],[1,"row"],["class","col-xl-4 col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-xl-4","col-md-4","mb-3"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["type","text","name","udfField",1,"form-control",3,"placeholder","formControlName"],["type","number","name","udfField",1,"form-control",3,"placeholder","formControlName"],["name","udfField",1,"form-control",3,"formControlName","compareWith","change"],["selected","","value",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["type","date","name","udfField",1,"form-control",3,"formControlName"]],template:function(e,t){1&e&&a.\u0275\u0275template(0,H,16,10,"div",0),2&e&&a.\u0275\u0275property("ngIf",t.udfGroups.length>0&&t.show)},directives:[g.NgIf,g.NgClass,x.BN,o._Y,o.JL,o.sg,E.MU,I.jv,g.NgForOf,E.HK,o.EJ,E.oH,o.JJ,o.u,I.wj,o.YN,o.Kr,o.Fj,o.wV],pipes:[L.X$],styles:[""]}),e})()},54004:function(e,t,n){n.r(t),n.d(t,{SimulationLoanRoutingModule:function(){return ae}});var i=n(99266),a=n(8239),o=n(92465),l=n(3679),r=n(30165),d=n(26772),s=n(94806),m=n(44760),u=n(32551),c=n(59006),p=n(58762),h=n(58761),f=n(91458),v=n(55041),x=n(98758),S=n(35758),F=n(94402),y=n(22134),g=n(37716),E=n(85627),I=n(23990),L=n(28970),T=n(65981),D=n(59903),b=n(96239),C=n(38583),A=n(61181),V=n(29790),P=n(12547),w=n(63697),_=n(40226),M=n(25465),U=n(57552),O=n(83446),N=n(35554);function R(e,t){1&e&&(g.\u0275\u0275element(0,"app-page-title",71),g.\u0275\u0275pipe(1,"translate")),2&e&&g.\u0275\u0275property("heading",g.\u0275\u0275pipeBind1(1,4,"simulation"))("icon","pe-7s-culture")("account","")("status",-1)}function k(e,t){if(1&e&&(g.\u0275\u0275elementStart(0,"option",72),g.\u0275\u0275text(1),g.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;g.\u0275\u0275property("ngValue",e),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate1(" ",e.description," ")}}function G(e,t){if(1&e&&(g.\u0275\u0275elementStart(0,"option",72),g.\u0275\u0275text(1),g.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;g.\u0275\u0275property("ngValue",e),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate1(" ",e.description," ")}}function q(e,t){if(1&e){const e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"div",8),g.\u0275\u0275elementStart(1,"div",73),g.\u0275\u0275elementStart(2,"label"),g.\u0275\u0275text(3),g.\u0275\u0275pipe(4,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(5,"div",21),g.\u0275\u0275element(6,"input",74),g.\u0275\u0275pipe(7,"translate"),g.\u0275\u0275elementStart(8,"span",23),g.\u0275\u0275elementStart(9,"button",24),g.\u0275\u0275text(10),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(11,"div",73),g.\u0275\u0275elementStart(12,"label"),g.\u0275\u0275text(13),g.\u0275\u0275pipe(14,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(15,"div",21),g.\u0275\u0275elementStart(16,"input",75),g.\u0275\u0275listener("change",function(t){return g.\u0275\u0275restoreView(e),g.\u0275\u0275nextContext().updateApportPersonnel(t.target.value)}),g.\u0275\u0275pipe(17,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(18,"span",23),g.\u0275\u0275elementStart(19,"button",76),g.\u0275\u0275text(20),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd()}if(2&e){const e=g.\u0275\u0275nextContext();g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(4,8,"supplier.assets_amount")," "),g.\u0275\u0275advance(3),g.\u0275\u0275propertyInterpolate("placeholder",g.\u0275\u0275pipeBind1(7,10,"supplier.assets_amount")),g.\u0275\u0275propertyInterpolate("value",e.currentAmount),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(e.currencySymbol),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(14,12,"supplier.personnel_imput")),g.\u0275\u0275advance(3),g.\u0275\u0275propertyInterpolate("placeholder",g.\u0275\u0275pipeBind1(17,14,"supplier.personnel_imput")),g.\u0275\u0275propertyInterpolate("value",e.apportPersonnel),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(e.currencySymbol)}}function B(e,t){if(1&e&&(g.\u0275\u0275elementStart(0,"div",77),g.\u0275\u0275elementStart(1,"label"),g.\u0275\u0275text(2),g.\u0275\u0275pipe(3,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(4,"span",11),g.\u0275\u0275text(5,"*"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(6,"div",21),g.\u0275\u0275element(7,"input",78),g.\u0275\u0275elementStart(8,"span",23),g.\u0275\u0275elementStart(9,"button",76),g.\u0275\u0275text(10),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd()),2&e){const e=g.\u0275\u0275nextContext();g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(3,2,"loan.frequency"),""),g.\u0275\u0275advance(8),g.\u0275\u0275textInterpolate(e.currencySymbol)}}function j(e,t){if(1&e){const e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"div",20),g.\u0275\u0275elementStart(1,"label"),g.\u0275\u0275text(2),g.\u0275\u0275pipe(3,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(4,"span",11),g.\u0275\u0275text(5,"*"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(6,"div",21),g.\u0275\u0275elementStart(7,"input",79),g.\u0275\u0275listener("change",function(){return g.\u0275\u0275restoreView(e),g.\u0275\u0275nextContext().getInitialPaymentValue()}),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(8,"span",23),g.\u0275\u0275elementStart(9,"button",76),g.\u0275\u0275text(10),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd()}if(2&e){const e=g.\u0275\u0275nextContext();g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(3,2,"loan.interest_frequency"),""),g.\u0275\u0275advance(8),g.\u0275\u0275textInterpolate(e.currencySymbol)}}function J(e,t){if(1&e&&(g.\u0275\u0275elementStart(0,"option",81),g.\u0275\u0275text(1),g.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;g.\u0275\u0275property("selected",0==t.index)("ngValue",e),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate1(" ",e.code," ")}}function Y(e,t){if(1&e&&(g.\u0275\u0275elementContainerStart(0),g.\u0275\u0275template(1,J,2,3,"option",80),g.\u0275\u0275elementContainerEnd()),2&e){const e=g.\u0275\u0275nextContext();g.\u0275\u0275advance(1),g.\u0275\u0275property("ngForOf",null==e.selectedProduct||null==e.selectedProduct.productDetailsDTOs[0]?null:e.selectedProduct.productDetailsDTOs[0].deferredPeriodTypeDTOs)}}function z(e,t){if(1&e){const e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"div",51),g.\u0275\u0275elementStart(1,"button",82),g.\u0275\u0275listener("click",function(){g.\u0275\u0275restoreView(e);const t=g.\u0275\u0275nextContext();return t.openRequestExceptionModal(t.requestExceptionModal)}),g.\u0275\u0275text(2),g.\u0275\u0275pipe(3,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd()}if(2&e){const e=g.\u0275\u0275nextContext();g.\u0275\u0275advance(1),g.\u0275\u0275property("disabled",!e.activeRenewalConditionSetting),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(3,2,"loan_management.request_exception.request_exception")," ")}}function H(e,t){if(1&e){const e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"div",98),g.\u0275\u0275elementStart(1,"button",99),g.\u0275\u0275listener("click",function(){return g.\u0275\u0275restoreView(e),g.\u0275\u0275nextContext(2).calculate(!1)}),g.\u0275\u0275text(2),g.\u0275\u0275pipe(3,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(4,"input",100),g.\u0275\u0275listener("click",function(t){return g.\u0275\u0275restoreView(e),g.\u0275\u0275nextContext(2).scheduleFlexibleChecked(t)}),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(5,"label",101),g.\u0275\u0275text(6),g.\u0275\u0275pipe(7,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd()}2&e&&(g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(3,2,"schedule.synchronize_schedule")," "),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(7,4,"schedule.flexible_schedule")," "))}const W=function(){return{"font-weight":"bold"}},$=function(){return{"font-weight":"normal"}};function Q(e,t){if(1&e&&(g.\u0275\u0275elementStart(0,"td",102),g.\u0275\u0275text(1),g.\u0275\u0275pipe(2,"number"),g.\u0275\u0275elementEnd()),2&e){const e=g.\u0275\u0275nextContext().$implicit,t=g.\u0275\u0275nextContext(2);g.\u0275\u0275property("ngStyle",e===t.lastLine?g.\u0275\u0275pureFunction0(7,W):g.\u0275\u0275pureFunction0(8,$)),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate2(" ",g.\u0275\u0275pipeBind3(2,3,e.totalRepayment,t.decimalPlaces,"fr")," ",t.currencySymbol," ")}}function K(e,t){if(1&e){const e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"td"),g.\u0275\u0275elementStart(1,"input",104),g.\u0275\u0275listener("change",function(){return g.\u0275\u0275restoreView(e),g.\u0275\u0275nextContext(3).totalRepayementChanged()})("ngModelChange",function(t){return g.\u0275\u0275restoreView(e),g.\u0275\u0275nextContext().$implicit.totalRepayment=t}),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd()}if(2&e){const e=g.\u0275\u0275nextContext().$implicit;g.\u0275\u0275advance(1),g.\u0275\u0275property("ngModel",e.totalRepayment)}}function X(e,t){if(1&e&&(g.\u0275\u0275elementStart(0,"td",102),g.\u0275\u0275text(1),g.\u0275\u0275pipe(2,"number"),g.\u0275\u0275elementEnd()),2&e){const e=g.\u0275\u0275nextContext().$implicit,t=g.\u0275\u0275nextContext(2);g.\u0275\u0275property("ngStyle",e===t.lastLine?g.\u0275\u0275pureFunction0(7,W):g.\u0275\u0275pureFunction0(8,$)),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate2("",g.\u0275\u0275pipeBind3(2,3,e.balance,t.decimalPlaces,"fr")," ",t.currencySymbol,"")}}function Z(e,t){if(1&e&&g.\u0275\u0275element(0,"td",102),2&e){const e=g.\u0275\u0275nextContext().$implicit,t=g.\u0275\u0275nextContext(2);g.\u0275\u0275property("ngStyle",e===t.lastLine?g.\u0275\u0275pureFunction0(1,W):g.\u0275\u0275pureFunction0(2,$))}}function ee(e,t){if(1&e&&(g.\u0275\u0275elementStart(0,"tr"),g.\u0275\u0275elementStart(1,"td",102),g.\u0275\u0275text(2),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(3,"td",102),g.\u0275\u0275text(4),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(5,Q,3,9,"td",103),g.\u0275\u0275template(6,K,2,1,"td",49),g.\u0275\u0275elementStart(7,"td",102),g.\u0275\u0275text(8),g.\u0275\u0275pipe(9,"number"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(10,"td",102),g.\u0275\u0275text(11),g.\u0275\u0275pipe(12,"number"),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(13,X,3,9,"td",103),g.\u0275\u0275template(14,Z,1,3,"td",103),g.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=g.\u0275\u0275nextContext(2);g.\u0275\u0275advance(1),g.\u0275\u0275property("ngStyle",e===n.lastLine?g.\u0275\u0275pureFunction0(22,W):g.\u0275\u0275pureFunction0(23,$)),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate1(" ",e.period,""),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngStyle",e===n.lastLine?g.\u0275\u0275pureFunction0(24,W):g.\u0275\u0275pureFunction0(25,$)),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate1(" ",e.repaymentDate,""),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngIf",!n.scheduleFlexibleIsChecked),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngIf",n.scheduleFlexibleIsChecked),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngStyle",e===n.lastLine?g.\u0275\u0275pureFunction0(26,W):g.\u0275\u0275pureFunction0(27,$)),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate2(" ",g.\u0275\u0275pipeBind3(9,14,e.interestRepayment,n.decimalPlaces,"fr")," ",n.currencySymbol," "),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngStyle",e===n.lastLine?g.\u0275\u0275pureFunction0(28,W):g.\u0275\u0275pureFunction0(29,$)),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate2(" ",g.\u0275\u0275pipeBind3(12,18,e.loanRepayment,n.decimalPlaces,"fr")," ",n.currencySymbol," "),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngIf",e!==n.lastLine),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngIf",e===n.lastLine)}}function te(e,t){if(1&e){const e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"div"),g.\u0275\u0275template(1,H,8,6,"div",83),g.\u0275\u0275elementStart(2,"div",2),g.\u0275\u0275elementStart(3,"div",84),g.\u0275\u0275listener("click",function(){return g.\u0275\u0275restoreView(e),g.\u0275\u0275nextContext().toggleCollapseLoanSchedule()}),g.\u0275\u0275elementStart(4,"div"),g.\u0275\u0275element(5,"i",85),g.\u0275\u0275text(6),g.\u0275\u0275pipe(7,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(8,"div"),g.\u0275\u0275element(9,"i",5),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(10,"div",6),g.\u0275\u0275elementStart(11,"div",86),g.\u0275\u0275elementStart(12,"button",87),g.\u0275\u0275listener("click",function(){g.\u0275\u0275restoreView(e);const t=g.\u0275\u0275nextContext();return t.downloadSchedule(t.schedules)}),g.\u0275\u0275element(13,"i",88),g.\u0275\u0275pipe(14,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(15,"div",89),g.\u0275\u0275elementStart(16,"table",90),g.\u0275\u0275elementStart(17,"thead"),g.\u0275\u0275elementStart(18,"tr"),g.\u0275\u0275elementStart(19,"th"),g.\u0275\u0275text(20),g.\u0275\u0275pipe(21,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(22,"th"),g.\u0275\u0275text(23),g.\u0275\u0275pipe(24,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(25,"th"),g.\u0275\u0275text(26),g.\u0275\u0275pipe(27,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(28,"th"),g.\u0275\u0275text(29),g.\u0275\u0275pipe(30,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(31,"th"),g.\u0275\u0275text(32),g.\u0275\u0275pipe(33,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(34,"th"),g.\u0275\u0275text(35),g.\u0275\u0275pipe(36,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(37,"tbody"),g.\u0275\u0275template(38,ee,15,30,"tr",91),g.\u0275\u0275pipe(39,"slice"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(40,"div",92),g.\u0275\u0275elementStart(41,"div",93),g.\u0275\u0275elementStart(42,"div",94),g.\u0275\u0275elementStart(43,"ngb-pagination",95),g.\u0275\u0275listener("pageChange",function(t){return g.\u0275\u0275restoreView(e),g.\u0275\u0275nextContext().page=t}),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(44,"div",94),g.\u0275\u0275elementStart(45,"div",96),g.\u0275\u0275elementStart(46,"select",97),g.\u0275\u0275listener("ngModelChange",function(t){return g.\u0275\u0275restoreView(e),g.\u0275\u0275nextContext().pageSize=t}),g.\u0275\u0275elementStart(47,"option",72),g.\u0275\u0275text(48),g.\u0275\u0275pipe(49,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(50,"option",72),g.\u0275\u0275text(51),g.\u0275\u0275pipe(52,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(53,"option",72),g.\u0275\u0275text(54),g.\u0275\u0275pipe(55,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(56,"option",72),g.\u0275\u0275text(57),g.\u0275\u0275pipe(58,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd()}if(2&e){const e=g.\u0275\u0275nextContext();g.\u0275\u0275advance(1),g.\u0275\u0275property("ngIf",e.loanSharedService.habilitationButton("UPDATE","acm-schedule")),g.\u0275\u0275advance(5),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(7,26,"schedule.schedule")," "),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngClass",!0===e.expandedLoanSchedule?"lnr-chevron-up text-secondary":"lnr-chevron-down text-secondary"),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngClass",!0===e.expandedLoanSchedule?"collapse show":"collapse"),g.\u0275\u0275advance(3),g.\u0275\u0275propertyInterpolate("ngbTooltip",g.\u0275\u0275pipeBind1(14,28,"schedule.dowloand_schedule")),g.\u0275\u0275advance(7),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(21,30,"schedule.period")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(24,32,"schedule.repayment_date")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(27,34,"schedule.total_repayment")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(30,36,"schedule.interest")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(33,38,"schedule.principal")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(36,40,"schedule.balance")),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngForOf",g.\u0275\u0275pipeBind3(39,42,e.schedules,(e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize)),g.\u0275\u0275advance(5),g.\u0275\u0275property("collectionSize",e.schedules.length)("page",e.page)("pageSize",e.pageSize)("maxSize",3)("boundaryLinks",!0),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngModel",e.pageSize),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngValue",5),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(49,46,"pagination.5_item")),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngValue",10),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(52,48,"pagination.10_item")),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngValue",20),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(55,50,"pagination.20_item")),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngValue",50),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(58,52,"pagination.50_item"))}}function ne(e,t){if(1&e){const e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"div",105),g.\u0275\u0275elementStart(1,"button",106),g.\u0275\u0275listener("click",function(){return g.\u0275\u0275restoreView(e),g.\u0275\u0275nextContext().exit()}),g.\u0275\u0275text(2),g.\u0275\u0275pipe(3,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(4,"button",107),g.\u0275\u0275listener("click",function(){return g.\u0275\u0275restoreView(e),g.\u0275\u0275nextContext().submitLoan()}),g.\u0275\u0275text(5),g.\u0275\u0275pipe(6,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(7,"button",107),g.\u0275\u0275listener("click",function(){return g.\u0275\u0275restoreView(e),g.\u0275\u0275nextContext().submitcustomer()}),g.\u0275\u0275text(8),g.\u0275\u0275pipe(9,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd()}if(2&e){const e=g.\u0275\u0275nextContext();g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(3,5,"button.exit")),g.\u0275\u0275advance(2),g.\u0275\u0275property("disabled",e.customerActiveAccount>=e.selectedProduct.maxAccounts),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(6,7,"button.save_and_add_loan")),g.\u0275\u0275advance(2),g.\u0275\u0275property("disabled",e.customerActiveAccount>=e.selectedProduct.maxAccounts),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(9,9,"save_customer"))}}const ie=[{path:"",children:[{path:"simulation-loan",component:(()=>{class e{constructor(e,t,n,i,a,o,l,u,c,h,v,S,F,y,g,E){this.devToolsServices=e,this.formBuilder=t,this.router=n,this.loanManagementService=i,this.settingsService=a,this.sharedService=o,this.loanApprovalService=l,this.customerManagementService=u,this.datePipe=c,this.modalService=h,this.translate=v,this.authService=S,this.route=F,this.exceptionRequestService=y,this.dateFormatterService=g,this.dbService=E,this.edit="edit",this.expandedLoanDetails=!0,this.expandedLoanSimulation=!0,this.expandedLoanSchedule=!0,this.loanEntity=new r.t,this.loans=[],this.customer=new m.x,this.schedules=[],this.loadingCalcule=!1,this.product=new s.J,this.productAbacus=new s.J,this.products=[],this.accountPortfolios=[],this.productLoanReasons=[],this.sourceOfFundss=[],this.minDateIssueDate=new Date,this.minInitialPayement=new Date,this.activeInitialPayement=!1,this.selectedLoan=new r.t,this.currentPath=p.J.LOAN_DETAIL_URL,this.selectedPorfolio=new d.H,this.selectedProduct=new s.J,this.customerMembers=[],this.currencySymbol="",this.minAmount=0,this.maxAmount=0,this.minTerm=0,this.maxTerm=0,this.amountTrouv=!1,this.termTrouv=!1,this.apr=0,this.irr=0,this.aprWithoutRound=0,this.irrWithoutRound=0,this.issueFeeAmount=0,this.updateId=0,this.apportPersonnel=0,this.checkCalculate=!0,this.customerActiveAccount=0,this.effectiveInterestRateStandard=0,this.minAmountValidation=0,this.maxAmountValidation=0,this.minTermValidation=0,this.maxTermValidation=0,this.minPeriodsValidation=0,this.maxPeriodsValidation=0,this.limitMinAmountValidation=!1,this.limitMaxAmountValidation=!1,this.limitMinTermValidation=!1,this.limitMaxTermValidation=!1,this.limitMinPeriodsValidation=!1,this.limitMaxPeriodsValidation=!1,this.customerRenewalCondition=new f.S,this.activeRenewalConditionSetting=!1,this.renewelLoanCondition=!1,this.activeException=!1,this.acceptedException=!1,this.newExceptionRequest=new x.F,this.acceptedExceptionRequest=new x.F,this.deferedPeriodeSettingTypes=!0,this.listAssets=[],this.supplier=!1,this.scheduleFlexibleIsChecked=!1,this.useExternalCbs=!1}ngOnInit(){var e=this;return(0,a.Z)(function*(){yield e.createForm(),(0,S.D)([(0,F.D)(e.getProductLoanReason()),(0,F.D)(e.getProducts())]).subscribe(([t])=>{"ADD_ASSET"===e.source&&(e.fillAddLoanForm(),e.fillAddLoanSimulationIndivForm())}),e.route.queryParams.subscribe(t=>{if(t){e.source=t.source;let n=0;"ADD_ASSET"===t.source&&(void 0!==e.sharedService.supplier.assets&&(e.sharedService.supplier.assets.forEach(t=>{const i=new o.V;i.remiseArticle=t.remiseArticle,i.prixUnitaire=t.prixUnitaire,i.quantiteArticle=1,i.asset=t,n+=i.prixUnitaire*(1-i.remiseArticle/100)*i.quantiteArticle,e.listAssets.push(i)}),e.loanEntity.loanAssetsDtos.push(...e.listAssets)),e.loanEntity=e.sharedService.getLoan())}}),e.settingsService.getEnvirementValueByKeys([p.J.DEFERRED_PERIODE_TYPES,,p.J.USE_EXTERNAL_CBS]).subscribe(t=>{"0"===t[0].value&&(e.deferedPeriodeSettingTypes=!1),"1"==t[1].value&&(e.useExternalCbs=!0)}),void 0===e.completeLoanData&&(e.completeLoanData=!0),e.schedules.length=0,e.pageSize=5,e.page=1;const t=new Date;t.setHours(0,0,0,0),e.minIssueDatevalue=e.datePipe.transform(t.setDate(t.getDate()),"yyyy-MM-dd"),e.addLoanSimulationIndivForm.controls.issueDate.setValue(e.minIssueDatevalue),e.getInitialPaymentValue()})()}updateAge(){const[e,t,n]=this.schedules[this.schedules.length-2].repaymentDate.split("/"),i=[n,t,e].join("/"),a=new Date(i),o=new Date(this.customer.dateOfBirth),l=Math.abs(a.getTime()-o.getTime());return Math.floor(l/864e5/365)}createForm(){this.addLoanForm=this.formBuilder.group({product:["",y.MS],loanReason:["",y.MS]}),this.createSimulationIndivForm()}getProductLoanReason(){var e=this;return(0,a.Z)(function*(){let t;(0,y.L0)()?(t=yield e.dbService.getByKey("data","product_loan_reason").toPromise(),t=t.data):t=yield e.loanManagementService.getProductLoanReason().toPromise(),e.productLoanReasons=t})()}createSimulationIndivForm(){this.addLoanSimulationIndivForm=this.formBuilder.group({calculatorType:[1,y.MS],loanAmount:["",y.MS],repayment:[""],loanTerm:["",y.MS],termType:["3",y.MS],frequencyType:[""],fees:[0],issueDate:["",y.MS],initialPayment:[""],periodsDeferred:[],periodsDeferredType:["",y.MS],vat:[0],apr:[0],closingBalance:[""],frequency:[1,y.MS],interestFrequency:[1,y.MS]})}activeInitial(){this.activeInitialPayement=!0,this.minInitialPayement=this.addLoanForm.value.issueDate}clearForm(){this.addLoanForm.reset(),this.addLoanSimulationIndivForm.reset(),this.schedules=[],this.childcomp.clearForm()}getProducts(){var e=this;return(0,a.Z)(function*(){let t;const n=new s.J;return n.productIndiv=!0,t=yield e.loanManagementService.getProducts(n).toPromise().then(t=>(e.products=t,e.decimalPlaces=e.devToolsServices.getDecimalPlaces(e.products[0].acmCurrency.decimalPlaces),e.currencySymbol=e.products[0].acmCurrency.symbol,!0)),t})()}toggleCollapseLoanDetails(){this.expandedLoanDetails=!this.expandedLoanDetails}toggleCollapseLoanSimulation(){this.expandedLoanSimulation=!this.expandedLoanSimulation}toggleCollapseLoanSchedule(){this.expandedLoanSchedule=!this.expandedLoanSchedule}calculate(e){var t=this;return(0,a.Z)(function*(){if(t.customer.customerIdExtern=1,t.customer.dateOfBirth=new Date("1990-05-05"),t.loanEntity.customerDTO=t.customer,t.devToolsServices.makeFormAsTouched(t.addLoanForm),!t.addLoanForm.valid||!t.addLoanSimulationIndivForm.valid)return t.devToolsServices.openToast(3,"alert.check-data"),void t.devToolsServices.backTop();if(t.customer.customerType===p.J.CUSTOMER_TYPE_INDIVIDUAL&&t.renewelLoanCondition&&t.activeRenewalConditionSetting){if(t.addLoanSimulationIndivForm.controls.loanAmount.value<t.minAmountValidation)return void t.devToolsServices.openToast(3,"alert.check_renewal_setting");if(t.addLoanSimulationIndivForm.controls.loanAmount.value>t.maximumAllowedAmount)return t.devToolsServices.openToastWithParameter(3,"alert.max_allowed_amount",String(t.maximumAllowedAmount)),t.addLoanSimulationIndivForm.controls.loanAmount.clearValidators(),t.addLoanSimulationIndivForm.controls.loanAmount.setValidators([y.MS,l.kI.max(t.maximumAllowedAmount)]),t.addLoanSimulationIndivForm.controls.loanAmount.updateValueAndValidity(),void t.addLoanSimulationIndivForm.controls.loanAmount.markAsTouched()}if(t.customer.customerType===p.J.CUSTOMER_TYPE_COMMUNITY_SOLIDARITY||!t.addLoanSimulationIndivForm.valid||t.checkIssueDate()&&t.checkDeferredPeriod()){if(!t.selectedProduct.isFrequencyWithDeferredPeriode&&0!==t.addLoanSimulationIndivForm.controls.periodsDeferred.value&&1!==t.addLoanSimulationIndivForm.controls.frequency.value)return void t.devToolsServices.openToast(3,"alert.error_frequency_with_deferred_periode");if(t.selectedProduct.isFrequency){const e=t.addLoanSimulationIndivForm.controls.periodsDeferred.value,n=t.addLoanSimulationIndivForm.controls.loanTerm.value,i=t.addLoanSimulationIndivForm.controls.frequency.value,a=t.addLoanSimulationIndivForm.controls.interestFrequency.value;if(n%i!=0)return void t.devToolsServices.openToast(3,"alert.error_frequency_mod_loan_term");if(i%a!=0)return void t.devToolsServices.openToast(3,"alert.error_repayement_frequency_mod_interest_frequency");if(e>=n/i)return void t.devToolsServices.openToast(3,"alert.error_period_deferred_less_loan_term_by_frequency");if(t.minTermValidation>n/i||n/i>t.maxTermValidation)return void t.devToolsServices.openToast(3,"alert.error_loan_term_by_frequency_between_min_max")}if(t.checkMinMaxAmountTermCalculate(),t.addLoanSimulationIndivForm.valid&&t.addLoanForm.valid&&(t.amountTrouv||t.termTrouv))if(t.loadingCalcule=!0,t.loanEntity.productId=t.addLoanForm.value.product.id,t.loanEntity.loanCalculationMode=0,t.loanEntity.approvelAmount=t.addLoanSimulationIndivForm.controls.loanAmount.value,t.loanEntity.applyAmountTotal=t.addLoanSimulationIndivForm.controls.loanAmount.value,t.loanEntity.issueDate=t.addLoanSimulationIndivForm.controls.issueDate.value,t.loanEntity.initialPaymentDate=t.addLoanSimulationIndivForm.controls.initialPayment.value,t.loanEntity.normalPayment=t.addLoanSimulationIndivForm.controls.repayment.value,t.loanEntity.termPeriodNum=t.addLoanSimulationIndivForm.controls.loanTerm.value,t.loanEntity.paymentFreq=t.addLoanSimulationIndivForm.controls.frequency.value,t.loanEntity.interestFreq=t.addLoanSimulationIndivForm.controls.interestFrequency.value,t.loanEntity.termPeriodID=t.addLoanSimulationIndivForm.controls.termType.value,t.loanEntity.periodsDeferred=t.addLoanSimulationIndivForm.controls.periodsDeferred.value,t.loanEntity.periodsDeferredType=t.addLoanSimulationIndivForm.controls.periodsDeferredType.value.deferredPeriodTypeId,t.loanEntity.productDTO=t.addLoanForm.value.product,t.loanEntity.customerDTO=t.customer,e&&(t.scheduleFlexibleIsChecked=!1,t.schedules=[]),t.loanEntity.loanSchedules=t.schedules,(0,y.L0)()){null===t.loanEntity.loanId&&(t.loanEntity.loanId=t.customer.id),yield t.dbService.update("calculate-loans",t.loanEntity).toPromise();const e=t.addLoanSimulationIndivForm.controls.loanTerm.value,n=t.addLoanSimulationIndivForm.controls.loanAmount.value*(t.addLoanSimulationIndivForm.value.product.flatInterestRate/100/12+1/e);t.addLoanSimulationIndivForm.controls.repayment.setValue(Math.floor(n));for(let i=0;i<e;i++){const e=new u.Y;e.period=String(i+1),e.totalRepayment=n,t.schedules.push(e)}t.checkCalculate=!1,t.loadingCalcule=!1}else yield t.loanApprovalService.calculateLoanSchedules(t.loanEntity).toPromise().then(e=>{if(t.schedules=e.loanSchedule,t.updateDataIndiv(e),void 0!==t.schedules&&void 0!==t.schedules[0]&&null!=t.schedules[0].repaymentDate){const e="UTC+1",n=t.dateFormatterService.ToGregorianDateStruct(t.schedules[0].repaymentDate,"DD/MM/YYYY"),i=new Date(n.year+"-"+n.month+"-"+n.day);t.addLoanSimulationIndivForm.controls.initialPayment.setValue(t.datePipe.transform(i,"yyyy-MM-dd",e))}t.lastLine=t.schedules[t.schedules.length-1],t.loadingCalcule=!1,t.checkCalculate=!1})}})()}checkDeferredPeriod(){this.limitMaxPeriodsValidation=!1,this.limitMinPeriodsValidation=!1;const e=this.addLoanSimulationIndivForm.controls.periodsDeferred.value;if(e<this.addLoanForm.value.product.minimumDeferredPeriod||e>this.addLoanForm.value.product.maximumDeferredPeriod)return e>this.maxPeriodsValidation?this.limitMaxPeriodsValidation=!0:e<this.minPeriodsValidation&&(this.limitMinPeriodsValidation=!0),this.addLoanSimulationIndivForm.controls.periodsDeferred.setErrors({invalid:!0,message:""}),!1;{const e=this.addLoanSimulationIndivForm.controls.periodsDeferred.value;return this.addLoanSimulationIndivForm.controls.periodsDeferred.reset(),this.addLoanSimulationIndivForm.controls.periodsDeferred.setValue(e),!0}}updateDataIndiv(e){let t=1;(null!==this.selectedProduct.acmCurrency.decimalPlaces||void 0!==this.selectedProduct.acmCurrency.decimalPlaces||0!==this.selectedProduct.acmCurrency.decimalPlaces)&&(t=Math.pow(10,this.selectedProduct.acmCurrency.decimalPlaces));const n=e.issueAmount*this.selectedProduct.issueFeePercentage1/100,i=e.issueAmount*this.selectedProduct.issueFeePercentage2/100,a=n+n*this.selectedProduct.issueFeeVAT1/100+e.feeAmt1;this.feeAmount=e.feeAmt1;const o=i+i*this.selectedProduct.issueFeeVAT2/100+this.selectedProduct.issueFeeAmount2;switch(this.selectedProduct.roundType){case p.J.ROUND_UP:this.addLoanSimulationIndivForm.controls.repayment.setValue(Math.ceil((e.normalPayment+Number.EPSILON)*t)/t),this.addLoanSimulationIndivForm.controls.vat.setValue(Math.ceil((e.insurancePremium+Number.EPSILON)*t)/t),this.addLoanSimulationIndivForm.controls.apr.setValue(this.loanEntity.apr),this.addLoanSimulationIndivForm.controls.closingBalance.setValue(Math.ceil((e.issueAmount+Number.EPSILON)*t)/t),this.addLoanSimulationIndivForm.controls.fees.setValue(1==this.useExternalCbs?Math.ceil((a+o+Number.EPSILON)*t)/t:e?.acmIssueFee);break;case p.J.ROUND_DOWN:this.addLoanSimulationIndivForm.controls.repayment.setValue(Math.floor((e.normalPayment+Number.EPSILON)*t)/t),this.addLoanSimulationIndivForm.controls.vat.setValue(Math.floor((e.insurancePremium+Number.EPSILON)*t)/t),this.addLoanSimulationIndivForm.controls.apr.setValue(this.loanEntity.apr),this.addLoanSimulationIndivForm.controls.closingBalance.setValue(Math.floor((e.issueAmount+Number.EPSILON)*t)/t),this.addLoanSimulationIndivForm.controls.fees.setValue(1==this.useExternalCbs?Math.floor((a+o+Number.EPSILON)*t)/t:e?.acmIssueFee);break;case p.J.ROUND:this.addLoanSimulationIndivForm.controls.repayment.setValue(Math.round((e.normalPayment+Number.EPSILON)*t)/t),this.addLoanSimulationIndivForm.controls.vat.setValue(Math.round((e.insurancePremium+Number.EPSILON)*t)/t),this.addLoanSimulationIndivForm.controls.apr.setValue(this.loanEntity.apr),this.addLoanSimulationIndivForm.controls.closingBalance.setValue(Math.round((e.issueAmount+Number.EPSILON)*t)/t),this.addLoanSimulationIndivForm.controls.fees.setValue(1==this.useExternalCbs?Math.round((a+o+Number.EPSILON)*t)/t:e?.acmIssueFee);break;default:this.addLoanSimulationIndivForm.controls.repayment.setValue(e.normalPayment),this.addLoanSimulationIndivForm.controls.vat.setValue(e.insurancePremium),this.addLoanSimulationIndivForm.controls.apr.setValue(this.loanEntity.apr),this.addLoanSimulationIndivForm.controls.closingBalance.setValue(e.issueAmount),this.addLoanSimulationIndivForm.controls.fees.setValue(1==this.useExternalCbs?a+o:e?.acmIssueFee)}this.irr=Math.round(100*(e.effectiveInterestRate+Number.EPSILON))/100,this.apr=Math.round(100*(e.apr+Number.EPSILON))/100,this.irrWithoutRound=e.effectiveInterestRate,this.aprWithoutRound=e.apr,this.issueFeeAmount=1==this.useExternalCbs?a+o:e?.acmIssueFee,0!==this.selectedProduct.flatInterestRate&&(this.effectiveInterestRateStandard=e.interestRate)}selectAssets(e){this.listAssets=e}getProductRequirement(){var e=this;return(0,a.Z)(function*(){if(""!==e.addLoanForm.value.product){e.selectedProduct=e.addLoanForm.value.product,e.supplier=e.selectedProduct.supplier,e.minPeriodsValidation=e.selectedProduct.minimumDeferredPeriod,e.addLoanSimulationIndivForm.controls.periodsDeferred.setValue(e.minPeriodsValidation),e.selectedProduct.productDetailsDTOs[0].deferredPeriodTypeDTOs[0]&&e.addLoanSimulationIndivForm.controls.periodsDeferredType.setValue(e.selectedProduct.productDetailsDTOs[0].deferredPeriodTypeDTOs[0]),e.maxPeriodsValidation=e.selectedProduct.maximumDeferredPeriod;const t=[],n=[],i=[],a=[];e.selectedProduct.productDetailsDTOs.forEach(o=>{t.push(o.minimumAmount),n.push(o.maximumAmount),i.push(o.minimumTerm),a.push(o.maximumTerm),e.minAmountValidation=Math.min(...t),e.maxAmountValidation=Math.max(...n),e.minTermValidation=Math.min(...i),e.maxTermValidation=Math.max(...a),e.loanEntity.customerDTO=e.customer,e.loanEntity.productId=e.addLoanForm.value.product.id,e.sharedService.setLoan(e.loanEntity),e.childcomp.ngOnInit()})}})()}submitLoan(){this.router.navigate([p.J.CUSTOMER_LIST_SIMULATION],{queryParams:{mode:"3"}})}submitcustomer(){this.router.navigate([p.J.CUSTOMER_URL],{queryParams:{source:"add-customer"}})}exit(){this.devToolsServices.openConfirmationDialog(p.J.EXIT_FORM_MSG,p.J.DASHBOARD_URL)}getMinMaxValueAmount(){this.termTrouv=!1;const e=[],t=[];if(this.limitMinTermValidation=!1,this.limitMaxTermValidation=!1,""===this.addLoanSimulationIndivForm.value.loanTerm||null===this.addLoanSimulationIndivForm.value.loanTerm)this.resetValidation();else if(this.selectedProduct.productDetailsDTOs.length>0)if(this.selectedProduct.productDetailsDTOs.forEach(n=>{this.addLoanSimulationIndivForm.value.loanTerm>=n.minimumTerm&&this.addLoanSimulationIndivForm.value.loanTerm<=n.maximumTerm&&(e.push(n.minimumAmount),t.push(n.maximumAmount),this.termTrouv=!0)}),this.termTrouv){if(this.minAmountValidation=Math.min(...e),this.maxAmountValidation=Math.max(...t),""!==this.addLoanSimulationIndivForm.value.loanAmount)if(this.addLoanSimulationIndivForm.value.loanAmount>=this.minAmountValidation&&this.addLoanSimulationIndivForm.value.loanAmount<=this.maxAmountValidation&&"ADD_ASSET"!==this.source){const e=this.addLoanSimulationIndivForm.value.loanAmount;this.addLoanSimulationIndivForm.controls.loanAmount.reset(),this.addLoanSimulationIndivForm.controls.loanAmount.setValue(e),this.limitMinAmountValidation=!1,this.limitMaxAmountValidation=!1}else this.limitMinAmountValidation=this.addLoanSimulationIndivForm.value.loanAmount<this.minAmountValidation,this.limitMaxAmountValidation=this.addLoanSimulationIndivForm.value.loanAmount>this.maxAmountValidation,this.addLoanSimulationIndivForm.controls.loanAmount.setErrors({invalid:!0,message:""})}else this.addLoanSimulationIndivForm.controls.loanTerm.value>this.maxTermValidation?this.limitMaxTermValidation=!0:this.addLoanSimulationIndivForm.controls.loanTerm.value<this.minTermValidation&&(this.limitMinTermValidation=!0),this.addLoanSimulationIndivForm.controls.loanTerm.setErrors({invalid:!0,message:""})}updateApportPersonnel(e){this.apportPersonnel=e,this.addLoanSimulationIndivForm.controls.loanAmount.setValue(this.currentAmount-this.apportPersonnel)}getMinMaxValueTerm(){this.amountTrouv=!1;const e=[],t=[];this.limitMinAmountValidation=!1,this.limitMaxAmountValidation=!1,""===this.addLoanSimulationIndivForm.value.loanAmount||null===this.addLoanSimulationIndivForm.value.loanAmount?this.resetValidation():this.selectedProduct.productDetailsDTOs.length>0&&(this.selectedProduct.productDetailsDTOs.forEach(n=>{this.addLoanSimulationIndivForm.value.loanAmount>=n.minimumAmount&&this.addLoanSimulationIndivForm.value.loanAmount<=n.maximumAmount&&(e.push(n.minimumTerm),t.push(n.maximumTerm),this.amountTrouv=!0)}),this.amountTrouv?(this.minTermValidation=Math.min(...e),this.maxTermValidation=Math.max(...t),""!==this.addLoanSimulationIndivForm.value.loanTerm&&(this.addLoanSimulationIndivForm.value.loanTerm>this.minTermValidation&&this.addLoanSimulationIndivForm.value.loanTerm<this.maxTermValidation?this.addLoanSimulationIndivForm.controls.loanTerm.clearValidators():(this.limitMinTermValidation=this.addLoanSimulationIndivForm.value.loanTerm<this.minTermValidation,this.limitMaxTermValidation=this.addLoanSimulationIndivForm.value.loanTerm>this.maxTermValidation,this.addLoanSimulationIndivForm.controls.loanTerm.setErrors({invalid:!0,message:""})))):(this.addLoanSimulationIndivForm.controls.loanAmount.value>=this.maxAmountValidation?this.limitMaxAmountValidation=!0:this.addLoanSimulationIndivForm.controls.loanAmount.value<=this.minAmountValidation&&(this.limitMinAmountValidation=!0),this.addLoanSimulationIndivForm.controls.loanAmount.setErrors({invalid:!0,message:""})))}getMinMaxValueAmountCalculate(){this.amountTrouv=!1;let e=0;if(e=this.addLoanSimulationIndivForm.value.loanTerm*this.addLoanSimulationIndivForm.value.repayment,""===this.addLoanSimulationIndivForm.value.loanTerm||null===this.addLoanSimulationIndivForm.value.loanTerm)this.resetValidation();else if(this.selectedProduct.productDetailsDTOs.length>0)if(0!==e)this.selectedProduct.productDetailsDTOs.forEach(t=>{this.addLoanSimulationIndivForm.value.loanTerm>=t.minimumTerm&&this.addLoanSimulationIndivForm.value.loanTerm<=t.maximumTerm&&e>=t.minimumAmount&&e<=t.maximumAmount&&"ADD_ASSET"!==this.source&&(this.amountTrouv=!0,this.addLoanSimulationIndivForm.controls.loanAmount.clearValidators(),this.addLoanSimulationIndivForm.controls.loanAmount.setValue(e))}),this.amountTrouv||(this.addLoanSimulationIndivForm.controls.loanAmount.value>this.maxAmountValidation?this.limitMaxAmountValidation=!0:this.addLoanSimulationIndivForm.controls.loanAmount.value<this.minAmountValidation&&(this.limitMinAmountValidation=!0),this.addLoanSimulationIndivForm.controls.loanAmount.setErrors({invalid:!0,message:""}));else{const e=[],t=[];this.selectedProduct.productDetailsDTOs.forEach(n=>{this.addLoanSimulationIndivForm.value.loanTerm>=n.minimumTerm&&this.addLoanSimulationIndivForm.value.loanTerm<=n.maximumTerm&&(e.push(n.minimumAmount),t.push(n.maximumAmount),this.amountTrouv=!0)}),this.minAmountValidation=Math.min(...e),this.maxAmountValidation=Math.max(...t)}}getMinMaxValueTermCalculate(){this.termTrouv=!1;let e=0;if(e=Math.round(this.addLoanSimulationIndivForm.value.loanAmount/this.addLoanSimulationIndivForm.value.repayment),""===this.addLoanSimulationIndivForm.value.loanAmount||null===this.addLoanSimulationIndivForm.value.loanAmount)this.resetValidation();else if(this.selectedProduct.productDetailsDTOs.length>0)if(0!==e)this.selectedProduct.productDetailsDTOs.forEach(t=>{this.addLoanSimulationIndivForm.value.loanAmount>=t.minimumAmount&&this.addLoanSimulationIndivForm.value.loanAmount<=t.maximumAmount&&e>=t.minimumTerm&&e<=t.maximumTerm&&(this.termTrouv=!0,this.addLoanSimulationIndivForm.controls.loanTerm.clearValidators(),this.addLoanSimulationIndivForm.controls.loanTerm.setValue(e))}),this.termTrouv||(this.addLoanSimulationIndivForm.controls.loanTerm.value>this.maxTermValidation?this.limitMaxTermValidation=!0:this.addLoanSimulationIndivForm.controls.loanTerm.value<this.minTermValidation&&(this.limitMinTermValidation=!0),this.addLoanSimulationIndivForm.controls.loanTerm.setErrors({invalid:!0,message:""}));else{const e=[],t=[];this.selectedProduct.productDetailsDTOs.forEach(n=>{this.addLoanSimulationIndivForm.value.loanAmount>=n.minimumAmount&&this.addLoanSimulationIndivForm.value.loanAmount<=n.maximumAmount&&(e.push(n.minimumTerm),t.push(n.maximumTerm))}),this.addLoanSimulationIndivForm.controls.loanTerm.setValidators([y.MS,l.kI.min(Math.min(...e)),l.kI.max(Math.max(...t))])}}checkMinMaxAmountTermCalculate(){this.termTrouv=!1,this.amountTrouv=!1,this.addLoanForm.controls.product.value.productDetailsDTOs.forEach(e=>{this.addLoanSimulationIndivForm.value.loanAmount>=e.minimumAmount&&this.addLoanSimulationIndivForm.value.loanAmount<=e.maximumAmount&&this.addLoanSimulationIndivForm.value.loanTerm>=e.minimumTerm&&this.addLoanSimulationIndivForm.value.loanTerm<=e.maximumTerm&&(this.termTrouv=!0,this.amountTrouv=!0)}),!this.termTrouv&&!this.amountTrouv&&this.resetValidation()}resetValidation(){const e=[],t=[],n=[],i=[];this.selectedProduct.productDetailsDTOs.forEach(a=>{e.push(a.minimumTerm),t.push(a.maximumTerm),n.push(a.minimumAmount),i.push(a.maximumAmount),this.amountTrouv=!0}),this.addLoanSimulationIndivForm.controls.loanAmount.clearValidators(),null===this.addLoanSimulationIndivForm.controls.loanAmount.value&&(this.addLoanSimulationIndivForm.controls.loanAmount.setErrors({invalid:!0,message:""}),this.limitMinAmountValidation=!0),this.minAmountValidation=Math.min(...n),this.maxAmountValidation=Math.max(...i),this.addLoanSimulationIndivForm.controls.loanTerm.clearValidators(),null===this.addLoanSimulationIndivForm.controls.loanTerm.value&&(this.addLoanSimulationIndivForm.controls.loanTerm.setErrors({invalid:!0,message:""}),this.limitMinTermValidation=!0),this.minTermValidation=Math.min(...e),this.maxTermValidation=Math.max(...t)}checkAgeForProduct(){return this.customer.age=this.updateAge(),null===this.customer.age?(this.devToolsServices.openToast(3,"alert.age_limit_product"),!1):this.customer.age>=this.addLoanForm.value.product.minimumAge&&this.customer.age<=this.addLoanForm.value.product.maximumAge||(this.devToolsServices.openToast(3,"alert.age_limit_product"),!1)}checkIssueDate(){const e=new Date(this.addLoanSimulationIndivForm.controls.issueDate.value);e.setHours(0,0,0,0);const t=new Date;return t.setHours(0,0,0,0),e>=t||(this.devToolsServices.openToast(3,"alert.issue-date"),!1)}getInitialPaymentValue(){this.datePipe.transform(this.loanEntity.issueDate,"yyyy-MM-dd")!==this.addLoanSimulationIndivForm.controls.issueDate.value&&(this.checkCalculate=!0);const e=new Date(this.addLoanSimulationIndivForm.controls.issueDate.value),t=e;this.selectedProduct.isFrequency?t.setMonth(e.getMonth()+this.addLoanSimulationIndivForm.controls.interestFrequency.value):t.setDate(e.getDate()+30),this.addLoanSimulationIndivForm.controls.initialPayment.setValue(this.datePipe.transform(t,"yyyy-MM-dd"))}checkInitialPaymentValue(){const e=new Date(this.addLoanSimulationIndivForm.controls.issueDate.value),t=new Date(this.addLoanSimulationIndivForm.controls.initialPayment.value),n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),i=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((i-n)/864e5)}checkInitialPayment(){const e=new Date(this.addLoanSimulationIndivForm.controls.issueDate.value);e.setHours(0,0,0,0);const t=new Date(this.addLoanSimulationIndivForm.controls.initialPayment.value);return t.setHours(0,0,0,0),t>e||(this.devToolsServices.openToast(3,"alert.issue-payment"),!1)}changeFormLoan(){this.checkCalculate=!0}downloadSchedule(e){const t=new h.q;t.scheduleDTOs=e,t.loanDTO=this.selectedLoan;const n=new Date;this.loanApprovalService.reportingSchedule(t).subscribe(e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=window.URL.createObjectURL(t),a=document.createElement("a");a.download="schedule_"+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+"_"+n.getHours()+"-"+n.getMinutes(),a.href=i,a.click()})}openRequestExceptionModal(e){this.devToolsServices.makeFormAsTouched(this.addLoanForm),this.activeException||this.acceptedException?this.devToolsServices.openToast(3,"alert.exception_request_in_progress"):this.addLoanForm.valid&&this.addLoanSimulationIndivForm.valid?(this.getConnectedUser(),this.createRequestExceptionForm(),this.modalService.open(e,{size:"md"})):this.devToolsServices.openToast(3,"alert.check-data")}createRequestExceptionForm(){this.requestExceptionForm=this.formBuilder.group({maximumAllowedAmount:[this.maximumAllowedAmount],requestedAmount:["",[y.MS,l.kI.min(this.maximumAllowedAmount)]],note:[""]})}submitException(){this.requestExceptionForm.markAsTouched(),this.requestExceptionForm.valid&&(this.newExceptionRequest.allowedAmount=this.maximumAllowedAmount,this.newExceptionRequest.customerId=this.customer.id,this.newExceptionRequest.customerName=this.customer.customerNameNoPipe,this.newExceptionRequest.statut=p.J.NEW_STATUT_REQUEST,this.newExceptionRequest.makerName=this.currentUser.fullName,this.newExceptionRequest.makerUsername=this.currentUser.login,this.newExceptionRequest.note=this.requestExceptionForm.controls.note.value,this.newExceptionRequest.requestedAmount=this.requestExceptionForm.controls.requestedAmount.value,this.newExceptionRequest.branchId=this.customer.branchId,this.exceptionRequestService.createExceptionRequest(this.newExceptionRequest).subscribe(e=>{this.activeException=!0,this.devToolsServices.openToast(0,"alert.success"),this.modalService.dismissAll()}))}checkNewOrAccpetedException(){const e=new x.F;e.customerId=this.customer.id,e.listStatut=[p.J.NEW_STATUT_REQUEST,p.J.ACCEPTED_STATUT_REQUEST],this.exceptionRequestService.findExceptionRequest(e).subscribe(e=>{e.forEach(e=>{e.statut===p.J.NEW_STATUT_REQUEST?this.activeException=!0:e.statut===p.J.ACCEPTED_STATUT_REQUEST&&(this.acceptedException=!0,this.acceptedExceptionRequest=e)})})}getConnectedUser(){var e=this;return(0,a.Z)(function*(){e.currentUser=e.sharedService.getUser()})()}getDirection(){return v.y.direction}totalAmount(e){this.currentAmount=e,this.updateApportPersonnel(this.apportPersonnel)}fillAddLoanForm(){this.addLoanForm.controls.accountPortfolio.setValue(this.accountPortfolios.find(e=>e.accountPortfolioId===this.loanEntity.portfolioId)),this.addLoanForm.controls.loanReason.setValue(this.productLoanReasons.find(e=>e.code===this.loanEntity.loanReasonCode)),this.addLoanForm.controls.sourceOfFunds.setValue(this.sourceOfFundss.find(e=>e.loanSourceOfFundsID===this.loanEntity.sourceOfFundsID)),this.addLoanForm.controls.product.setValue(this.products.find(e=>e.id===this.loanEntity.productId)),this.getProductRequirement()}fillAddLoanSimulationIndivForm(){this.addLoanSimulationIndivForm.controls.repayment.setValue(this.loanEntity.normalPayment),this.addLoanSimulationIndivForm.controls.loanAmount.setValue(this.loanEntity.applyAmountTotal),this.addLoanSimulationIndivForm.controls.loanTerm.setValue(this.loanEntity.termPeriodNum),this.addLoanSimulationIndivForm.controls.issueDate.setValue(this.loanEntity.issueDate),this.addLoanSimulationIndivForm.controls.initialPayment.setValue(this.loanEntity.initialPaymentDate),this.addLoanSimulationIndivForm.controls.periodsDeferred.setValue(this.loanEntity.periodsDeferred),this.addLoanSimulationIndivForm.controls.periodsDeferredType.setValue(this.loanEntity.periodsDeferredType),this.addLoanSimulationIndivForm.controls.frequency.setValue(this.loanEntity.paymentFreq),this.addLoanSimulationIndivForm.controls.interestFrequency.setValue(this.loanEntity.interestFreq),this.getMinMaxValueTerm()}addNewAsset(){this.setLoanEntity(),this.sharedService.setLoan(this.loanEntity),this.router.navigate(["acm/add-asset"],{queryParams:{source:"ADD_LOAN"}})}setLoanEntity(){this.loanEntity=new r.t,this.loanEntity.portfolioCode=void 0!==this.addLoanForm.controls.accountPortfolio.value?this.addLoanForm.controls.accountPortfolio.value.login:null,this.loanEntity.portfolioId=void 0!==this.addLoanForm.controls.accountPortfolio.value?this.addLoanForm.controls.accountPortfolio.value.accountPortfolioId:null,this.loanEntity.productId=void 0!==this.addLoanForm.controls.product.value?this.addLoanForm.controls.product.value.id:null,this.loanEntity.loanAssetsDtos=[],void 0!==this.listAssets&&0!==this.listAssets.length?this.listAssets.forEach(e=>{this.loanEntity.loanAssetsDtos.push(e)}):this.sharedService.getLoan().loanAssetsDtos.forEach(e=>{this.loanEntity.loanAssetsDtos.push(e)}),this.loanEntity.personalContribution=this.apportPersonnel,this.loanEntity.productDTO=this.addLoanForm.controls.product.value,this.loanEntity.customerDTO=this.customer,this.loanEntity.branchID=this.customer.branchId,this.loanEntity.branchDescription=this.customer.branchesDescription,this.loanEntity.branchName=this.customer.branchesName,this.loanEntity.loanReasonCode=void 0!==this.addLoanForm.controls.loanReason.value?this.addLoanForm.controls.loanReason.value.code:"",this.loanEntity.loanReasonId=void 0!==this.addLoanForm.controls.loanReason.value?this.addLoanForm.controls.loanReason.value.loanReasonID:null,this.loanEntity.sourceOfFundsID=void 0!==this.addLoanForm.controls.sourceOfFunds.value?this.addLoanForm.controls.sourceOfFunds.value.loanSourceOfFundsID:null,this.loanEntity.customerType=this.customer.customerType,this.loanEntity.applyAmountTotal=this.addLoanSimulationIndivForm.controls.loanAmount.value,this.loanEntity.approvelAmount=this.addLoanSimulationIndivForm.controls.loanAmount.value,this.loanEntity.normalPayment=this.addLoanSimulationIndivForm.controls.repayment.value,this.loanEntity.termPeriodNum=this.addLoanSimulationIndivForm.controls.loanTerm.value,this.loanEntity.interestFreq=this.addLoanSimulationIndivForm.controls.interestFrequency.value,this.loanEntity.paymentFreq=this.addLoanSimulationIndivForm.controls.frequency.value,this.loanEntity.issueDate=this.addLoanSimulationIndivForm.controls.issueDate.value,this.loanEntity.initialPaymentDate=this.addLoanSimulationIndivForm.controls.initialPayment.value,this.loanEntity.periodsDeferredType=this.addLoanSimulationIndivForm.controls.periodsDeferredType.value,this.loanEntity.periodsDeferred=this.addLoanSimulationIndivForm.controls.periodsDeferred.value,this.loanEntity.termPeriodID=this.addLoanSimulationIndivForm.controls.termType.value,this.loanEntity.apr=this.aprWithoutRound,this.loanEntity.effectiveIntRate=this.irrWithoutRound,!0===this.useExternalCbs?this.loanEntity.issueFeeAmount=this.issueFeeAmount:this.loanEntity.acmIssueFees=this.issueFeeAmount,this.loanEntity.feeAmt1=this.feeAmount,this.loanEntity.loanApplicationStatus=p.J.NEW_APPLICATION,this.sharedService.setLoan(this.loanEntity)}isOfflineModeEnabled(){return(0,y.L0)()}scheduleFlexibleChecked(e){this.scheduleFlexibleIsChecked=e.target.checked}}return e.\u0275fac=function(t){return new(t||e)(g.\u0275\u0275directiveInject(E.R),g.\u0275\u0275directiveInject(l.qu),g.\u0275\u0275directiveInject(i.F0),g.\u0275\u0275directiveInject(I.q),g.\u0275\u0275directiveInject(L.g),g.\u0275\u0275directiveInject(T.F),g.\u0275\u0275directiveInject(D.C),g.\u0275\u0275directiveInject(b.n),g.\u0275\u0275directiveInject(C.DatePipe),g.\u0275\u0275directiveInject(A.FF),g.\u0275\u0275directiveInject(V.sK),g.\u0275\u0275directiveInject(P.g),g.\u0275\u0275directiveInject(i.gz),g.\u0275\u0275directiveInject(w.j),g.\u0275\u0275directiveInject(_.KN),g.\u0275\u0275directiveInject(M.ys))},e.\u0275cmp=g.\u0275\u0275defineComponent({type:e,selectors:[["app-simulation-loan"]],viewQuery:function(e,t){if(1&e&&g.\u0275\u0275viewQuery(c.I,7),2&e){let e;g.\u0275\u0275queryRefresh(e=g.\u0275\u0275loadQuery())&&(t.childcomp=e.first)}},inputs:{completeLoanData:"completeLoanData"},decls:224,vars:158,consts:[[3,"heading","icon","account","status",4,"ngIf"],[3,"formGroup"],[1,"card-hover-shadow-2x","mb-1","card"],["data-target","#collapseLoanDetails","aria-expanded","true","aria-controls","collapseCustomerAccount",1,"card-header","d-flex","justify-content-between",3,"click"],[1,"lnr-file-empty","text-secondary","pr-2"],[3,"ngClass"],["aria-labelledby","headingOne","data-parent","#accordionExample",3,"ngClass"],[1,"card-body"],[1,"row"],[1,"col-xl-6","col-md-6","col-md-6","px-1"],[1,"position-relative","form-group"],[1,"text-danger"],["formControlName","product","name","product",1,"form-control",3,"change"],["selected","","value",""],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","loanReason","name","loanReason",1,"form-control"],[3,"formGroup","change"],["data-target","#collapseLoanSimulation","aria-expanded","true","aria-controls","collapseCustomerAccount",1,"card-header","d-flex","justify-content-between",3,"click"],[1,"lnr-sync","text-secondary","pr-2"],["class","row",4,"ngIf"],[1,"col-xl-4","col-md-4","px-1","position-relative"],[1,"form-group","input-group","mb-2"],["type","number","step","500","min","0","formControlName","loanAmount",1,"form-control",3,"placeholder","change"],[1,"input-group-append"],["ngxclipboard","","type","button","ng-reflect-target-elm","",1,"btn","btn-light","border","hl"],[1,"row","px-1"],[1,"px-4","text-uppercase","ACM-field-description","mb-0",3,"ngClass"],["class","col-xl-3 col-md-3 px-1 position-relative",4,"ngIf"],["class","col-xl-4 col-md-4 px-1 position-relative",4,"ngIf"],[1,"col-xl-5","col-md-5","px-1"],[1,"form-group","row"],[1,"col-xl-8","col-md-8"],["type","number","step","1","min","0","formControlName","loanTerm",1,"form-control",3,"placeholder","change"],[1,"row","px-1","mt-1"],[1,"col-xl-4","col-md-4","px-1"],["formControlName","termType",1,"custom-select"],["value","1"],["value","3"],["value","2"],["value","5"],["type","date","formControlName","issueDate",1,"form-control",3,"placeholder","min","change"],["type","date","formControlName","initialPayment",1,"form-control",3,"placeholder"],[1,"row","d-flex","align-items-end"],[1,"col-xl-9","col-md-9","px-1"],[1,"col-xl-6","col-md-6"],["type","number","formControlName","periodsDeferred",1,"form-control",3,"placeholder","change"],[1,"col-xl-6","col-md-6","px-1"],["formControlName","periodsDeferredType",1,"form-control"],["selected","","value","","disabled",""],[4,"ngIf"],[1,"col-xl-3","col-md-3","pb-4","row","px-4"],[1,"position-relative","form-group","px-1"],[1,"btn","btn-primary",3,"click"],["class","position-relative form-group px-1",4,"ngIf"],[1,"solid"],[1,"form-group","input-group"],["readonly","","type","number","step","500","min","0","formControlName","apr",1,"form-control",3,"placeholder"],["ngxclipboard","","type","button","ng-reflect-target-elm","",1,"btn","btn-light","hl"],["readonly","","type","number","step","500","min","0","formControlName","repayment",1,"form-control",3,"placeholder"],[1,"card","no-shadow","rm-border","bg-transparent","widget-chart","text-left","col-xl-2","col-md-2","px-1","ACM-calculate",2,"display","none"],[1,"icon-wrapper","rounded-circle"],[1,"icon-wrapper-bg","opacity-8","bg-danger"],[1,"pe-7s-cash","text-white"],[1,"widget-chart-content"],[1,"widget-subheading"],[1,"widget-numbers","text-black","ACM-font-size-calculate"],["readOnly","","type","number","formControlName","fees",1,"form-control",3,"placeholder"],["readOnly","","type","number","formControlName","closingBalance",1,"form-control",3,"placeholder"],[1,"icon-wrapper-bg","opacity-8","bg-success"],[1,"widget-numbers","text-success","ACM-font-size-calculate"],["class","d-block text-end card-footer p-2",4,"ngIf"],[3,"heading","icon","account","status"],[3,"ngValue"],[1,"col-xl-5","col-md-5","px-1","position-relative"],["type","number","disabled","",1,"form-control",3,"placeholder","value"],["type","number","min","0",1,"form-control",3,"placeholder","value","change"],["ngxclipboard","","type","button","ng-reflect-target-elm","",1,"btn","btn-light","border"],[1,"col-xl-3","col-md-3","px-1","position-relative"],["placeholder","Repayement frequency","type","number","step","1","min","0","formControlName","frequency",1,"form-control"],["placeholder","Interest frequency","type","number","step","1","min","0","formControlName","interestFrequency",1,"form-control",3,"change"],[3,"selected","ngValue",4,"ngFor","ngForOf"],[3,"selected","ngValue"],[1,"btn","btn-warning","text-white",3,"disabled","click"],["class","mt-2",4,"ngIf"],["data-target","#collapseLoanSchedule","aria-expanded","true","aria-controls","collapseCustomerAccount",1,"card-header","d-flex","justify-content-between",3,"click"],[1,"lnr-chart-bars","text-secondary","pr-2"],[1,"d-flex","justify-content-end"],["type","button",1,"mb-2","mx-2","my-2","btn-icon","btn-icon-only","btn-shadow","btn-dashed","btn","btn-outline-focus",3,"click"],[1,"pe-7s-cloud-download","btn-icon-wrapper",3,"ngbTooltip"],[1,"table-responsive","mt-2"],[1,"mb-0","table","green"],[4,"ngFor","ngForOf"],[1,"card-footer","pb-0"],[1,"row","w-100"],[1,"col-xl-6","col-lg-6","col-md-12"],["size","sm",3,"collectionSize","page","pageSize","maxSize","boundaryLinks","pageChange"],[1,"d-flex","justify-content-lg-end"],["name","pageSize",1,"custom-select",2,"width","auto",3,"ngModel","ngModelChange"],[1,"mt-2"],[1,"mx-2","btn","btn-primary",3,"click"],["type","checkbox",1,"mt-2","form-check-input",3,"click"],[1,"custom-control-label"],[3,"ngStyle"],[3,"ngStyle",4,"ngIf"],["min","0","type","number",1,"form-control",3,"ngModel","change","ngModelChange"],[1,"d-block","text-end","card-footer","p-2"],[1,"mx-2","btn","btn-outline-danger",3,"click"],[1,"btn","btn-success","mx-2",3,"disabled","click"]],template:function(e,t){1&e&&(g.\u0275\u0275template(0,R,2,6,"app-page-title",0),g.\u0275\u0275elementStart(1,"form",1),g.\u0275\u0275elementStart(2,"div",2),g.\u0275\u0275elementStart(3,"div",3),g.\u0275\u0275listener("click",function(){return t.toggleCollapseLoanDetails()}),g.\u0275\u0275elementStart(4,"div"),g.\u0275\u0275element(5,"i",4),g.\u0275\u0275text(6),g.\u0275\u0275pipe(7,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(8,"div"),g.\u0275\u0275element(9,"i",5),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(10,"div",6),g.\u0275\u0275elementStart(11,"div",7),g.\u0275\u0275elementStart(12,"div",8),g.\u0275\u0275elementStart(13,"div",9),g.\u0275\u0275elementStart(14,"div",10),g.\u0275\u0275elementStart(15,"label"),g.\u0275\u0275text(16),g.\u0275\u0275pipe(17,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(18,"span",11),g.\u0275\u0275text(19,"*"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(20,"select",12),g.\u0275\u0275listener("change",function(){return t.getProductRequirement()}),g.\u0275\u0275elementStart(21,"option",13),g.\u0275\u0275text(22),g.\u0275\u0275pipe(23,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(24,k,2,2,"option",14),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(25,"div",9),g.\u0275\u0275elementStart(26,"div",10),g.\u0275\u0275elementStart(27,"label"),g.\u0275\u0275text(28),g.\u0275\u0275pipe(29,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(30,"span",11),g.\u0275\u0275text(31,"*"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(32,"select",15),g.\u0275\u0275elementStart(33,"option",13),g.\u0275\u0275text(34),g.\u0275\u0275pipe(35,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(36,G,2,2,"option",14),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(37,"form",16),g.\u0275\u0275listener("change",function(){return t.changeFormLoan()}),g.\u0275\u0275elementStart(38,"div",2),g.\u0275\u0275elementStart(39,"div",17),g.\u0275\u0275listener("click",function(){return t.toggleCollapseLoanSimulation()}),g.\u0275\u0275elementStart(40,"div"),g.\u0275\u0275element(41,"i",18),g.\u0275\u0275text(42),g.\u0275\u0275pipe(43,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(44,"div"),g.\u0275\u0275element(45,"i",5),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(46,"div",6),g.\u0275\u0275elementStart(47,"div",7),g.\u0275\u0275template(48,q,21,16,"div",19),g.\u0275\u0275elementStart(49,"div",8),g.\u0275\u0275elementStart(50,"div",20),g.\u0275\u0275elementStart(51,"label"),g.\u0275\u0275text(52),g.\u0275\u0275pipe(53,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(54,"span",11),g.\u0275\u0275text(55,"*"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(56,"div",21),g.\u0275\u0275elementStart(57,"div"),g.\u0275\u0275elementStart(58,"input",22),g.\u0275\u0275listener("change",function(){return t.getMinMaxValueTerm()}),g.\u0275\u0275pipe(59,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(60,"span",23),g.\u0275\u0275elementStart(61,"button",24),g.\u0275\u0275text(62),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(63,"div",25),g.\u0275\u0275elementStart(64,"p",26),g.\u0275\u0275text(65),g.\u0275\u0275pipe(66,"translate"),g.\u0275\u0275pipe(67,"number"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(68,"p",26),g.\u0275\u0275text(69),g.\u0275\u0275pipe(70,"translate"),g.\u0275\u0275pipe(71,"number"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(72,B,11,4,"div",27),g.\u0275\u0275template(73,j,11,4,"div",28),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(74,"div",8),g.\u0275\u0275elementStart(75,"div",29),g.\u0275\u0275elementStart(76,"div",10),g.\u0275\u0275elementStart(77,"label"),g.\u0275\u0275text(78),g.\u0275\u0275pipe(79,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(80,"span",11),g.\u0275\u0275text(81,"*"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(82,"div",30),g.\u0275\u0275elementStart(83,"div",31),g.\u0275\u0275elementStart(84,"input",32),g.\u0275\u0275listener("change",function(){return t.getMinMaxValueAmount()}),g.\u0275\u0275pipe(85,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(86,"div",33),g.\u0275\u0275elementStart(87,"p",26),g.\u0275\u0275text(88),g.\u0275\u0275pipe(89,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(90,"p",26),g.\u0275\u0275text(91),g.\u0275\u0275pipe(92,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(93,"div",34),g.\u0275\u0275elementStart(94,"span",23),g.\u0275\u0275elementStart(95,"select",35),g.\u0275\u0275elementStart(96,"option",36),g.\u0275\u0275text(97),g.\u0275\u0275pipe(98,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(99,"option",37),g.\u0275\u0275text(100),g.\u0275\u0275pipe(101,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(102,"option",38),g.\u0275\u0275text(103),g.\u0275\u0275pipe(104,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(105,"option",39),g.\u0275\u0275text(106),g.\u0275\u0275pipe(107,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(108,"div",8),g.\u0275\u0275elementStart(109,"div",29),g.\u0275\u0275elementStart(110,"div",10),g.\u0275\u0275elementStart(111,"label"),g.\u0275\u0275text(112),g.\u0275\u0275pipe(113,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(114,"span",11),g.\u0275\u0275text(115,"*"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(116,"input",40),g.\u0275\u0275listener("change",function(){return t.getInitialPaymentValue()}),g.\u0275\u0275pipe(117,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(118,"div",29),g.\u0275\u0275elementStart(119,"div",10),g.\u0275\u0275elementStart(120,"label"),g.\u0275\u0275text(121),g.\u0275\u0275pipe(122,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(123,"span",11),g.\u0275\u0275text(124,"*"),g.\u0275\u0275elementEnd(),g.\u0275\u0275element(125,"input",41),g.\u0275\u0275pipe(126,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(127,"div",42),g.\u0275\u0275elementStart(128,"div",43),g.\u0275\u0275elementStart(129,"div",10),g.\u0275\u0275elementStart(130,"label"),g.\u0275\u0275text(131),g.\u0275\u0275pipe(132,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(133,"div",30),g.\u0275\u0275elementStart(134,"div",44),g.\u0275\u0275elementStart(135,"input",45),g.\u0275\u0275listener("change",function(){return t.checkDeferredPeriod()}),g.\u0275\u0275pipe(136,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(137,"div",33),g.\u0275\u0275elementStart(138,"p",26),g.\u0275\u0275text(139),g.\u0275\u0275pipe(140,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(141,"p",26),g.\u0275\u0275text(142),g.\u0275\u0275pipe(143,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(144,"div",46),g.\u0275\u0275elementStart(145,"span",23),g.\u0275\u0275elementStart(146,"select",47),g.\u0275\u0275elementStart(147,"option",48),g.\u0275\u0275text(148),g.\u0275\u0275pipe(149,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(150,Y,2,1,"ng-container",49),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(151,"div",50),g.\u0275\u0275elementStart(152,"div",51),g.\u0275\u0275elementStart(153,"button",52),g.\u0275\u0275listener("click",function(){return t.calculate(!0)}),g.\u0275\u0275text(154),g.\u0275\u0275pipe(155,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(156,z,4,4,"div",53),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275element(157,"hr",54),g.\u0275\u0275elementStart(158,"div",42),g.\u0275\u0275elementStart(159,"div",29),g.\u0275\u0275elementStart(160,"label"),g.\u0275\u0275text(161),g.\u0275\u0275pipe(162,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(163,"div",55),g.\u0275\u0275element(164,"input",56),g.\u0275\u0275pipe(165,"translate"),g.\u0275\u0275elementStart(166,"span",23),g.\u0275\u0275elementStart(167,"button",57),g.\u0275\u0275text(168),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(169,"div",29),g.\u0275\u0275elementStart(170,"label"),g.\u0275\u0275text(171),g.\u0275\u0275pipe(172,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(173,"div",55),g.\u0275\u0275element(174,"input",58),g.\u0275\u0275pipe(175,"translate"),g.\u0275\u0275elementStart(176,"span",23),g.\u0275\u0275elementStart(177,"button",57),g.\u0275\u0275text(178),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(179,"div",59),g.\u0275\u0275elementStart(180,"div",60),g.\u0275\u0275element(181,"div",61),g.\u0275\u0275element(182,"i",62),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(183,"div",63),g.\u0275\u0275elementStart(184,"div",64),g.\u0275\u0275text(185),g.\u0275\u0275pipe(186,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(187,"div",65),g.\u0275\u0275elementStart(188,"span"),g.\u0275\u0275text(189),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(190,"div",8),g.\u0275\u0275elementStart(191,"div",29),g.\u0275\u0275elementStart(192,"label"),g.\u0275\u0275text(193),g.\u0275\u0275pipe(194,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(195,"div",55),g.\u0275\u0275element(196,"input",66),g.\u0275\u0275pipe(197,"translate"),g.\u0275\u0275elementStart(198,"span",23),g.\u0275\u0275elementStart(199,"button",57),g.\u0275\u0275text(200),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(201,"div",29),g.\u0275\u0275elementStart(202,"label"),g.\u0275\u0275text(203),g.\u0275\u0275pipe(204,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(205,"div",55),g.\u0275\u0275element(206,"input",67),g.\u0275\u0275pipe(207,"translate"),g.\u0275\u0275elementStart(208,"span",23),g.\u0275\u0275elementStart(209,"button",57),g.\u0275\u0275text(210),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(211,"div",59),g.\u0275\u0275elementStart(212,"div",60),g.\u0275\u0275element(213,"div",68),g.\u0275\u0275element(214,"i",62),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(215,"div",63),g.\u0275\u0275elementStart(216,"div",64),g.\u0275\u0275text(217),g.\u0275\u0275pipe(218,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(219,"div",69),g.\u0275\u0275elementStart(220,"span"),g.\u0275\u0275text(221),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(222,te,59,54,"div",49),g.\u0275\u0275template(223,ne,10,11,"div",70)),2&e&&(g.\u0275\u0275property("ngIf",t.completeLoanData),g.\u0275\u0275advance(1),g.\u0275\u0275property("formGroup",t.addLoanForm),g.\u0275\u0275advance(5),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(7,74,"loan.loan_product")," "),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngClass",!0===t.expandedLoanDetails?"lnr-chevron-up text-secondary":"lnr-chevron-down text-secondary"),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngClass",!0===t.expandedLoanDetails?"collapse show":"collapse"),g.\u0275\u0275advance(6),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(17,76,"loan_management.calculators.product")),g.\u0275\u0275advance(6),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(23,78,"loan_management.calculators.product_code_default_select")," "),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngForOf",t.products),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(29,80,"loan_management.loan_details.loan_reason")),g.\u0275\u0275advance(6),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(35,82,"loan_management.loan_details.loan_reason_default_select")," "),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngForOf",t.productLoanReasons),g.\u0275\u0275advance(1),g.\u0275\u0275property("formGroup",t.addLoanSimulationIndivForm),g.\u0275\u0275advance(5),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(43,84,"loan_management.calculators.loan_simulation")," "),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngClass",!0===t.expandedLoanSimulation?"lnr-chevron-up text-secondary":"lnr-chevron-down text-secondary"),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngClass",!0===t.expandedLoanSimulation?"collapse show":"collapse"),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngIf",t.supplier),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(53,86,"loan_management.calculators.loan_amount")),g.\u0275\u0275advance(6),g.\u0275\u0275propertyInterpolate("placeholder",g.\u0275\u0275pipeBind1(59,88,"loan_management.calculators.loan_amount")),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(t.currencySymbol),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngClass",t.limitMinAmountValidation?"text-danger":""),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate2(" ",g.\u0275\u0275pipeBind1(66,90,"button.min")," ",g.\u0275\u0275pipeBind3(67,92,t.minAmountValidation,t.decimalPlaces,"fr"),""),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngClass",t.limitMaxAmountValidation?"text-danger":""),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate2(" ",g.\u0275\u0275pipeBind1(70,96,"button.max")," ",g.\u0275\u0275pipeBind3(71,98,t.maxAmountValidation,t.decimalPlaces,"fr"),""),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngIf",t.selectedProduct.isFrequency),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngIf",t.selectedProduct.isFrequency),g.\u0275\u0275advance(5),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(79,102,"loan_management.calculators.loan_term")),g.\u0275\u0275advance(6),g.\u0275\u0275propertyInterpolate("placeholder",g.\u0275\u0275pipeBind1(85,104,"loan_management.calculators.loan_term")),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngClass",t.limitMinTermValidation?"text-danger":""),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate2(" ",g.\u0275\u0275pipeBind1(89,106,"button.min")," ",t.minTermValidation,""),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngClass",t.limitMaxTermValidation?"text-danger":""),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate2(" ",g.\u0275\u0275pipeBind1(92,108,"button.max")," ",t.maxTermValidation,""),g.\u0275\u0275advance(6),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(98,110,"term-periode.day")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(101,112,"term-periode.month")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(104,114,"term-periode.week")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(107,116,"term-periode.year")),g.\u0275\u0275advance(6),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(113,118,"loan_management.calculators.issue_date"),""),g.\u0275\u0275advance(4),g.\u0275\u0275propertyInterpolate("placeholder",g.\u0275\u0275pipeBind1(117,120,"loan_management.calculators.issue_date")),g.\u0275\u0275property("min",t.minIssueDatevalue),g.\u0275\u0275advance(5),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(122,122,"loan_management.calculators.initial_payment"),""),g.\u0275\u0275advance(4),g.\u0275\u0275propertyInterpolate("placeholder",g.\u0275\u0275pipeBind1(126,124,"loan_management.calculators.initial_payment")),g.\u0275\u0275advance(6),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(132,126,"loan_management.calculators.periods_deferred"),""),g.\u0275\u0275advance(4),g.\u0275\u0275propertyInterpolate("placeholder",g.\u0275\u0275pipeBind1(136,128,"loan_management.calculators.periods_deferred")),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngClass",t.limitMinPeriodsValidation?"text-danger":""),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate2(" ",g.\u0275\u0275pipeBind1(140,130,"button.min")," ",t.minPeriodsValidation,""),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngClass",t.limitMaxPeriodsValidation?"text-danger":""),g.\u0275\u0275advance(1),g.\u0275\u0275textInterpolate2(" ",g.\u0275\u0275pipeBind1(143,132,"button.max")," ",t.maxPeriodsValidation,""),g.\u0275\u0275advance(6),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(149,134,"upload_document.default_select")," "),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngIf",void 0!==t.selectedProduct&&void 0!==(null==t.selectedProduct?null:t.selectedProduct.productDetailsDTOs)),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate1("",g.\u0275\u0275pipeBind1(155,136,"button.calculate")," "),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngIf",t.renewelLoanCondition),g.\u0275\u0275advance(5),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(162,138,"loan_management.calculators.apr")),g.\u0275\u0275advance(3),g.\u0275\u0275propertyInterpolate("placeholder",g.\u0275\u0275pipeBind1(165,140,"loan_management.calculators.apr")),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(t.currencySymbol),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(172,142,"loan_management.calculators.repayment")),g.\u0275\u0275advance(3),g.\u0275\u0275propertyInterpolate("placeholder",g.\u0275\u0275pipeBind1(175,144,"loan_management.calculators.repayment")),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(t.currencySymbol),g.\u0275\u0275advance(7),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(186,146,"loan_management.calculators.apr"),""),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate1("",t.apr," % "),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(194,148,"loan_management.calculators.fees"),""),g.\u0275\u0275advance(3),g.\u0275\u0275propertyInterpolate("placeholder",g.\u0275\u0275pipeBind1(197,150,"loan_management.calculators.fees")),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(t.currencySymbol),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate1(" ",g.\u0275\u0275pipeBind1(204,152,"loan_management.calculators.closing_balance"),""),g.\u0275\u0275advance(3),g.\u0275\u0275propertyInterpolate("placeholder",g.\u0275\u0275pipeBind1(207,154,"loan_management.calculators.closing_balance")),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(t.currencySymbol),g.\u0275\u0275advance(7),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(218,156,"loan_management.calculators.irr")),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate1("",t.irr," %"),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngIf",t.schedules.length>0),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngIf",t.completeLoanData))},directives:[C.NgIf,l._Y,l.JL,l.sg,U.MU,O.jv,C.NgClass,U.HK,l.EJ,U.oH,l.JJ,l.u,O.wj,l.YN,l.Kr,C.NgForOf,l.qQ,l.wV,l.Fj,N.T,A._L,A.N9,l.On,C.NgStyle],pipes:[V.X$,C.DecimalPipe,C.SlicePipe],styles:[""]}),e})(),canActivate:[n(72159).P],data:{extraParameter:"dashboardsMenu"}}]}];let ae=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=g.\u0275\u0275defineInjector({imports:[[i.Bz.forChild(ie)],i.Bz]}),e})()},92465:function(e,t,n){n.d(t,{V:function(){return i}});class i{}},98758:function(e,t,n){n.d(t,{F:function(){return i}});class i{constructor(){}}},58761:function(e,t,n){n.d(t,{q:function(){return i}});class i{constructor(){}}},91458:function(e,t,n){n.d(t,{S:function(){return i}});class i{}},32551:function(e,t,n){n.d(t,{Y:function(){return i}});class i{constructor(){}}}}]);